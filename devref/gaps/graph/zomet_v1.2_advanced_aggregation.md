# zomet v1.2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

**–°—Ç–∞—Ç—É—Å**: Planned
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: Medium
**–û—Ü–µ–Ω–∫–∞**: 11-16 —á–∞—Å–æ–≤ (~2 –¥–Ω—è)
**–ë–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω**: [zomet.md](./zomet.md) (v7.1, –≠—Ç–∞–ø—ã 0-3 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)

---

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í v1.0 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ MVP-–∞–≥—Ä–µ–≥–∞—Ü–∏—è (`_aggregate_zone_metrics_mvp()`):
- ‚úÖ –¢–æ–ª—å–∫–æ `mean ¬± std` (—Å—Ä–µ–¥–Ω–µ–µ –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ)
- ‚úÖ –¢–æ–ª—å–∫–æ swing –º–µ—Ç—Ä–∏–∫–∏ (rally, drop, ratio, durations)
- ‚úÖ –†–µ–∂–∏–º—ã –≤—ã–≤–æ–¥–∞: `compact` (8 —Å—Ç—Ä–æ–∫) –∏ `full` (~16 —Å—Ç—Ä–æ–∫)

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MVP**:
- –ù–µ—Ç robust —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫ (median/IQR) ‚Äî —É—è–∑–≤–∏–º—ã –∫ –≤—ã–±—Ä–æ—Å–∞–º
- –ù–µ—Ç shape –º–µ—Ç—Ä–∏–∫ –≤ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ (skewness, kurtosis)
- –ù–µ—Ç min/max –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
- –ù–µ—Ç –≥–∏–±–∫–æ–≥–æ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏

---

## –¶–µ–ª–∏ v1.2

–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –±–µ–∑ breaking changes –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ API.

---

## –ó–∞–¥–∞—á–∏

### 1. `_aggregate_zone_metrics_advanced()` ‚Äî Robust —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: ‚≠ê‚≠ê (2/5)
**–í—Ä–µ–º—è**: 2-3 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
```python
def _aggregate_zone_metrics_advanced(
    zones: List[Dict],
    agg_mode: str = 'median_iqr'  # 'median_iqr' | 'mean_std' | 'both'
) -> Dict[str, Dict[str, Any]]
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç**:
- `agg_mode='median_iqr'`: median, IQR (Q75-Q25), Q25, Q75
- `agg_mode='mean_std'`: mean, std (—ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç MVP)
- `agg_mode='both'`: –≤—Å–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤–º–µ—Å—Ç–µ

**–ó–∞—á–µ–º**: Median —É—Å—Ç–æ–π—á–∏–≤ –∫ –≤—ã–±—Ä–æ—Å–∞–º, IQR –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç spread –±–µ–∑ –≤–ª–∏—è–Ω–∏—è —ç–∫—Å—Ç—Ä–µ–º—É–º–æ–≤.

---

### 2. `_aggregate_zone_metrics_full()` ‚Äî –ü–æ–ª–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: ‚≠ê‚≠ê‚≠ê (3/5)
**–í—Ä–µ–º—è**: 4-6 —á–∞—Å–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**:
```python
def _aggregate_zone_metrics_full(
    zones: List[Dict],
    include_shape: bool = True,
    agg_modes: List[str] = ['mean_std', 'median_iqr', 'min_max']
) -> Dict[str, Dict[str, Any]]
```

**–î–æ–±–∞–≤–ª—è–µ—Ç –∫ advanced**:
- Shape –º–µ—Ç—Ä–∏–∫–∏ –≤ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏: `shape_skewness`, `shape_kurtosis`
- Min/max –¥–∏–∞–ø–∞–∑–æ–Ω—ã: `rally_min`, `rally_max`, `drop_min`, `drop_max`
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

**–ó–∞—á–µ–º**: –ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –ø–æ –∑–æ–Ω–∞–º –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.

---

### 3. `_format_aggregate_metrics_advanced()` ‚Äî –ß–∏—Ç–∞–µ–º—ã–π –≤—ã–≤–æ–¥
**–°–ª–æ–∂–Ω–æ—Å—Ç—å**: ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)
**–í—Ä–µ–º—è**: 3-4 —á–∞—Å–∞

**–†–µ–∂–∏–º—ã —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:

#### `mode='compact'` (8-10 —Å—Ç—Ä–æ–∫)
```
üìä Bull Zones: 37/37 with swings (100%)
  Rally: 1.1% [0.7-1.5%]  (median [Q1-Q3])
  Drop: 1.0% [0.6-1.4%]
  Ratio: 1.2x
```

#### `mode='full'` (12-16 —Å—Ç—Ä–æ–∫)
```
üìä Bull Zones: 37/37 with swings (100%)
  Rally: Œº=1.1%¬±0.7% | M=1.1% [0.7-1.5%]
  Drop: Œº=1.0%¬±0.6% | M=1.0% [0.6-1.4%]
  Ratio: Œº=1.2x | M=1.2x
```

#### `mode='detailed'` (25-30 —Å—Ç—Ä–æ–∫)
```
üìä Bull Zones: 37/37 with swings (100%)

Rally Amplitude:
  Mean: 1.1% ¬± 0.7% | Median: 1.1% (IQR: 0.8%)
  Range: [0.2% - 3.5%] | Duration: 3.5 ¬± 1.2 bars

Drop Amplitude:
  Mean: 1.0% ¬± 0.6% | Median: 1.0% (IQR: 0.7%)
  Range: [0.3% - 2.8%] | Duration: 2.1 ¬± 0.8 bars

Shape Characteristics:
  Skewness: 0.35 ¬± 0.22 (right-tailed tendency)
  Kurtosis: 2.45 ¬± 0.65 (platykurtic tendency)
```

**–ó–∞—á–µ–º**: –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π, —Å–æ—Ö—Ä–∞–Ω—è—è –≥–∏–±–∫–æ—Å—Ç—å.

---

### 4. –¢–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
**–í—Ä–µ–º—è**: 2-3 —á–∞—Å–∞

- Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- Edge cases: –ø—É—Å—Ç—ã–µ –∑–æ–Ω—ã, –≤—ã–±—Ä–æ—Å—ã, –Ω–µ—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–≤–∏–Ω–≥–∏
- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ mean vs median –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ docstrings

---

## API –¥–∏–∑–∞–π–Ω

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–ø—Ä–æ—Å—Ç–æ–π, –Ω–æ –≤–∑—Ä—ã–≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π)
```python
result.visualize(
    "overview",
    show_aggregate_metrics=True,
    aggregate_metrics_mode='full',        # 'compact' | 'full' | 'detailed'
    aggregate_statistics='median_iqr',    # 'mean_std' | 'median_iqr' | 'both'
    aggregate_include_shape=True,
)
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```python
from bquant.visualization.config import AggregateConfig

agg_config = AggregateConfig(
    mode='full',              # –£—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–≤–æ–¥–∞
    statistics='median_iqr',  # –¢–∏–ø —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫
    include_shape=True,       # Shape –º–µ—Ç—Ä–∏–∫–∏
    include_min_max=False,    # Min/max –¥–∏–∞–ø–∞–∑–æ–Ω—ã
)

result.visualize(
    "overview",
    show_aggregate_metrics=True,
    aggregate_config=agg_config,
)
```

**–í—ã–±–æ—Ä**: –í–∞—Ä–∏–∞–Ω—Ç 2 –¥–ª—è –≥–∏–±–∫–æ—Å—Ç–∏ –±–µ–∑ API pollution.

---

## –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- MVP –º–µ—Ç–æ–¥ `_aggregate_zone_metrics_mvp()` –æ—Å—Ç–∞—ë—Ç—Å—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä `aggregate_metrics_mode='compact'|'full'` –æ—Å—Ç–∞—ë—Ç—Å—è
- –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º `aggregate_config`

---

## –≠—Ç–∞–ø—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1. **–≠—Ç–∞–ø 1** (2-3—á): –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_aggregate_zone_metrics_advanced()` —Å median/IQR
2. **–≠—Ç–∞–ø 2** (4-6—á): –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_aggregate_zone_metrics_full()` —Å shape –º–µ—Ç—Ä–∏–∫–∞–º–∏
3. **–≠—Ç–∞–ø 3** (3-4—á): –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_format_aggregate_metrics_advanced()` —Å 3 —Ä–µ–∂–∏–º–∞–º–∏
4. **–≠—Ç–∞–ø 4** (2-3—á): –¢–µ—Å—Ç—ã, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

**–û–±—â–µ–µ –≤—Ä–µ–º—è**: 11-16 —á–∞—Å–æ–≤

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [ ] `_aggregate_zone_metrics_advanced()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] `_aggregate_zone_metrics_full()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- [ ] `_format_aggregate_metrics_advanced()` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 3 —Ä–µ–∂–∏–º–∞ –≤—ã–≤–æ–¥–∞
- [ ] `AggregateConfig` –∫–ª–∞—Å—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `plot_zones_on_price_chart()` –∏ `result.visualize()`
- [ ] –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (BC —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞)
- [ ] –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç edge cases
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ (docstrings + –ø—Ä–∏–º–µ—Ä—ã)
- [ ] –ü—Ä–∏–º–µ—Ä –≤ `examples/` –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ —Ä–µ–∂–∏–º—ã

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [zomet.md](./zomet.md) ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–Ω v7.1 (–≠—Ç–∞–ø—ã 0-3 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã)
- [gloswing.md](./gloswing.md) ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º —Å–≤–∏–Ω–≥–æ–≤ (—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

---

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

**–ü–æ—á–µ–º—É "_mvp" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ –º–µ—Ç–æ–¥–∞?**
–≠—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –º–∞—Ä–∫–µ—Ä —Ñ–∞–∑—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (Minimum Viable Product). –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∞–∑–æ–≤—É—é –≤–µ—Ä—Å–∏—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞, –ø–æ–∫—Ä—ã–≤–∞—é—â—É—é 80% use cases. –û—Å—Ç–∞–≤–ª—è–µ—Ç –º–µ—Å—Ç–æ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±–µ–∑ breaking changes –≤ v1.2+.

**–ö–æ–≥–¥–∞ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å?**
–ü–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏. MVP –≤–µ—Ä—Å–∏—è –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –Ω—É–∂–Ω–∞ –¥–ª—è:
- –ê–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –≤—ã–±—Ä–æ—Å–∞–º–∏ (median robust –∫ –≤—ã–±—Ä–æ—Å–∞–º)
- –ì–ª—É–±–æ–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π (shape –º–µ—Ç—Ä–∏–∫–∏)
- –ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏—Ö/–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ü–µ–ª–µ–π (–ø–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ä—Ç–∏–Ω–∞)
