# Zone Metrics Visualization Enhancement

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-07
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-11-07 (—Ä–µ–≤–∏–∑–∏—è 4.1: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –µ–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
**–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–≠—Ç–∞–ø 0)

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è ([05_case_study_zone_consistency.py](../../../research/notebooks/05_case_study_zone_consistency.py)) –±—ã–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —Å–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å MACD bull-–∑–æ–Ω: —Å—Ä–µ–¥–Ω–∏–µ –∞–ø-—Å–≤–∏–Ω–≥–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—è—Ç –¥–∞—É–Ω-—Å–≤–∏–Ω–≥–∏ (p-value 0.0015 < 0.05 –¥–ª—è zigzag —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏). –°–º. –æ—Ç—á–µ—Ç: [macd_zone_consistency_case_study.md](../../../docs/analytics/zones/macd_zone_consistency_case_study.md).

–û–¥–Ω–∞–∫–æ —Ç–µ–∫—É—â–∏–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
1. –í–∏–¥–µ—Ç—å —Å–∞–º–∏ **—Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏** (—Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏, —ç–∫—Å—Ç—Ä–µ–º—É–º—ã) –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
2. –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å **—Å–≤–∏–Ω–≥-–º–µ—Ç—Ä–∏–∫–∏ –∏ —à–µ–π–ø-–º–µ—Ç—Ä–∏–∫–∏** –ø—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∑–æ–Ω—ã
3. –í–∏–¥–µ—Ç—å **–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º** –≤ —Ä–µ–∂–∏–º–µ overview

–≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–æ–Ω.

## –†–µ—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è

### –†–µ–≤–∏–∑–∏—è 4.1 (2025-11-07): –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –µ–¥–∏–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ**: –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ `bquant/visualization/zones.py` –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (`overview`, `detail`, `comparison`) –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–π—Å–æ–≤ —á–µ—Ä–µ–∑ `fig.add_trace(trace, row=N, col=1)`.

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤—ã–≤–æ–¥—ã**:
1. ‚úÖ **–≠—Ç–∞–ø 0 –ø–æ–∫—Ä—ã–≤–∞–µ—Ç 3 —Ä–µ–∂–∏–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏**: –º–µ—Ç–æ–¥—ã `_render_*_overlay()` –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è `detail`, `overview` –∏ `comparison` –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞—Ç—Ä–∞—Ç
2. ‚úÖ **`detail` –∏ `overview` —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ**: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `_integrate_overlay_indicators()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤
3. ‚úÖ **`comparison` –≥–æ—Ç–æ–≤ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"**: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `show_overlay_indicators` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥
4. ‚úÖ **–ù—É–ª–µ–≤–æ–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞**: –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤

**–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**:
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–†–µ–∂–∏–º—ã" –≤ —Ç–∞–±–ª–∏—Ü—É —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç
- –£—Ç–æ—á–Ω–µ–Ω–æ —á—Ç–æ –≠—Ç–∞–ø 0 —Ä–µ–∞–ª–∏–∑—É–µ—Ç overlay –¥–ª—è `detail` + `overview` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª —Å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –º–µ—Ç–æ–¥–æ–º `_integrate_overlay_indicators()`
- –ü–æ–¥—á–µ—Ä–∫–Ω—É—Ç–æ —á—Ç–æ `comparison` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ, –Ω–æ –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≠—Ç–∞–ø–µ 0

### –ò—Å—Ö–æ–¥–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (–≤–µ—Ä—Å–∏—è 4.0)

–ü–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –∞–Ω–∞–ª–∏–∑–∞ –±—ã–ª–∏ –ø—Ä–∏–Ω—è—Ç—ã —Å–ª–µ–¥—É—é—â–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:

1. **Overview —Ä–µ–∂–∏–º**: –ù–µ –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø–æ –∫–∞–∂–¥–æ–π –∑–æ–Ω–µ. –î–æ–±–∞–≤–∏—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –≤—Å–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–º –º–µ—Ç—Ä–∏–∫–∞–º (–ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –ø–∞—Ä–∞–º–µ—Ç—Ä–µ).

2. **Comparison —Ä–µ–∂–∏–º**: –ù–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å ‚Äî —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω—ã–π –¥–ª—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.

3. **Detail —Ä–µ–∂–∏–º**: –†–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–µ–∂–∏–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –¥–ª—è —Å–≤–∏–Ω–≥–æ–≤ –∏ –º–µ—Ç—Ä–∏–∫. –ù–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º `swing_detail`.

4. **–î–≤–æ–π–Ω–æ–π —Ä–∞—Å—á–µ—Ç**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥ ‚Äî –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ features + –ø–µ—Ä–µ—Å—á–µ—Ç on-demand —Å LRU –∫—ç—à–µ–º –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

5. **–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–∏–Ω–≥–æ–≤**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π scatter overlay –¥–ª—è –≤—Å–µ—Ö 3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–π. ZigZag —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä, –Ω–æ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å scatter.

6. **–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –†–∞–∑–¥–µ–ª–∏—Ç—å `show_indicators` –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∑–æ–Ω (`show_zone_detect_indicators`) –∏ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (`show_auxiliary_indicators`). –°–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω—ã –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –ê–Ω–∞–ª–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–î–∞—Ç–∞ –∞–Ω–∞–ª–∏–∑–∞**: 2025-11-07

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

BQuant —É–∂–µ –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤:

**–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞** ([bquant/indicators/base.py](../../../bquant/indicators/base.py)):
```python
class IndicatorFactory:
    """Centralized factory for creating indicators"""
    @classmethod
    def create(cls, source: str, indicator: str, **params) -> BaseIndicator:
        # source: 'preloaded', 'custom', 'talib', 'pandas_ta'
        ...
```

**–ú–µ–Ω–µ–¥–∂–µ—Ä –±–∏–±–ª–∏–æ—Ç–µ–∫** ([bquant/indicators/library/manager.py](../../../bquant/indicators/library/manager.py)):
```python
class LibraryManager:
    @classmethod
    def load_all_libraries(cls) -> Dict[str, int]:
        # Auto-loads pandas-ta and talib

    @classmethod
    def create_indicator(cls, library: str, indicator: str, **params):
        # Creates library-wrapped indicators
```

**–¢–∏–ø—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤**:
- `BaseIndicator` (–∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π)
- `PreloadedIndicator` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ BQuant)
- `CustomIndicator` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ)
- `LibraryIndicator` (–æ–±–µ—Ä—Ç–∫–∏ –¥–ª—è pandas-ta, talib)

**–†–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞**:
```python
@dataclass
class IndicatorResult:
    name: str
    data: pd.DataFrame  # –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã!
    config: Dict
    metadata: Dict
```

### –ö–ª—é—á–µ–≤–æ–µ —Ä–∞–∑–ª–∏—á–∏–µ: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã vs –°–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã**:
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç `IndicatorResult` —Å DataFrame (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã)
- –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º –±–∞—Ä–µ (MACD, RSI, SMA, ...)
- –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –ª–∏–Ω–∏–∏/–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã –Ω–∞ –ø–∞–Ω–µ–ª—è—Ö

**–°–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏**:
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç `SwingMetrics` (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏)
- –î–∏—Å–∫—Ä–µ—Ç–Ω—ã–µ –°–û–ë–´–¢–ò–Ø (—Ç–æ—á–∫–∏ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞)
- –ù–µ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º –±–∞—Ä–µ (—Ç–æ–ª—å–∫–æ –Ω–∞ –ø–∏–∫–∞—Ö/–≤–ø–∞–¥–∏–Ω–∞—Ö)

**–ü—Ä–∏–º–µ—Ä**: ZigZag —Å–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏—è –ò–°–ü–û–õ–¨–ó–£–ï–¢ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä pandas-ta ZigZag:
```python
# –í zigzag.py
from .....indicators import LibraryManager

def _detect_swing_points(self, zone_data):
    zigzag = LibraryManager.create_indicator(
        'pandas_ta', 'zigzag',
        legs=self.legs, deviation=self.deviation
    )
    result = zigzag.calculate(zone_data)
    return result.data['ZZ_X']  # –ë–µ—Ä–µ—Ç Series, –Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏!
```

### –¢–µ–∫—É—â–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ ZoneVisualizer

```python
def plot_zones_on_price_chart(
    price_data,
    zones_data,
    show_indicators=False,  # ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è panel indicators
    indicator_columns=None,
    indicator_chart_types=None,  # {'macd_hist': 'bar', 'rsi': 'line'}
    ...
)
```

**–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤**:
```python
def _detect_indicators_from_features(self, zone, data):
    # –ò—â–µ—Ç –≤:
    # 1. zone['indicator_context']['detection_indicator']
    # 2. zone['features']
    # 3. –ù–µ—è–≤–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á–∏—Å–ª–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏ != OHLCV
```

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è panel –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å)
- ‚ùå –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–Ω–∞ price panel)
- ‚ùå –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è scatter –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (—Ç–æ—á–∫–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫

### –í–∞—Ä–∏–∞–Ω—Ç A: SwingPointsIndicator –æ–±–µ—Ä—Ç–∫–∞ üåü (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
# –ù–æ–≤—ã–π —Ñ–∞–π–ª: bquant/indicators/custom/swing_points.py
from ..base import CustomIndicator, IndicatorResult

class SwingPointsIndicator(CustomIndicator):
    """–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π"""

    def __init__(self, strategy: str = 'zigzag', **strategy_params):
        self.strategy_name = strategy
        self.strategy_params = strategy_params

    def calculate(self, data: pd.DataFrame, **kwargs) -> IndicatorResult:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã: swing_high, swing_low"""

        # –ò–º–ø–æ—Ä—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
        if self.strategy_name == 'zigzag':
            from ...analysis.zones.strategies.swing.zigzag import ZigZagSwingStrategy
            strategy = ZigZagSwingStrategy(**self.strategy_params)
        # ... –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

        # –ü–æ–ª—É—á–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–µ–∫
        swing_points = strategy._detect_swing_points(data)

        # –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä—è–¥—ã
        result_data = pd.DataFrame(index=data.index)
        result_data['swing_high'] = np.nan
        result_data['swing_low'] = np.nan

        for point in swing_points:
            if point['type'] == 'high':
                result_data.loc[point['index'], 'swing_high'] = point['price']
            else:
                result_data.loc[point['index'], 'swing_low'] = point['price']

        return IndicatorResult(
            name='swing_points',
            data=result_data,
            config={'strategy': self.strategy_name, **self.strategy_params},
            metadata={'point_count': len(swing_points)}
        )
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```python
# –î–æ–±–∞–≤–∏—Ç—å –∫–∞–∫ auxiliary indicator –ø—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ
result = (
    analyze_zones(df)
    .with_indicator('custom', 'macd', ...)  # zone detection
    .detect_zones('zero_crossing', indicator_col='macd_hist')
    .with_auxiliary_indicator('custom', 'swing_points', strategy='zigzag', legs=3)
    .analyze()
    .build()
)

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
fig = result.visualize(
    'detail',
    zone_id=5,
    show_zone_detect_indicators=True,  # MACD –Ω–∞ panel
    show_auxiliary_indicators=True      # Swing points –∫–∞–∫ overlay scatter
)
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ ZoneVisualizer**:
```python
def plot_zone_detail(
    self,
    ...
    show_zone_detect_indicators: bool = True,  # –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –∏–∑ show_indicators
    show_auxiliary_indicators: bool = False,   # –ù–û–í–û–ï
    auxiliary_indicator_display: str = 'overlay',  # 'overlay' | 'panel'
    ...
):
    # –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å panel –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (zone detection)
    if show_zone_detect_indicators:
        self._add_detection_indicators(fig, zone, ...)

    # –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å auxiliary –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (swing points)
    if show_auxiliary_indicators:
        aux_indicators = zone.get('auxiliary_indicators', {})
        for name, indicator_data in aux_indicators.items():
            if 'swing_high' in indicator_data.columns:
                # –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫ scatter overlay
                self._add_scatter_overlay(fig, indicator_data, ...)
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ: —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ = –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä = –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä—è–¥
- ‚úÖ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å: –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥—Ä—É–≥–∏–µ auxiliary –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (Fibonacci, support/resistance, ...)
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞: —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å, –æ–±–µ—Ä—Ç–∫–∞ –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç –∏–º —Ä–∞—Å—á–µ—Ç
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å: –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ IndicatorFactory

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è ZoneVisualizer –¥–ª—è overlay scatter –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- ‚ö†Ô∏è +7-10 —á–∞—Å–æ–≤ –∫ –≠—Ç–∞–ø—É 2 (–≤—Å–µ–≥–æ 19-28h)

**–û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç**:
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `SwingPointsIndicator`: 2-3 —á–∞—Å–∞
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `ZoneVisualizer` –¥–ª—è overlay scatter: 3-4 —á–∞—Å–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API (`show_auxiliary_indicators`): 2-3 —á–∞—Å–∞
- **–ò—Ç–æ–≥–æ**: +7-10 —á–∞—Å–æ–≤ –∫ –≠—Ç–∞–ø—É 2

---

### –í–∞—Ä–∏–∞–Ω—Ç B: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `show_swing_points` üöÄ (–ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å –ø—Ä—è–º—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ –≤ ZoneVisualizer –±–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
def plot_zone_detail(
    self,
    ...
    show_swings: bool = False,           # –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏
    swing_strategy: str = 'from_metrics',  # 'from_metrics' | 'zigzag' | 'find_peaks' | 'pivot_points'
    swing_marker_size: int = 10,
    ...
):
    if show_swings:
        # –ò–∑–≤–ª–µ—á—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–∏–∑ swing_metrics –∏–ª–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å)
        swing_points = self._extract_swing_points(zone, window_df, swing_strategy)

        # –î–æ–±–∞–≤–∏—Ç—å scatter overlay
        self._add_swing_overlay(fig, swing_points, ...)
```

**–õ–æ–≥–∏–∫–∞ `_extract_swing_points()`**:
```python
def _extract_swing_points(self, zone, window_df, strategy_override=None):
    # 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ swing_metrics
    if 'coordinates' in zone['features']['metadata'].get('swing_metrics', {}):
        return zone['features']['metadata']['swing_metrics']['coordinates']

    # 2. –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
    strategy_name = strategy_override or zone['features']['metadata']['swing_metrics']['strategy_name']
    strategy_params = zone['features']['metadata']['swing_metrics']['strategy_params']

    # –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å
    strategy = self._create_swing_strategy(strategy_name, strategy_params)
    return strategy.extract_swing_points(window_df)  # –ù–æ–≤—ã–π –ø—É–±–ª–∏—á–Ω—ã–π –º–µ—Ç–æ–¥
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```python
fig = result.visualize(
    'detail',
    zone_id=5,
    show_swings=True,
    swing_strategy='from_metrics'  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏–∑ –º–µ—Ç—Ä–∏–∫
)
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (3-4 —á–∞—Å–∞ –≤–º–µ—Å—Ç–æ 10)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π API
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- ‚úÖ –†–µ—à–∞–µ—Ç –∑–∞–¥–∞—á—É –Ω–∞–ø—Ä—è–º—É—é

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–≤–∏–Ω–≥–æ–≤ (–Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥—Ä—É–≥–∏—Ö overlay)
- ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç IndicatorFactory
- ‚ö†Ô∏è –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –¥—Ä—É–≥–∏—Ö overlay —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (Fibonacci, S/R) –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

**–û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç**:
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `_extract_swing_points()`: 2-3 —á–∞—Å–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è `_add_swing_overlay()`: 2-3 —á–∞—Å–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ API: 1 —á–∞—Å
- **–ò—Ç–æ–≥–æ**: 5-7 —á–∞—Å–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –≠—Ç–∞–ø 1 –∏ 1.5)

---

### –í–∞—Ä–∏–∞–Ω—Ç C: –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ `plot_swing_analysis()` üìä (–ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π)

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è**: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å–≤–∏–Ω–≥–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –ø–∞–Ω–µ–ª–µ–π.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
class ZoneVisualizer:
    def plot_swing_analysis(
        self,
        zone: Union[Dict, ZoneInfo],
        price_data: pd.DataFrame,
        show_amplitudes: bool = True,
        show_durations: bool = True,
        show_distributions: bool = True,
        **kwargs
    ) -> go.Figure:
        """
        –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å–≤–∏–Ω–≥–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∑–æ–Ω—ã.

        –ü–∞–Ω–µ–ª–∏:
        1. Price + swing points overlay
        2. Swing amplitudes (rally/drop)
        3. Swing durations (bars)
        4. Distributions (histograms)
        """
        ...
```

**–ü—Ä–∏–º–µ—Ä –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Panel 1: Price Chart + Swing Points ‚îÇ
‚îÇ (—Å–≤–µ—á–∏ + –º–∞—Ä–∫–µ—Ä—ã + –ª–∏–Ω–∏–∏)            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Panel 2: Swing Amplitudes            ‚îÇ
‚îÇ (bar chart: rally +% vs drop -%)     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Panel 3: Swing Durations             ‚îÇ
‚îÇ (bar chart: rally bars vs drop bars) ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Panel 4: Distribution                ‚îÇ
‚îÇ (histograms: rally %, drop %)        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**:
```python
# –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è —Å–≤–∏–Ω–≥-–∞–Ω–∞–ª–∏–∑–∞
fig = visualizer.plot_swing_analysis(
    zone=result.zones[5],
    price_data=df,
    show_amplitudes=True,
    show_durations=True
)
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è —Å–≤–∏–Ω–≥–æ–≤
- ‚úÖ –ù–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–∂–∏–º—ã (overview, detail, comparison)
- ‚úÖ –ú–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (distributions, correlations)

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –ù–ï —Ä–µ—à–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—É—é –∑–∞–¥–∞—á—É (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ detail —Ä–µ–∂–∏–º–µ)
- ‚ö†Ô∏è –ü–æ—Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ `plot_swing_analysis()` –≤–º–µ—Å—Ç–æ `visualize('detail')`
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ (price panel + swing overlay)
- ‚ö†Ô∏è –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (10-12 —á–∞—Å–æ–≤)

**–û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç**:
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è multi-panel layout: 4-5 —á–∞—Å–æ–≤
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è swing overlay: 2-3 —á–∞—Å–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è amplitude/duration panels: 3-4 —á–∞—Å–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 2 —á–∞—Å–∞
- **–ò—Ç–æ–≥–æ**: 11-14 —á–∞—Å–æ–≤

**–í—ã–≤–æ–¥**: –ü–æ–¥—Ö–æ–¥–∏—Ç –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –Ω–æ –Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç –±–∞–∑–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–û–ë–ù–û–í–õ–ï–ù–û)

**–ü–æ—Å–ª–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ - —ç—Ç–æ –±–∞–∑–æ–≤–∞—è must-have —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ª—é–±–æ–≥–æ –∫–≤–∞–Ω—Ç-–ø–∞–∫–µ—Ç–∞. –ü–æ—ç—Ç–æ–º—É —Ä–µ–∞–ª–∏–∑—É–µ–º –í–∞—Ä–∏–∞–Ω—Ç A —Å –ø–æ–ª–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.

### ‚úÖ –£–¢–í–ï–†–ñ–î–ï–ù–ù–´–ô –ü–õ–ê–ù: –í–∞—Ä–∏–∞–Ω—Ç A (–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞**:
1. **–ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - —ç—Ç–æ —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–ª—è –∫–≤–∞–Ω—Ç-–∞–Ω–∞–ª–∏–∑–∞
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å**: –û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç –ª—é–±—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (SMA, EMA, Bollinger Bands, Fibonacci, S/R, swing points)
3. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è**: –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ —Å—Ç–∞–Ω—É—Ç –ø—Ä–æ—Å—Ç–æ –µ—â–µ –æ–¥–Ω–∏–º —Ç–∏–ø–æ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
4. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –≤—ã–≥–æ–¥–∞**: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –æ–∫—É–ø—è—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö overlay —ç–ª–µ–º–µ–Ω—Ç–æ–≤

### –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç—Ç–∞–ø–æ–≤

**–≠—Ç–∞–ø 0 (–ù–û–í–´–ô): Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** ‚≠ê‚≠ê‚≠ê
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** (must-have)
- –¶–µ–ª—å: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—â—É—é —Å–∏—Å—Ç–µ–º—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–∞ price panel
- –ó–∞—Ç—Ä–∞—Ç—ã: **8-12 —á–∞—Å–æ–≤**

–ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –†–∞—Å—à–∏—Ä–∏—Ç—å `ZoneVisualizer` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: `line`, `scatter`, `area`, `markers`
   - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_overlay_indicator(fig, indicator_data, display_type, row, col)`

2. –†–∞—Å—à–∏—Ä–∏—Ç—å API –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–∞:
   ```python
   def plot_zone_detail(
       ...
       show_indicators: bool = True,              # Panel –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (MACD, RSI)
       show_overlay_indicators: bool = False,     # –ù–û–í–û–ï: Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
       overlay_indicator_columns: List[str] = None,  # –ö–æ–ª–æ–Ω–∫–∏ –¥–ª—è overlay
       overlay_display_types: Dict[str, str] = None, # {'sma_20': 'line', 'swing_high': 'scatter'}
       ...
   )
   ```

3. –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑ –¥–∞–Ω–Ω—ã—Ö:
   ```python
   def _detect_overlay_indicators(self, data, zone_features):
       """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –Ω—É–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫ overlay"""
       # –ò—â–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏: sma_, ema_, bb_, swing_, fib_, sr_
       # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –ø–æ –ø–∞—Ç—Ç–µ—Ä–Ω—É –Ω–∞–∑–≤–∞–Ω–∏—è
       ...
   ```

4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç–∏–ø—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   - **Line**: SMA, EMA, VWAP
   - **Scatter**: Swing points, pivot points
   - **Area**: Bollinger Bands (–≤–µ—Ä—Ö–Ω—è—è/–Ω–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü—ã —Å –∑–∞–ª–∏–≤–∫–æ–π)
   - **Markers**: Support/Resistance levels

**–≠—Ç–∞–ø 1: –ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail —Ä–µ–∂–∏–º–µ**
- –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: 4-6 —á–∞—Å–æ–≤
- –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –≠—Ç–∞–ø–æ–º 0

**–≠—Ç–∞–ø 1.5: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview**
- –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: 3-4 —á–∞—Å–∞

**–≠—Ç–∞–ø 2 (–ü–ï–†–ï–†–ê–ë–û–¢–ê–ù): –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ —á–µ—Ä–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É**
- –¶–µ–ª—å: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ –≠—Ç–∞–ø–∞ 0 –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è swing points
- –ó–∞—Ç—Ä–∞—Ç—ã: **6-8 —á–∞—Å–æ–≤** (–º–µ–Ω—å—à–µ –±–ª–∞–≥–æ–¥–∞—Ä—è –≥–æ—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ!)

–ü–æ–¥–∑–∞–¥–∞—á–∏:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `SwingPointsIndicator` (–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏) - 2-3 —á–∞—Å–∞
2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `extract_swing_points()` –≤ —Å–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ - 1-2 —á–∞—Å–∞
3. –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ `SwingMetrics` - 2-3 —á–∞—Å–∞
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è - 1-2 —á–∞—Å–∞

**–≠—Ç–∞–ø 3 (–ù–û–í–´–ô): –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤**
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –°—Ä–µ–¥–Ω–∏–π (–ø–æ—Å–ª–µ –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
- –¶–µ–ª—å: –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –ó–∞—Ç—Ä–∞—Ç—ã: **4-6 —á–∞—Å–æ–≤**

–ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- ‚úÖ SMA (—É–∂–µ –µ—Å—Ç—å —á–µ—Ä–µ–∑ pandas-ta)
- ‚úÖ EMA (—É–∂–µ –µ—Å—Ç—å —á–µ—Ä–µ–∑ pandas-ta)
- ‚úÖ Bollinger Bands (—É–∂–µ –µ—Å—Ç—å —á–µ—Ä–µ–∑ pandas-ta)
- üÜï Fibonacci retracement (custom)
- üÜï Support/Resistance levels (custom)
- üÜï Pivot Points –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ (custom)

### –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç (–û–ë–ù–û–í–õ–ï–ù–û)

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–∞—Ç—Ä–∞—Ç—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ç–∞—Ç—É—Å |
|------|----------|---------|-----------|--------|
| **0** | **Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | **8-12 —á–∞—Å–æ–≤** | **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** | **–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ** |
| **1** | –ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail | 4-6 —á–∞—Å–æ–≤ | –í—ã—Å–æ–∫–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **1.5** | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview | 3-4 —á–∞—Å–∞ | –°—Ä–µ–¥–Ω–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **2** | –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É | 6-8 —á–∞—Å–æ–≤ | –í—ã—Å–æ–∫–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **3** | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ | 4-6 —á–∞—Å–æ–≤ | –°—Ä–µ–¥–Ω–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **–ò–¢–û–ì–û** | | **25-36 —á–∞—Å–æ–≤** | | |

**–ö–ª—é—á–µ–≤—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- ‚úÖ **–ï–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤**: `_render_*_overlay()` –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –¥–ª—è `detail`, `overview` –∏ `comparison` –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ **–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**: `detail` –∏ `overview` –ø–æ–ª—É—á–∞—é—Ç overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≠—Ç–∞–ø–∞ 0
- ‚úÖ **`comparison` –≥–æ—Ç–æ–≤ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏"**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –µ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ‚úÖ **–ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `_integrate_overlay_indicators()` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ —Ä–µ–∂–∏–º–∞–º–∏

**–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤**:
1. **–≠—Ç–∞–ø 0 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)**: 8-12 —á–∞—Å–æ–≤ - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
2. **–≠—Ç–∞–ø 1 (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)**: 4-6 —á–∞—Å–æ–≤ - –ú–µ—Ç—Ä–∏–∫–∏ –≤ detail (–º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –≠—Ç–∞–ø–æ–º 0)
3. **–≠—Ç–∞–ø 1.5**: 3-4 —á–∞—Å–∞ - –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
4. **–≠—Ç–∞–ø 2**: 6-8 —á–∞—Å–æ–≤ - –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–æ—Ç–æ–≤—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ –≠—Ç–∞–ø–∞ 0)
5. **–≠—Ç–∞–ø 3**: 4-6 —á–∞—Å–æ–≤ - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ–ª–∏–∑ (MVP)**: –≠—Ç–∞–ø 0 + –≠—Ç–∞–ø 1 = **12-18 —á–∞—Å–æ–≤**
**–ü–æ–ª–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: –≠—Ç–∞–ø—ã 0-2 = **21-30 —á–∞—Å–æ–≤**
**–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è**: –≠—Ç–∞–ø—ã 0-3 = **25-36 —á–∞—Å–æ–≤**

## –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –•—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

–ú–µ—Ç—Ä–∏–∫–∏ –∑–æ–Ω —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç—Ä–µ—Ö—É—Ä–æ–≤–Ω–µ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ:

```python
zone.features = {
    'duration': 18,          # –í–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ–∏—á–∏
    'strength': 0.85,
    'metadata': {
        'swing_metrics': {   # SwingMetrics (23 –ø–æ–ª—è)
            'num_swings': 4,
            'rally_count': 3,
            'drop_count': 2,
            'avg_rally_pct': 1.2,
            'avg_drop_pct': 0.8,
            'rally_to_drop_ratio': 1.5,
            'avg_rally_duration_bars': 3.5,
            'avg_drop_duration_bars': 2.1,
            # ... –µ—â–µ 15 –ø–æ–ª–µ–π
            'strategy_name': 'zigzag',
            'strategy_params': {'legs': 3, 'deviation': 0.8}
        },
        'shape_metrics': {   # ShapeMetrics (3 –ø–æ–ª—è)
            'hist_skewness': 0.43,
            'hist_kurtosis': 2.1,
            'hist_smoothness': 0.65,
            'strategy_name': 'macd_shape',
            'strategy_params': {}
        }
    }
}
```

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è**:
- `SwingMetrics`: [bquant/analysis/zones/strategies/base.py:13-169](../../../bquant/analysis/zones/strategies/base.py)
- `ShapeMetrics`: [bquant/analysis/zones/strategies/base.py:268-302](../../../bquant/analysis/zones/strategies/base.py)

### –°–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç 3 –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã—Ö —Ç–æ—á–µ–∫:

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –§–∞–π–ª | –ê–ª–≥–æ—Ä–∏—Ç–º | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã |
|-----------|------|----------|-----------|
| **ZigZag** | [zigzag.py](../../../bquant/analysis/zones/strategies/swing/zigzag.py) | pandas-ta ZigZag | `legs` (3), `deviation` (0.8%) |
| **FindPeaks** | [find_peaks.py](../../../bquant/analysis/zones/strategies/swing/find_peaks.py) | scipy.signal.find_peaks | `prominence` (0.4%), `distance` (3), `min_amplitude_pct` (0.6%) |
| **PivotPoints** | [pivot_points.py](../../../bquant/analysis/zones/strategies/swing/pivot_points.py) | –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π pivot high/low | `left_bars` (2), `right_bars` (2), `min_amplitude_pct` (0.6%) |

**–¢–µ–∫—É—â–∏–µ –ø—Ä–µ—Å–µ—Ç—ã** (`narrow_zone` –¥–ª—è —É–∑–∫–∏—Ö –∑–æ–Ω): [bquant/core/config.py:203-240](../../../bquant/core/config.py)

### –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä

–ö–ª–∞—Å—Å `ZoneVisualizer` ([bquant/visualization/zones.py](../../../bquant/visualization/zones.py)) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã:

```python
result.visualize('overview')     # –í—Å–µ –∑–æ–Ω—ã –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Ü–µ–Ω—ã
result.visualize('detail', zone_id=5, context_bars=20)  # –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –æ–¥–Ω–æ–π –∑–æ–Ω—ã
result.visualize('comparison', max_zones=5)  # –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–æ–Ω
result.visualize('statistics')   # –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
```

**–†–µ–∂–∏–º `detail`** –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç:
- ‚úÖ –°–≤–µ—á–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫ (OHLCV)
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª–∏ (–∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑ `zone.indicator_context`)
- ‚úÖ Volume –ø–∞–Ω–µ–ª—å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- ‚úÖ –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –±–∞—Ä—ã –≤–æ–∫—Ä—É–≥ –∑–æ–Ω—ã
- ‚ùå **–°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏** (—ç–∫—Å—Ç—Ä–µ–º—É–º—ã)
- ‚ùå **–ú–µ—Ç—Ä–∏–∫–∏ –∑–æ–Ω—ã** (swing/shape)

## –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–°–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã—Ö —Ç–æ—á–µ–∫, –Ω–æ **—Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ç–æ–ª—å–∫–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:

```python
# –í zigzag.py
def calculate_swings(self, zone_data: pd.DataFrame) -> SwingMetrics:
    swing_points = self._detect_swing_points(zone_data)  # pd.Series —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∏ —Ü–µ–Ω–∞–º–∏
    return self._calculate_swing_metrics(swing_points, zone_data.index)
    # ‚Üë swing_points —Ç–µ—Ä—è—é—Ç—Å—è –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ –º–µ—Ç–æ–¥–∞
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `SwingMetrics` —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–≥—Ä–µ–≥–∞—Ç—ã (`avg_rally_pct`, `rally_count`), –Ω–æ –Ω–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Ç–æ—á–µ–∫.

### –ü–æ—á–µ–º—É —Ç–∞–∫?

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
- `zone.features` –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ JSON/Parquet
- –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤—Å–µ—Ö —Ç–æ—á–µ–∫ –¥–ª—è –≤—Å–µ—Ö –∑–æ–Ω —É–≤–µ–ª–∏—á–∏–ª–æ –±—ã —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ 5-10 —Ä–∞–∑
- –î–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤

### –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

–î–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ –Ω—É–∂–Ω–æ –ª–∏–±–æ:
1. **–ò–∑–º–µ–Ω–∏—Ç—å –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ `swing_metrics`
2. **–ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å on-demand**: –≤–æ—Å—Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ –Ω–∞ `zone.data`
3. **–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: lazy loading + –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

## –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ `detail` ‚≠ê (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `plot_zone_detail()` –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ –∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–Ω—è—Ç–æ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
def plot_zone_detail(
    self,
    price_data: pd.DataFrame,
    zone: Union[Dict, ZoneInfo],
    context_bars: int = 20,
    # === –ù–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ ===
    show_zone_metrics: bool = True,      # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
    metrics_position: str = 'top-left',  # –ü–æ–∑–∏—Ü–∏—è: 'top-left', 'top-right', 'bottom-left'
    show_swings: bool = False,           # –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ (scatter + –ª–∏–Ω–∏—è)
    swing_marker_size: int = 10,         # –†–∞–∑–º–µ—Ä –º–∞—Ä–∫–µ—Ä–æ–≤ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫
    swing_line_style: str = 'dot',       # –°—Ç–∏–ª—å –ª–∏–Ω–∏–∏: 'solid', 'dot', 'dash'
    # === –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï ===
    show_indicators: bool = True,
    show_volume: bool = True,
    **kwargs
) -> go.Figure:
    ...
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```python
# –≠—Ç–∞–ø 1: –¢–æ–ª—å–∫–æ –º–µ—Ç—Ä–∏–∫–∏
fig = result.visualize(
    'detail',
    zone_id=5,
    context_bars=20,
    show_zone_metrics=True,
    metrics_position='top-left'
)

# –≠—Ç–∞–ø 2: –ú–µ—Ç—Ä–∏–∫–∏ + —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏
fig = result.visualize(
    'detail',
    zone_id=5,
    show_zone_metrics=True,
    show_swings=True,
    swing_marker_size=12
)
```

**–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Zone #42 (bull) ‚Ä¢ 18 bars           ‚îÇ
‚îÇ Strategy: zigzag (legs=3, dev=0.8%) ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ üìä Swing Metrics:                   ‚îÇ
‚îÇ   Swings: 4 (3‚Üë / 2‚Üì)               ‚îÇ
‚îÇ   Avg Rally: +1.2% (3.5 bars)       ‚îÇ
‚îÇ   Avg Drop: -0.8% (2.1 bars)        ‚îÇ
‚îÇ   Rally/Drop Ratio: 1.5x            ‚îÇ
‚îÇ   Max Rally: +2.1% (5 bars)         ‚îÇ
‚îÇ   Duration Symmetry: 1.67           ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ üìà Shape Metrics (MACD hist):       ‚îÇ
‚îÇ   Skewness: +0.43 (right-tailed)    ‚îÇ
‚îÇ   Kurtosis: 2.1 (platykurtic)       ‚îÇ
‚îÇ   Smoothness: 0.65                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ù–µ –ª–æ–º–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π API (–æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)
- ‚úÖ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ ‚Äî `detail` —É–∂–µ –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- ‚úÖ –ú–æ–∂–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º `result.visualize('detail')`

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫
- ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π (–ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –≤—Å–µ—Ö –æ–ø—Ü–∏–π)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π ‚≠ê

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–æ–≤—ã–π —Ä–µ–∂–∏–º `swing_detail` ‚ùå (–û—Ç–∫–ª–æ–Ω–µ–Ω–æ)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥ –∞–Ω–∞–ª–∏–∑ —Å–≤–∏–Ω–≥–æ–≤.

**–†–µ—à–µ–Ω–∏–µ**: –û—Ç–∫–ª–æ–Ω–µ–Ω–æ. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `detail` –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–µ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ—Ç—ã API.

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ —É—Å–ª–æ–∂–Ω–µ–Ω–∏–µ API
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –¢–∞ –∂–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `detail` —Ä–µ–∂–∏–º–∞

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ `overview` –¥–ª—è –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ ‚≠ê (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–µ–∂–∏–º `overview` –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ swing/shape –º–µ—Ç—Ä–∏–∫–∞–º –≤—Å–µ—Ö –∑–æ–Ω (–ù–ï –ø–æ –∫–∞–∂–¥–æ–π –∑–æ–Ω–µ –æ—Ç–¥–µ–ª—å–Ω–æ).

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–Ω—è—Ç–æ –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –í–∞—Ä–∏–∞–Ω—Ç—É 1.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
```python
def plot_zones_on_price_chart(
    ...
    show_aggregate_metrics: bool = False,  # –ü–æ–∫–∞–∑–∞—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
    metrics_position: str = 'top-right',   # –ü–æ–∑–∏—Ü–∏—è –±–ª–æ–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
):
    # –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å swing/shape –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –≤—Å–µ–º –≤–∏–¥–∏–º—ã–º –∑–æ–Ω–∞–º
    aggregated = self._aggregate_zone_metrics(zones, visible_range)

    # –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ –≤ —É–≥–ª—É
    if show_aggregate_metrics:
        self._add_aggregate_metrics_annotation(fig, aggregated, metrics_position)
```

**–ü—Ä–∏–º–µ—Ä –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Overview: 37 bull zones, 35 bear zones          ‚îÇ
‚îÇ Date Range: 2025-06-11 ‚Äî 2025-08-12            ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ üìä Swing Statistics (across all zones):        ‚îÇ
‚îÇ   Avg Rally: +1.18% ¬± 0.45%                    ‚îÇ
‚îÇ   Avg Drop: -0.92% ¬± 0.38%                     ‚îÇ
‚îÇ   Rally/Drop Ratio: 1.28x (median)             ‚îÇ
‚îÇ   Zones with swings: 23/37 (62%)               ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ üìà Shape Statistics (MACD histogram):          ‚îÇ
‚îÇ   Skewness: +0.35 ¬± 0.22 (right-tailed)        ‚îÇ
‚îÇ   Kurtosis: 2.45 ¬± 0.65 (platykurtic)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```python
fig = result.visualize(
    'overview',
    show_aggregate_metrics=True,
    metrics_position='top-right'
)
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ù–µ –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫ (–æ–¥–∏–Ω –±–ª–æ–∫ –Ω–∞ –≤—Å–µ –∑–æ–Ω—ã)
- ‚úÖ –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ –æ–±—â–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞ –∑–æ–Ω
- ‚úÖ –õ–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å (–∞–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ on-demand)

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –Ω–∞–ª–∏—á–∏—è swing/shape –º–µ—Ç—Ä–∏–∫ —Ö–æ—Ç—è –±—ã –≤ —á–∞—Å—Ç–∏ –∑–æ–Ω
- ‚ö†Ô∏è –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–µ (–Ω–æ –º–æ–∂–Ω–æ –∑–∞–∫—ç—à–∏—Ä–æ–≤–∞—Ç—å)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°—Ä–µ–¥–Ω–∏–π (–≠—Ç–∞–ø 1.5 ‚Äî –ø–æ—Å–ª–µ detail, –¥–æ swings)

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ (dashboard-—Å—Ç–∏–ª—å) ‚è∏Ô∏è (–û—Ç–ª–æ–∂–µ–Ω–æ)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –≤ `detail` –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–Ω–µ–ª—å (subplot) —Å —Ç–∞–±–ª–∏—á–Ω—ã–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ–º –º–µ—Ç—Ä–∏–∫.

**–†–µ—à–µ–Ω–∏–µ**: –û—Ç–ª–æ–∂–µ–Ω–æ –¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π.

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –¢–µ–∫—Å—Ç–æ–≤–∞—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –ø—Ä–æ—â–µ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞ –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á. Dashboard-—Å—Ç–∏–ª—å –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –ø–æ–∑–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫

### –ü–æ–¥—Ö–æ–¥ A: –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (–≥–∏–±—Ä–∏–¥–Ω—ã–π) ‚≠ê (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞—Å—à–∏—Ä–∏—Ç—å `SwingMetrics` —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–Ω—è—Ç–æ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ–¥—Ö–æ–¥ —Å fallback –Ω–∞ –ø–µ—Ä–µ—Å—á–µ—Ç.

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ 1**: –†–∞—Å—à–∏—Ä–∏—Ç—å `SwingMetrics.to_dict()`:
```python
# –í base.py
@dataclass
class SwingMetrics:
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è ...

    # –ù–û–í–û–ï (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ)
    _coordinates: Optional[List[Dict[str, Any]]] = field(default=None, repr=False)
    # –§–æ—Ä–º–∞—Ç —Ç–æ—á–∫–∏: {'index': int, 'type': 'high'|'low', 'price': float, 'timestamp': datetime}

def to_dict(self, include_coordinates: bool = False) -> Dict[str, Any]:
    result = {
        'num_swings': self.num_swings,
        # ... –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è ...
    }

    if include_coordinates and self._coordinates:
        result['coordinates'] = self._coordinates  # –ù–û–í–û–ï –ø–æ–ª–µ

    return result
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ 2**: –°–æ—Ö—Ä–∞–Ω—è—Ç—å `_coordinates` –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö:
```python
# –í ZigZagSwingStrategy, FindPeaksSwingStrategy, PivotPointsSwingStrategy
def calculate_swings(self, zone_data: pd.DataFrame) -> SwingMetrics:
    swing_points = self._detect_swing_points(zone_data)

    # –°–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
    coordinates = self._serialize_coordinates(swing_points)

    metrics = self._calculate_swing_metrics(swing_points, zone_data.index)
    metrics._coordinates = coordinates  # –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∫ –æ–±—ä–µ–∫—Ç—É
    return metrics

def _serialize_coordinates(self, swing_points) -> List[Dict]:
    """–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π"""
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (pd.Series –¥–ª—è ZigZag, List –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö)
    ...
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ 3**: –í `ZoneFeatureAnalyzer` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–ª–∞–≥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:
```python
# –í zone_features.py
swing_metrics = self.swing_strategy.calculate(data)

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é False)
save_coords = self.config.get('save_swing_coordinates', False)
metadata['swing_metrics'] = swing_metrics.to_dict(include_coordinates=save_coords)
```

**–ò–∑–º–µ–Ω–µ–Ω–∏–µ 4**: –í –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç:
```python
# –í zones.py
def _extract_swing_points(self, zone: Dict, window_df: pd.DataFrame) -> List[Dict]:
    swing_metrics = zone['features']['metadata'].get('swing_metrics')

    # –ï—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö
    if swing_metrics and 'coordinates' in swing_metrics:
        return swing_metrics['coordinates']

    # –ò–Ω–∞—á–µ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å (fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–ª–∏ save_swing_coordinates=False)
    return self._recalculate_swing_points(swing_metrics, window_df)
```

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è**:
```python
# –ü—Ä–∏ –∞–Ω–∞–ª–∏–∑–µ –∑–æ–Ω –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
result = (
    analyze_zones(df)
    .with_indicator('custom', 'macd', ...)
    .detect_zones('zero_crossing', indicator_col='macd_hist')
    .with_config({'save_swing_coordinates': True})  # –ù–û–í–û–ï
    .analyze(clustering=True)
    .build()
)

# –ó–∞—Ç–µ–º –ø—Ä–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã (–±–µ–∑ –ø–µ—Ä–µ—Å—á–µ—Ç–∞)
fig = result.visualize('detail', zone_id=5, show_swings=True)
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç —Ä–∞–∑–º–µ—Ä vs —Å–∫–æ—Ä–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—Å—Ç–∞—Ä—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è)
- ‚úÖ –ù–µ—Ç –¥–≤–æ–π–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞ –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
- ‚úÖ Fallback –Ω–∞ –ø–µ—Ä–µ—Å—á–µ—Ç –µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä features –µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ (~500 –±–∞–π—Ç –Ω–∞ –∑–æ–Ω—É —Å 10 —Ç–æ—á–∫–∞–º–∏)
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—Å–µ—Ö 3 —Å–≤–∏–Ω–≥-—Å—Ç—Ä–∞—Ç–µ–≥–∏–π

**–û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞**:
- Zigzag –Ω–∞ 100 –±–∞—Ä–∞—Ö: ~10 —Ç–æ—á–µ–∫ √ó 50 –±–∞–π—Ç = 500 –±–∞–π—Ç
- 72 –∑–æ–Ω—ã √ó 500 –±–∞–π—Ç = 36 KB (–ø—Ä–µ–Ω–µ–±—Ä–µ–∂–∏–º–æ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å OHLCV –¥–∞–Ω–Ω—ã–º–∏)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π ‚≠ê (–≠—Ç–∞–ø 2)

---

### –ü–æ–¥—Ö–æ–¥ B: –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å on-demand —Å LRU –∫—ç—à–µ–º (fallback) ‚≠ê (–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∫–∞–∫ fallback)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –ø—Ä–∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ fallback –∫–æ–≥–¥–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ features.

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–Ω—è—Ç–æ –∫–∞–∫ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –ü–æ–¥—Ö–æ–¥—É A (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏).

```python
# –í ZoneVisualizer
def _extract_swing_points(self, zone: Dict, window_df: pd.DataFrame) -> List[Dict]:
    """–ü–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏"""
    swing_metrics = zone['features']['metadata'].get('swing_metrics')
    if not swing_metrics:
        return []

    strategy_name = swing_metrics['strategy_name']
    strategy_params = swing_metrics['strategy_params']

    # –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∑–∞–Ω–æ–≤–æ —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    if strategy_name == 'zigzag':
        from ..analysis.zones.strategies.swing.zigzag import ZigZagSwingStrategy
        strategy = ZigZagSwingStrategy(**strategy_params)
        swing_points = strategy.extract_swing_points(window_df)  # –ù–û–í–´–ô –º–µ—Ç–æ–¥
    elif strategy_name == 'find_peaks':
        from ..analysis.zones.strategies.swing.find_peaks import FindPeaksSwingStrategy
        strategy = FindPeaksSwingStrategy(**strategy_params)
        swing_points = strategy.extract_swing_points(window_df)
    elif strategy_name == 'pivot_points':
        from ..analysis.zones.strategies.swing.pivot_points import PivotPointsSwingStrategy
        strategy = PivotPointsSwingStrategy(**strategy_params)
        swing_points = strategy.extract_swing_points(window_df)
    else:
        return []

    return swing_points
```

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è `_recalculate_swing_points()` —Å –ø—É–±–ª–∏—á–Ω—ã–º –º–µ—Ç–æ–¥–æ–º –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è—Ö**:
```python
# –î–æ–±–∞–≤–∏—Ç—å –≤–æ –≤—Å–µ 3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
def extract_swing_points(self, zone_data: pd.DataFrame) -> List[Dict[str, Any]]:
    """
    Extract swing point coordinates for visualization.

    Returns:
        List of dicts with keys: 'index', 'type', 'price', 'timestamp'

    Note: –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ä–∞—Å—á–µ—Ç –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–∑ calculate_swings(),
    –Ω–æ –±–µ–∑ —Ä–∞—Å—á–µ—Ç–∞ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫ (–±—ã—Å—Ç—Ä–µ–µ).
    """
    swing_points = self._detect_swing_points(zone_data)
    return self._serialize_coordinates(swing_points)
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**: LRU –∫—ç—à –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏:
```python
from functools import lru_cache

@lru_cache(maxsize=128)
def _extract_swing_points_cached(
    self,
    zone_id: int,
    strategy_name: str,
    strategy_params_hash: str,  # frozenset(params.items()) -> hash
    data_hash: int  # hash(window_df.index.min(), window_df.index.max())
) -> Tuple[Dict, ...]:  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º tuple –¥–ª—è hashable
    """–ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫"""
    ...
```

**–ü–ª—é—Å—ã**:
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è —Å—Ç–∞—Ä—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –±–µ–∑ `coordinates`
- ‚úÖ –ù–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–µ—Å–ª–∏ `save_swing_coordinates=False`)
- ‚úÖ LRU –∫—ç—à –∏–∑–±–µ–≥–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (2-3 —á–∞—Å–∞)

**–ú–∏–Ω—É—Å—ã**:
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã)
- ‚ö†Ô∏è –ö—ç—à —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ Python

**–û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**:
- Zigzag –Ω–∞ 100 –±–∞—Ä–∞—Ö: ~10ms –ø–µ—Ä–≤—ã–π —Ä–∞—Å—á–µ—Ç, ~0ms –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ (–∏–∑ LRU –∫—ç—à–∞)
- FindPeaks/PivotPoints: ~5-15ms –ø–µ—Ä–≤—ã–π —Ä–∞—Å—á–µ—Ç

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í—ã—Å–æ–∫–∏–π ‚≠ê (–≠—Ç–∞–ø 2, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –ü–æ–¥—Ö–æ–¥–æ–º A)

---

### –ü–æ–¥—Ö–æ–¥ C: ZigZag –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä overlay üîç (–ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –î–ª—è ZigZag —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å pandas-ta –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞–ø—Ä—è–º—É—é, –¥–æ–±–∞–≤–ª—è—è –µ–≥–æ –∫–∞–∫ –∫–æ–ª–æ–Ω–∫—É –≤ `zone.data` –∏ –æ—Ç–æ–±—Ä–∞–∂–∞—è –Ω–∞ price panel.

**–†–µ—à–µ–Ω–∏–µ**: –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –Ω–æ –Ω–µ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å. Scatter overlay –ø—Ä–æ—â–µ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ.

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**:
- ZigZag —è–≤–ª—è–µ—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º pandas-ta –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω –∫–∞–∫ –∫–æ–ª–æ–Ω–∫–∞
- –ù–û: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª–∏
- –î–ª—è overlay –Ω–∞ price panel –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `overlay_indicators` –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
- FindPeaks –∏ PivotPoints –ù–ï —è–≤–ª—è—é—Ç—Å—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ ‚Üí –Ω—É–∂–µ–Ω scatter overlay –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ
- **–í—ã–≤–æ–¥**: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π scatter overlay –ø—Ä–æ—â–µ –∏ –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ 3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –ù–∏–∑–∫–∏–π (–¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π, –µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)

## –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–û–ë–ù–û–í–õ–ï–ù–û)

### üéØ –≠—Ç–∞–ø 0: Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ ‚≠ê‚≠ê‚≠ê (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** (must-have —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—â—É—é —Å–∏—Å—Ç–µ–º—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–∞ price panel

**–ü—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å —Ä–µ–∂–∏–º–æ–≤**:
- ‚úÖ **`detail` —Ä–µ–∂–∏–º** (`plot_zone_detail()`) - –û–°–ù–û–í–ù–û–ô –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ **`overview` —Ä–µ–∂–∏–º** (`plot_zones_on_price_chart()`) - –†–ï–ê–õ–ò–ó–£–ï–¢–°–Ø –û–î–ù–û–í–†–ï–ú–ï–ù–ù–û (—Ç–∞ –∂–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
- ‚úÖ **`comparison` —Ä–µ–∂–∏–º** (`plot_zones_comparison()`) - –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–û–î–î–ï–†–ñ–ò–í–ê–ï–¢ –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò
  - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞ "–∏–∑ –∫–æ—Ä–æ–±–∫–∏" –±–ª–∞–≥–æ–¥–∞—Ä—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º –º–µ—Ç–æ–¥–∞–º
  - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∞ –∂–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
  - –ù–∞ –≠—Ç–∞–ø–µ 0 –Ω–µ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–æ, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –ú–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∑–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –±–µ–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ö–ª—é—á–µ–≤–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ** [[memory:9824313]]: 

–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ `bquant/visualization/zones.py` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ –≤—Å–µ —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞ (`overview`, `detail`, `comparison`) –∏—Å–ø–æ–ª—å–∑—É—é—Ç **–∏–¥–µ–Ω—Ç–∏—á–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–π—Å–æ–≤ –Ω–∞ `go.Figure`:
- –í—Å–µ –º–µ—Ç–æ–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ (`_create_plotly_zones_on_price`, `_create_plotly_zone_detail`, `_create_plotly_zones_comparison`) –∏—Å–ø–æ–ª—å–∑—É—é—Ç `fig.add_trace(trace, row=N, col=1)` –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞ –ø–∞–Ω–µ–ª–∏
- Price panel –≤—Å–µ–≥–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ `row=1, col=1`
- Indicator panel –Ω–∞ `row=2, col=1`, Volume panel –Ω–∞ `row=3, col=1` (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏)

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º–µ—Ç–æ–¥—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (`_render_line_overlay`, `_render_scatter_overlay`, `_render_area_overlay`, `_render_markers_overlay`) –±—É–¥—É—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö —Ç—Ä—ë—Ö —Ä–µ–∂–∏–º–æ–≤** –±–µ–∑ –∫–∞–∫–∏—Ö-–ª–∏–±–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π. –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã `row` –∏ `col`, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∏–∑ –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –∫–æ–¥–∞.

**–ü–æ–¥–∑–∞–¥–∞—á–∏**:

#### 0.1. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (1-2 —á–∞—Å–∞)

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å 4 –±–∞–∑–æ–≤—ã—Ö —Ç–∏–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:

```python
class OverlayDisplayType(Enum):
    LINE = 'line'          # –õ–∏–Ω–∏–∏: SMA, EMA, VWAP
    SCATTER = 'scatter'    # –¢–æ—á–∫–∏: Swing points, pivot points
    AREA = 'area'          # –û–±–ª–∞—Å—Ç–∏: Bollinger Bands, Keltner Channels
    MARKERS = 'markers'    # –ú–∞—Ä–∫–µ—Ä—ã: S/R levels, Fibonacci levels
```

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞:

```python
@dataclass
class OverlayConfig:
    column: str                    # –ò–º—è –∫–æ–ª–æ–Ω–∫–∏ –≤ –¥–∞–Ω–Ω—ã—Ö
    display_type: OverlayDisplayType
    style: Dict[str, Any]         # –¶–≤–µ—Ç, —Ç–æ–ª—â–∏–Ω–∞, –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å
    name: Optional[str] = None    # –ù–∞–∑–≤–∞–Ω–∏–µ –¥–ª—è –ª–µ–≥–µ–Ω–¥—ã

    # –î–ª—è —Ç–∏–ø–∞ AREA
    upper_column: Optional[str] = None
    lower_column: Optional[str] = None
    fill_color: Optional[str] = None
```

#### 0.2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ API ZoneVisualizer (2-3 —á–∞—Å–∞)

–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `plot_zone_detail()`:

```python
def plot_zone_detail(
    self,
    price_data: pd.DataFrame,
    zone: Union[Dict, ZoneInfo],
    context_bars: int = 20,

    # === –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï ===
    show_indicators: bool = True,      # Panel –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (MACD, RSI)
    show_volume: bool = True,

    # === –ù–û–í–´–ï –î–õ–Ø OVERLAY ===
    show_overlay_indicators: bool = False,
    overlay_configs: Optional[List[OverlayConfig]] = None,  # –Ø–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
    auto_detect_overlays: bool = True,  # –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
    overlay_name_patterns: Optional[Dict[str, str]] = None,  # –ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

    **kwargs
) -> go.Figure:
    ...
```

–ü–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```python
DEFAULT_OVERLAY_PATTERNS = {
    r'^sma_\d+$': 'line',           # sma_20, sma_50
    r'^ema_\d+$': 'line',           # ema_12, ema_26
    r'^bb_(upper|lower)$': 'area',  # bb_upper, bb_lower (–ø–∞—Ä–∞)
    r'^swing_(high|low)$': 'scatter', # swing_high, swing_low
    r'^sr_\d+$': 'markers',         # sr_1, sr_2 (S/R levels)
    r'^fib_\d+$': 'markers',        # fib_0, fib_382, fib_618
}
```

#### 0.3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (3-4 —á–∞—Å–∞)

**–ë–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥**:

```python
def _add_overlay_indicator(
    self,
    fig: go.Figure,
    data: pd.DataFrame,
    config: OverlayConfig,
    row: int,
    col: int
):
    """–î–æ–±–∞–≤–∏—Ç—å overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –≥—Ä–∞—Ñ–∏–∫"""
    if config.display_type == OverlayDisplayType.LINE:
        self._render_line_overlay(fig, data, config, row, col)
    elif config.display_type == OverlayDisplayType.SCATTER:
        self._render_scatter_overlay(fig, data, config, row, col)
    elif config.display_type == OverlayDisplayType.AREA:
        self._render_area_overlay(fig, data, config, row, col)
    elif config.display_type == OverlayDisplayType.MARKERS:
        self._render_markers_overlay(fig, data, config, row, col)
```

**–¢–∏–ø LINE**:

```python
def _render_line_overlay(
    self,
    fig: go.Figure,
    data: pd.DataFrame,
    config: OverlayConfig,
    row: int,
    col: int
):
    """–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞–∫ –ª–∏–Ω–∏—é (SMA, EMA)"""
    fig.add_trace(
        go.Scatter(
            x=data.index,
            y=data[config.column],
            mode='lines',
            name=config.name or config.column,
            line=dict(
                color=config.style.get('color', '#FF6B35'),
                width=config.style.get('width', 1.5),
                dash=config.style.get('dash', 'solid')
            ),
            opacity=config.style.get('opacity', 0.8),
            showlegend=True
        ),
        row=row, col=col
    )
```

**–¢–∏–ø SCATTER**:

```python
def _render_scatter_overlay(
    self,
    fig: go.Figure,
    data: pd.DataFrame,
    config: OverlayConfig,
    row: int,
    col: int
):
    """–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞–∫ scatter —Ç–æ—á–∫–∏ (swing points)"""
    # –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
    mask = data[config.column].notna()

    fig.add_trace(
        go.Scatter(
            x=data.index[mask],
            y=data[config.column][mask],
            mode='markers',
            name=config.name or config.column,
            marker=dict(
                symbol=config.style.get('symbol', 'circle'),
                size=config.style.get('size', 8),
                color=config.style.get('color', '#FF6B35'),
                line=dict(
                    color=config.style.get('line_color', '#FFFFFF'),
                    width=config.style.get('line_width', 1)
                )
            ),
            showlegend=True
        ),
        row=row, col=col
    )
```

**–¢–∏–ø AREA**:

```python
def _render_area_overlay(
    self,
    fig: go.Figure,
    data: pd.DataFrame,
    config: OverlayConfig,
    row: int,
    col: int
):
    """–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞–∫ –æ–±–ª–∞—Å—Ç—å (Bollinger Bands)"""
    # –í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞
    fig.add_trace(
        go.Scatter(
            x=data.index,
            y=data[config.upper_column],
            mode='lines',
            name=f"{config.name or 'BB'} Upper",
            line=dict(color=config.style.get('line_color', '#888'), width=1, dash='dot'),
            showlegend=False
        ),
        row=row, col=col
    )

    # –ù–∏–∂–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ —Å –∑–∞–ª–∏–≤–∫–æ–π
    fig.add_trace(
        go.Scatter(
            x=data.index,
            y=data[config.lower_column],
            mode='lines',
            name=f"{config.name or 'BB'} Lower",
            line=dict(color=config.style.get('line_color', '#888'), width=1, dash='dot'),
            fill='tonexty',
            fillcolor=config.style.get('fill_color', 'rgba(136,136,136,0.1)'),
            showlegend=True
        ),
        row=row, col=col
    )
```

**–¢–∏–ø MARKERS**:

```python
def _render_markers_overlay(
    self,
    fig: go.Figure,
    data: pd.DataFrame,
    config: OverlayConfig,
    row: int,
    col: int
):
    """–û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∫–∞–∫ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ (S/R levels, Fibonacci)"""
    # –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º —á—Ç–æ –≤ –∫–æ–ª–æ–Ω–∫–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å —Ü–µ–Ω—ã
    mask = data[config.column].notna()

    for idx in data.index[mask]:
        level = data.loc[idx, config.column]

        fig.add_hline(
            y=level,
            line=dict(
                color=config.style.get('color', '#FFA500'),
                width=config.style.get('width', 1),
                dash=config.style.get('dash', 'dash')
            ),
            opacity=config.style.get('opacity', 0.6),
            row=row, col=col
        )
```

#### 0.4. –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (1-2 —á–∞—Å–∞)

```python
def _detect_overlay_indicators(
    self,
    data: pd.DataFrame,
    zone_features: Dict,
    patterns: Optional[Dict[str, str]] = None
) -> List[OverlayConfig]:
    """
    –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–∑ –∫–æ–ª–æ–Ω–æ–∫ –¥–∞–Ω–Ω—ã—Ö.

    Returns:
        –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    """
    if patterns is None:
        patterns = DEFAULT_OVERLAY_PATTERNS

    configs = []

    # –ò—Å–∫–ª—é—á–∏—Ç—å OHLCV –∫–æ–ª–æ–Ω–∫–∏
    ohlcv_cols = {'time', 'open', 'high', 'low', 'close', 'volume'}
    candidate_cols = [c for c in data.columns if c.lower() not in ohlcv_cols]

    for col in candidate_cols:
        for pattern, display_type in patterns.items():
            if re.match(pattern, col, re.IGNORECASE):
                # –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è AREA (—Ç—Ä–µ–±—É–µ—Ç –ø–∞—Ä—É –∫–æ–ª–æ–Ω–æ–∫)
                if display_type == 'area' and 'upper' in col:
                    lower_col = col.replace('upper', 'lower')
                    if lower_col in data.columns:
                        configs.append(OverlayConfig(
                            column=col,
                            display_type=OverlayDisplayType.AREA,
                            upper_column=col,
                            lower_column=lower_col,
                            style={'fill_color': 'rgba(100,100,200,0.1)'},
                            name=col.replace('_upper', '')
                        ))
                elif display_type != 'area':
                    configs.append(OverlayConfig(
                        column=col,
                        display_type=OverlayDisplayType(display_type),
                        style=self._get_default_style(display_type),
                        name=col
                    ))
                break

    return configs

def _get_default_style(self, display_type: str) -> Dict[str, Any]:
    """–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∏–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ç–∏–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è"""
    styles = {
        'line': {'color': '#FF6B35', 'width': 1.5, 'opacity': 0.8},
        'scatter': {'symbol': 'circle', 'size': 8, 'color': '#FF6B35'},
        'area': {'fill_color': 'rgba(136,136,136,0.1)', 'line_color': '#888'},
        'markers': {'color': '#FFA500', 'width': 1, 'dash': 'dash', 'opacity': 0.6}
    }
    return styles.get(display_type, {})
```

#### 0.5. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Ä–µ–∂–∏–º—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (2-3 —á–∞—Å–∞)

**–û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** (–ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è `detail` –∏ `overview` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ):

```python
# –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–æ–±–∞–≤–ª–µ–Ω–∏—è overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
# –†–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –±–ª–∞–≥–æ–¥–∞—Ä—è –µ–¥–∏–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

def _integrate_overlay_indicators(self, fig, data, zone_features, show_overlay_indicators, 
                                   overlay_configs, auto_detect_overlays, 
                                   overlay_name_patterns, target_row=1):
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ detail, overview (–∏ –±—É–¥—É—â–µ–º comparison).
    """
    if not show_overlay_indicators:
        return
    
    # 1. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    if overlay_configs is None and auto_detect_overlays:
        overlay_configs = self._detect_overlay_indicators(
            data,
            zone_features,
            overlay_name_patterns
        )
    
    # 2. –î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥—Ä–∞—Ñ–∏–∫
    if overlay_configs:
        for config in overlay_configs:
            try:
                self._add_overlay_indicator(
                    fig,
                    data,
                    config,
                    row=target_row,  # Price panel (–æ–±—ã—á–Ω–æ row=1)
                    col=1
                )
            except Exception as e:
                self.logger.warning(f"Failed to render overlay {config.column}: {e}")
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `_create_plotly_zone_detail()` (detail —Ä–µ–∂–∏–º)**:

```python
def _create_plotly_zone_detail(self, price_window, zone, indicator_data, title, 
                                window_meta, **kwargs):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è figure –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—á–µ–π/–∑–æ–Ω ...

    # –ù–û–í–û–ï: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (–≤—ã–∑–æ–≤ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞)
    self._integrate_overlay_indicators(
        fig=fig,
        data=price_window,
        zone_features=zone.get('features', {}),
        show_overlay_indicators=kwargs.get('show_overlay_indicators', False),
        overlay_configs=kwargs.get('overlay_configs'),
        auto_detect_overlays=kwargs.get('auto_detect_overlays', True),
        overlay_name_patterns=kwargs.get('overlay_name_patterns'),
        target_row=1  # Price panel
    )

    return fig
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `_create_plotly_zones_on_price()` (overview —Ä–µ–∂–∏–º)**:

```python
def _create_plotly_zones_on_price(self, price_data, zones, title, **kwargs):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è figure –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—á–µ–π/–∑–æ–Ω ...

    # –ù–û–í–û–ï: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (—Ç–æ—Ç –∂–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥!)
    self._integrate_overlay_indicators(
        fig=fig,
        data=price_data,
        zone_features={},  # –í overview –Ω–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–æ–Ω—ã
        show_overlay_indicators=kwargs.get('show_overlay_indicators', False),
        overlay_configs=kwargs.get('overlay_configs'),
        auto_detect_overlays=kwargs.get('auto_detect_overlays', True),
        overlay_name_patterns=kwargs.get('overlay_name_patterns'),
        target_row=1  # Price panel
    )

    return fig
```

**–ë—É–¥—É—â–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `_create_plotly_zones_comparison()` (comparison —Ä–µ–∂–∏–º)**:

```python
def _create_plotly_zones_comparison(self, price_window, zone_blocks, title, **kwargs):
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è figure –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—á–µ–π/–∑–æ–Ω ...

    # –ë–£–î–£–©–ï–ï: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (—Ç–æ—Ç –∂–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥!)
    # –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º:
    # self._integrate_overlay_indicators(
    #     fig=fig,
    #     data=price_window,
    #     zone_features={},
    #     show_overlay_indicators=kwargs.get('show_overlay_indicators', False),
    #     overlay_configs=kwargs.get('overlay_configs'),
    #     auto_detect_overlays=kwargs.get('auto_detect_overlays', True),
    #     overlay_name_patterns=kwargs.get('overlay_name_patterns'),
    #     target_row=1
    # )

    return fig
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞**:
- ‚úÖ `detail` –∏ `overview` —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ `comparison` –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ across all visualization modes

**–ó–∞—Ç—Ä–∞—Ç—ã –≠—Ç–∞–ø–∞ 0**: **8-12 —á–∞—Å–æ–≤**
**–†–∏—Å–∫–∏**: –°—Ä–µ–¥–Ω–∏–µ (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –Ω–æ —Ö–æ—Ä–æ—à–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
**–ü–æ–ª—å–∑–∞**: **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø** (–±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–≤–∞–Ω—Ç-–ø–∞–∫–µ—Ç–∞)

---

### üéØ –≠—Ç–∞–ø 1: –ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail —Ä–µ–∂–∏–º–µ (Quick Win)

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ swing/shape –º–µ—Ç—Ä–∏–∫ –≤ —Ä–µ–∂–∏–º–µ `detail` –±–µ–∑ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫.

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å `plot_zone_detail()`:
   ```python
   show_zone_metrics: bool = True
   metrics_position: str = 'top-left'
   ```

2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_format_zone_metrics()`:
   ```python
   def _format_zone_metrics(self, zone: Dict) -> str:
       """–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å swing_metrics –∏ shape_metrics –≤ —á–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç"""
       ...
   ```

3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_metrics_annotation()`:
   ```python
   def _add_metrics_annotation(self, fig: go.Figure, text: str, position: str):
       """–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—É—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫"""
       ...
   ```

4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ-—Å–∫—Ä–∏–ø—Ç `research/notebooks/04_zones_sample.py`:
   ```python
   fig = result.visualize(
       'detail',
       zone_id=5,
       show_zone_metrics=True,
       metrics_position='top-left'
   )
   ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 4-6 —á–∞—Å–æ–≤
**–†–∏—Å–∫–∏**: –ù–∏–∑–∫–∏–µ (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
**–ü–æ–ª—å–∑–∞**: –í—ã—Å–æ–∫–∞—è (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å)

**–ù–µ —Ç—Ä–µ–±—É–µ—Ç** —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫!

---

### üéØ –≠—Ç–∞–ø 1.5: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview —Ä–µ–∂–∏–º–µ

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ swing/shape –º–µ—Ç—Ä–∏–∫–∞–º –≤ —Ä–µ–∂–∏–º–µ `overview`.

**–ó–∞–¥–∞—á–∏**:
1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_aggregate_zone_metrics()` –≤ `ZoneVisualizer`:
   ```python
   def _aggregate_zone_metrics(self, zones: List[Dict], visible_range: Optional[tuple]) -> Dict:
       """–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å swing/shape –º–µ—Ç—Ä–∏–∫–∏ –ø–æ –≤–∏–¥–∏–º—ã–º –∑–æ–Ω–∞–º"""
       # –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ zone.features['metadata']
       # –í—ã—á–∏—Å–ª–∏—Ç—å mean, median, std –¥–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏
       ...
   ```

2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_aggregate_metrics_annotation()`:
   ```python
   def _add_aggregate_metrics_annotation(self, fig: go.Figure, aggregated: Dict, position: str):
       """–î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—É—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é —Å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫"""
       ...
   ```

3. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å `plot_zones_on_price_chart()`:
   ```python
   show_aggregate_metrics: bool = False
   metrics_position: str = 'top-right'
   ```

4. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ-—Å–∫—Ä–∏–ø—Ç:
   ```python
   fig = result.visualize(
       'overview',
       show_aggregate_metrics=True,
       metrics_position='top-right'
   )
   ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 3-4 —á–∞—Å–∞
**–†–∏—Å–∫–∏**: –ù–∏–∑–∫–∏–µ (–∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –º–µ—Ç—Ä–∏–∫)
**–ü–æ–ª—å–∑–∞**: –°—Ä–µ–¥–Ω—è—è (–æ–±–∑–æ—Ä–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –≤—Å–µ—Ö –∑–æ–Ω)

---

### üéØ –≠—Ç–∞–ø 2: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã—Ö —Ç–æ—á–µ–∫ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —Å –≥–∏–±—Ä–∏–¥–Ω—ã–º –ø–æ–¥—Ö–æ–¥–æ–º –∫ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º.

**–ü–æ–¥–∑–∞–¥–∞—á–∏**:

#### 2.1. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ SwingMetrics –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `_coordinates` –≤ `SwingMetrics` (`base.py`)
2. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å `to_dict()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `include_coordinates`
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `_serialize_coordinates()` –≤ –∫–∞–∂–¥—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:
   - ZigZag: –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å pd.Series ‚Üí List[Dict]
   - FindPeaks: List[Dict] ‚Üí List[Dict] (—É–∂–µ –≥–æ—Ç–æ–≤)
   - PivotPoints: List[int] ‚Üí List[Dict]
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω—è—Ç—å `_coordinates` –≤ `calculate_swings()` –≤—Å–µ—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
5. ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å `ZoneFeatureAnalyzer.extract_features()`:
   ```python
   save_coords = self.config.get('save_swing_coordinates', False)
   metadata['swing_metrics'] = swing_metrics.to_dict(include_coordinates=save_coords)
   ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 4-6 —á–∞—Å–æ–≤

#### 2.2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏

6. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å `extract_swing_points()` –≤ –≤—Å–µ 3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏:
   ```python
   def extract_swing_points(self, zone_data: pd.DataFrame) -> List[Dict]:
       """Extract swing point coordinates for visualization"""
       swing_points = self._detect_swing_points(zone_data)
       return self._serialize_coordinates(swing_points)
   ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 1-2 —á–∞—Å–∞

#### 2.3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä–µ

7. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_extract_swing_points()` –≤ `ZoneVisualizer` —Å –ª–æ–≥–∏–∫–æ–π:
   ```python
   def _extract_swing_points(self, zone: Dict, window_df: pd.DataFrame) -> List[Dict]:
       # 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ swing_metrics['coordinates']
       # 2. –ï—Å–ª–∏ –µ—Å—Ç—å - –≤–µ—Ä–Ω—É—Ç—å –∏—Ö
       # 3. –ï—Å–ª–∏ –Ω–µ—Ç - –≤—ã–∑–≤–∞—Ç—å _recalculate_swing_points()
       ...
   ```

8. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_recalculate_swing_points()` —Å LRU –∫—ç—à–µ–º:
   ```python
   @lru_cache(maxsize=128)
   def _extract_swing_points_cached(zone_id, strategy_name, params_hash, data_hash):
       # –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å
       ...
   ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 2-3 —á–∞—Å–∞

#### 2.4. –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è swing overlay

9. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_swing_overlay()`:
   ```python
   def _add_swing_overlay(self, fig: go.Figure, swing_points: List[Dict],
                          row: int, col: int, **style_params):
       # Scatter –¥–ª—è swing highs (red triangle-down)
       # Scatter –¥–ª—è swing lows (green triangle-up)
       # –õ–∏–Ω–∏—è —Å–æ–µ–¥–∏–Ω—è—é—â–∞—è —Ç–æ—á–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è zigzag —ç—Ñ—Ñ–µ–∫—Ç–∞)
       ...
   ```

10. ‚úÖ –†–∞—Å—à–∏—Ä–∏—Ç—å `plot_zone_detail()`:
    ```python
    show_swings: bool = False
    swing_marker_size: int = 10
    swing_line_style: str = 'dot'
    swing_show_labels: bool = False  # –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–º–µ—Ä–∞ —Ç–æ—á–µ–∫
    ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 2-3 —á–∞—Å–∞

#### 2.5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

11. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã:
    - `test_serialize_coordinates_zigzag()`
    - `test_serialize_coordinates_find_peaks()`
    - `test_serialize_coordinates_pivot_points()`
    - `test_extract_swing_points_with_saved_coordinates()`
    - `test_extract_swing_points_with_recalculation()`
    - `test_swing_overlay_rendering()`
    - `test_lru_cache_performance()`

12. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –¥–µ–º–æ-—Å–∫—Ä–∏–ø—Ç `research/notebooks/04_zones_sample.py`:
    ```python
    # –° —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
    result = analyze_zones(df).with_config({'save_swing_coordinates': True}).build()
    fig = result.visualize('detail', zone_id=5, show_swings=True)

    # –ë–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–µ—Ä–µ—Å—á–µ—Ç on-demand)
    result_old = analyze_zones(df).build()  # save_swing_coordinates=False –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    fig_old = result_old.visualize('detail', zone_id=5, show_swings=True)
    ```

**–ó–∞—Ç—Ä–∞—Ç—ã**: 3-4 —á–∞—Å–∞

**–ò—Ç–æ–≥–æ –ø–æ –≠—Ç–∞–ø—É 2**: 12-18 —á–∞—Å–æ–≤
**–†–∏—Å–∫–∏**: –°—Ä–µ–¥–Ω–∏–µ (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å—á–µ—Ç–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å)
**–ü–æ–ª—å–∑–∞**: –û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è (–ø–æ–ª–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–æ–Ω)

**–í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –ì–∏–±—Ä–∏–¥–Ω—ã–π (–ü–æ–¥—Ö–æ–¥ A + –ü–æ–¥—Ö–æ–¥ B fallback) ‚≠ê

---

### üéØ –≠—Ç–∞–ø 3 (–ë—É–¥—É—â–µ–µ): –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

**–û—Ç–ª–æ–∂–µ–Ω–æ** –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏–π. –¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏.

–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:
- Hover tooltips —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–æ–Ω –≤ overview
- Dashboard-–ø–∞–Ω–µ–ª—å —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –≤ detail —Ä–µ–∂–∏–º–µ
- ZigZag –∫–∞–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä overlay (–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞)
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ —Å–ª–æ–µ–≤ —Å–≤–∏–Ω–≥–æ–≤

## –ü—Ä–∏–º–µ—Ä—ã –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 1: –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ –º–µ—Ç—Ä–∏–∫ (–≠—Ç–∞–ø 1)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Zone #42 (bull) ‚Ä¢ 18 bars               ‚îÇ
‚îÇ 2025-06-25 14:00 ‚Üí 2025-06-27 08:00    ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üìä Swing Analysis (zigzag)              ‚îÇ
‚îÇ   Legs: 3 bars, Deviation: 0.8%        ‚îÇ
‚îÇ   ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                     ‚îÇ
‚îÇ   Total Swings: 4                       ‚îÇ
‚îÇ   ‚Üë Rallies: 3  ‚Üì Drops: 2              ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ   Avg Rally: +1.23% (3.5 bars)          ‚îÇ
‚îÇ   Avg Drop: -0.81% (2.1 bars)           ‚îÇ
‚îÇ   Max Rally: +2.15% (5 bars)            ‚îÇ
‚îÇ   Max Drop: -1.42% (3 bars)             ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ   Rally/Drop Ratio: 1.52x               ‚îÇ
‚îÇ   Duration Symmetry: 1.67               ‚îÇ
‚îÇ   Avg Rally Speed: 0.35% per bar        ‚îÇ
‚îÇ                                         ‚îÇ
‚îÇ üìà Shape Analysis (MACD histogram)      ‚îÇ
‚îÇ   Skewness: +0.43 (right-tailed)        ‚îÇ
‚îÇ   Kurtosis: 2.10 (platykurtic)          ‚îÇ
‚îÇ   Smoothness: 0.65                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–º–µ—Ä 2: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ (–≠—Ç–∞–ø 2)

```
Price Chart:
        ‚ñ≤ (swing low)
       /|\
      / | \
     /  |  \‚ñº (swing high)
    /   |   |\
   /    |   | \
  /     |   |  \‚ñ≤
 /      |   |   |\
‚ñº       |   |   | \
(swing  |   |   |  ...
 high)  |   |   |

Legend:
  ‚ñº Swing High (red triangle-down)
  ‚ñ≤ Swing Low (green triangle-up)
  ‚îÄ Swing Line (orange dotted)
```

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ —Å—Å—ã–ª–∫–∏

### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è (–û–ë–ù–û–í–õ–ï–ù–û)

**–≠—Ç–∞–ø 0 (–ù–û–í–´–ô - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)**:
- `bquant/visualization/zones.py` ‚Äî —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
  - `_add_overlay_indicator(fig, indicator_data, display_type, row, col)` ‚Äî –±–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥
  - `_detect_overlay_indicators(data, zone_features)` ‚Äî –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
  - `_render_line_overlay(fig, data, column, row, col, **style)` ‚Äî —Ç–∏–ø 'line'
  - `_render_scatter_overlay(fig, data, column, row, col, **style)` ‚Äî —Ç–∏–ø 'scatter'
  - `_render_area_overlay(fig, data, upper_col, lower_col, row, col, **style)` ‚Äî —Ç–∏–ø 'area'
  - `_render_markers_overlay(fig, data, column, row, col, **style)` ‚Äî —Ç–∏–ø 'markers'
- `research/notebooks/04_zones_sample.py` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
- `tests/visualization/test_overlay_indicators.py` ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è overlay

**–≠—Ç–∞–ø 1**:
- `bquant/visualization/zones.py` ‚Äî —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ `plot_zone_detail()` –¥–ª—è –º–µ—Ç—Ä–∏–∫
- `research/notebooks/04_zones_sample.py` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫

**–≠—Ç–∞–ø 2 (–ü–ï–†–ï–†–ê–ë–û–¢–ê–ù)**:
- `bquant/indicators/custom/swing_points.py` ‚Äî –ù–û–í–´–ô —Ñ–∞–π–ª: `SwingPointsIndicator`
- `bquant/analysis/zones/strategies/swing/zigzag.py` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `extract_swing_points()`
- `bquant/analysis/zones/strategies/swing/find_peaks.py` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `extract_swing_points()`
- `bquant/analysis/zones/strategies/swing/pivot_points.py` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `extract_swing_points()`
- `bquant/analysis/zones/strategies/base.py` ‚Äî —Ä–∞—Å—à–∏—Ä–∏—Ç—å `SwingMetrics` –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- `tests/indicators/test_swing_points_indicator.py` ‚Äî –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

**–≠—Ç–∞–ø 3 (–ù–û–í–´–ô)**:
- `bquant/indicators/custom/fibonacci.py` ‚Äî Fibonacci retracement –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- `bquant/indicators/custom/support_resistance.py` ‚Äî S/R levels –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- `bquant/indicators/custom/pivot_points.py` ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ pivot points –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
- `tests/indicators/test_custom_overlay_indicators.py` ‚Äî —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

### –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [Case Study: MACD Zone Consistency](../../../docs/analytics/zones/macd_zone_consistency_case_study.md)
- [Swing Strategies Analysis](../swing_strategies_analysis.md)
- [Zone Analysis User Guide](../../../docs/user_guide/zone_analysis.md)
- [NotebookSimulator API Reference](../../../docs/api/core/nb.md)

### –°–≤—è–∑–∞–Ω–Ω—ã–µ issues

- [GitHub Issue #XX] Enhanced Zone Detail Visualization (—Å–æ–∑–¥–∞—Ç—å –ø–æ—Å–ª–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)

## –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –†–∏—Å–∫ 1: –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å—á–µ—Ç–∞ (–≠—Ç–∞–ø 2)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–∏ –ø–µ—Ä–µ—Å—á–µ—Ç–µ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ on-demand —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã—Ö –µ—Å–ª–∏:
- –ò–∑–º–µ–Ω–∏–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ –≤ `zone.data`
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –±—ã–ª–∏ –∏–∑–º–µ–Ω–µ–Ω—ã –≤—Ä—É—á–Ω—É—é

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `strategy_params` –∏–∑ `swing_metrics` –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ö—ç—à–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏

### –†–∏—Å–∫ 2: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–≠—Ç–∞–ø 2)

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–µ—Ä–µ—Å—á–µ—Ç —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º.

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@lru_cache` –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ü–µ—Ä–µ—Å—á–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –≤–∏–¥–∏–º–æ–≥–æ –æ–∫–Ω–∞ (`window_df`), –∞ –Ω–µ –≤—Å–µ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞
- –î–ª—è zigzag: —Ç–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –ø–µ—Ä–µ—Å—á–µ—Ç–∞ < 50ms –¥–ª—è 100 –±–∞—Ä–æ–≤

### –†–∏—Å–∫ 3: –ü–µ—Ä–µ–≥—Ä—É–∑–∫–∞ –≥—Ä–∞—Ñ–∏–∫–∞

**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –≤—Å–µ—Ö –æ–ø—Ü–∏–π (`show_zone_metrics=True`, `show_swings=True`, `show_indicators=True`, `show_volume=True`) –≥—Ä–∞—Ñ–∏–∫ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –Ω–µ—á–∏—Ç–∞–µ–º—ã–º.

**–ú–∏—Ç–∏–≥–∞—Ü–∏—è**:
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `metrics_position` –¥–ª—è –≥–∏–±–∫–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å semi-transparent background –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
  ```python
  # –î–ª—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ–±–∑–æ—Ä–∞
  show_zone_metrics=True, show_swings=False

  # –î–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
  show_zone_metrics=True, show_swings=True, show_volume=False
  ```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞ (–û–ë–ù–û–í–õ–ï–ù–û)

### –≠—Ç–∞–ø 0 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã)
- ‚úÖ `plot_zone_detail()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `show_overlay_indicators=True`
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è 4 —Ç–∏–ø–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è: `line`, `scatter`, `area`, `markers`
- ‚úÖ –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏–∑ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ SMA/EMA –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –ª–∏–Ω–∏–∏ –Ω–∞ price panel
- ‚úÖ Bollinger Bands –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ area —Å –∑–∞–ª–∏–≤–∫–æ–π
- ‚úÖ Backward compatibility: —Å—Ç–∞—Ä—ã–µ –≤—ã–∑–æ–≤—ã —Ä–∞–±–æ—Ç–∞—é—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: overlay –¥–ª—è 100 –±–∞—Ä–æ–≤ < 100ms
- ‚úÖ –î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç —Å SMA/EMA —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —Ç–∏–ø—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –≠—Ç–∞–ø 1 (–ú–µ—Ç—Ä–∏–∫–∏ –≤ detail)
- ‚úÖ `plot_zone_detail()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `show_zone_metrics=True`
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è swing_metrics –∏ shape_metrics
- ‚úÖ –î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ Backward compatibility: —Å—Ç–∞—Ä—ã–µ –≤—ã–∑–æ–≤—ã –±–µ–∑ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç

### –≠—Ç–∞–ø 1.5 (–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏)
- ‚úÖ `plot_zones_on_price_chart()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `show_aggregate_metrics=True`
- ‚úÖ –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ –≤—Å–µ–º –∑–æ–Ω–∞–º
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
- ‚úÖ –ù–µ –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫

### –≠—Ç–∞–ø 2 (–°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É)
- ‚úÖ `SwingPointsIndicator` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ IndicatorFactory
- ‚úÖ –í—Å–µ 3 —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏–º–µ—é—Ç –º–µ—Ç–æ–¥ `extract_swing_points()`
- ‚úÖ –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –º–µ—Ö–∞–Ω–∏–∑–º overlay (type='scatter')
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ `SwingMetrics` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ü–µ—Ä–µ—Å—á–µ—Ç –¥–∞–µ—Ç —Ç–µ –∂–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á—Ç–æ –∏ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç (unit-—Ç–µ—Å—Ç—ã)
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–æ–Ω—ã —Å 100 –±–∞—Ä–∞–º–∏ < 500ms
- ‚úÖ –î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç —Å swing points —Ä–∞–±–æ—Ç–∞–µ—Ç

### –≠—Ç–∞–ø 3 (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã)
- ‚úÖ Fibonacci retracement –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Support/Resistance levels –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ Pivot Points –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –í—Å–µ –Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ IndicatorFactory
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞

## –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç (–£–°–¢–ê–†–ï–õ–û - —Å–º. —Ä–∞–∑–¥–µ–ª "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è")

**‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï**: –≠—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ä—ã–π –ø–ª–∞–Ω. –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å–º. –≤ —Ä–∞–∑–¥–µ–ª–µ **"–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–û–ë–ù–û–í–õ–ï–ù–û)"** –≤—ã—à–µ.

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–∞—Ç—Ä–∞—Ç—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ç–∞—Ç—É—Å |
|------|----------|---------|-----------|--------|
| ~~**1**~~ | ~~–ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail~~ | ~~4-6 —á–∞—Å–æ–≤~~ | ~~–í—ã—Å–æ–∫–∏–π~~ | ~~–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ~~ |
| ~~**1.5**~~ | ~~–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview~~ | ~~3-4 —á–∞—Å–∞~~ | ~~–°—Ä–µ–¥–Ω–∏–π~~ | ~~–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ~~ |
| ~~**2**~~ | ~~–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥–æ–≤ + –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ~~ | ~~12-18 —á–∞—Å–æ–≤~~ | ~~–í—ã—Å–æ–∫–∏–π~~ | ~~–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ~~ |
| ~~**3**~~ | ~~–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è~~ | ~~-~~ | ~~–ù–∏–∑–∫–∏–π~~ | ~~–û—Ç–ª–æ–∂–µ–Ω–æ~~ |
| ~~**–ò–¢–û–ì–û**~~ | | ~~**19-28 —á–∞—Å–æ–≤**~~ | | |

**–ù–û–í–ê–Ø –û–¶–ï–ù–ö–ê** (—Å–º. —Ä–∞–∑–¥–µ–ª "–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è (–û–ë–ù–û–í–õ–ï–ù–û)" –≤—ã—à–µ):

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–∞—Ç—Ä–∞—Ç—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°—Ç–∞—Ç—É—Å |
|------|----------|---------|-----------|--------|
| **0** | **Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞** | **8-12 —á–∞—Å–æ–≤** | **–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô** | **–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ** |
| **1** | –ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail | 4-6 —á–∞—Å–æ–≤ | –í—ã—Å–æ–∫–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **1.5** | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview | 3-4 —á–∞—Å–∞ | –°—Ä–µ–¥–Ω–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **2** | –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É | 6-8 —á–∞—Å–æ–≤ | –í—ã—Å–æ–∫–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **3** | –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ | 4-6 —á–∞—Å–æ–≤ | –°—Ä–µ–¥–Ω–∏–π | –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ |
| **–ò–¢–û–ì–û** | | **25-36 —á–∞—Å–æ–≤** | | |

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–û–ë–ù–û–í–õ–ï–ù–û)**:
1. **–≠—Ç–∞–ø 0 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)** ‚Üí –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (8-12 —á–∞—Å–æ–≤)
2. **–≠—Ç–∞–ø 1 (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)** ‚Üí –ú–µ—Ç—Ä–∏–∫–∏ –≤ detail (4-6 —á–∞—Å–æ–≤, –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –≠—Ç–∞–ø–æ–º 0)
3. **–≠—Ç–∞–ø 1.5** ‚Üí –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ overview (3-4 —á–∞—Å–∞)
4. **–≠—Ç–∞–ø 2** ‚Üí –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ –≥–æ—Ç–æ–≤—É—é –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É (6-8 —á–∞—Å–æ–≤)
5. **–≠—Ç–∞–ø 3** ‚Üí –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (4-6 —á–∞—Å–æ–≤, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–†–µ–ª–∏–∑—ã**:
- **MVP (v0.1)**: –≠—Ç–∞–ø 0 + –≠—Ç–∞–ø 1 = 12-18 —á–∞—Å–æ–≤ (overlay –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ + –º–µ—Ç—Ä–∏–∫–∏)
- **v0.2**: + –≠—Ç–∞–ø 1.5 = 15-22 —á–∞—Å–∞ (–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
- **v1.0**: + –≠—Ç–∞–ø 2 = 21-30 —á–∞—Å–æ–≤ (–ø–æ–ª–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫)
- **v1.1**: + –≠—Ç–∞–ø 3 = 25-36 —á–∞—Å–æ–≤ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–û–ë–ù–û–í–õ–ï–ù–û)

1. **‚úÖ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞–Ω–∞**: –î–æ–∫—É–º–µ–Ω—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω –ø–æ—Å–ª–µ –æ–±—Å—É–∂–¥–µ–Ω–∏—è (2025-11-07)
2. **‚úÖ –ê–Ω–∞–ª–∏–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**: –ó–∞–≤–µ—Ä—à–µ–Ω (2025-11-07)
3. **‚úÖ –†–µ—à–µ–Ω–∏–µ –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É**: –ü—Ä–∏–Ω—è—Ç–æ - –í–∞—Ä–∏–∞–Ω—Ç A (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
4. **‚úÖ –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞–Ω–∞**: –ü–ª–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º –Ω–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã (2025-11-07)
5. **‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ issue**: –°–æ–∑–¥–∞—Ç—å GitHub issue –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –≠—Ç–∞–ø–∞ 0
6. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 0 (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)**: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (8-12 —á–∞—Å–æ–≤)
7. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 1 (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ)**: –ú–µ—Ç—Ä–∏–∫–∏ –≤ detail (4-6 —á–∞—Å–æ–≤)
8. **‚è≥ –†–µ–ª–∏–∑ MVP (v0.1)**: Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã + –º–µ—Ç—Ä–∏–∫–∏
9. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 1.5**: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ overview
10. **‚è≥ –†–µ–ª–∏–∑ v0.2**: + –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
11. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 2**: –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ —á–µ—Ä–µ–∑ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é —Å–∏—Å—Ç–µ–º—É
12. **‚è≥ –†–µ–ª–∏–∑ v1.0**: –ü–æ–ª–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫
13. **‚è≥ –†–µ–≤—å—é –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Code review + –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤
14. **‚è≥ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å user guide –∏ API reference
15. **üîÆ –≠—Ç–∞–ø 3 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (Fibonacci, S/R, Pivots)

## –ö–ª—é—á–µ–≤–æ–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

**‚úÖ –£–¢–í–ï–†–ñ–î–ï–ù–û (2025-11-07)**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ - —ç—Ç–æ –±–∞–∑–æ–≤–∞—è must-have —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –∫–≤–∞–Ω—Ç-–ø–∞–∫–µ—Ç–∞.

**–í—ã–±—Ä–∞–Ω –í–∞—Ä–∏–∞–Ω—Ç A** (–∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞) –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∏—á–∏–Ω–∞–º:

1. **–ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**: Overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω—É–∂–Ω—ã –Ω–µ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫, –Ω–æ –∏ –¥–ª—è SMA, EMA, Bollinger Bands –∏ –¥—Ä—É–≥–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –û–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ç–∏–ø—ã –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
3. **–î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–∞—è –≤—ã–≥–æ–¥–∞**: –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –æ–∫—É–ø—è—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö overlay —ç–ª–µ–º–µ–Ω—Ç–æ–≤
4. **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: Must-have —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–∞ –¥–µ–ª–∞—Ç—å—Å—è "–±—ã—Å—Ç—Ä–æ –∏ –≥—Ä—è–∑–Ω–æ"

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≠—Ç–∞–ø–∞ 0**: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô - –±–µ–∑ overlay –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∫–≤–∞–Ω—Ç-–∞–Ω–∞–ª–∏–∑–∞.

---

**–ê–≤—Ç–æ—Ä**: Claude Code
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 4.1
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-07
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-11-07 (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –µ–¥–∏–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏)
