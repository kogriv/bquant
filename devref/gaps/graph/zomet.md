# Zone Metrics Visualization Enhancement

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 2025-11-07
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-11-08 (—Ä–µ–≤–∏–∑–∏—è 5.0: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å gloswing.md)
**–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô

## –ö–æ–Ω—Ç–µ–∫—Å—Ç

–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è ([05_case_study_zone_consistency.py](../../../research/notebooks/05_case_study_zone_consistency.py)) –±—ã–ª–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —Å–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ—Å—Ç—å MACD bull-–∑–æ–Ω: —Å—Ä–µ–¥–Ω–∏–µ –∞–ø-—Å–≤–∏–Ω–≥–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–≤–æ—Å—Ö–æ–¥—è—Ç –¥–∞—É–Ω-—Å–≤–∏–Ω–≥–∏ (p-value 0.0015 < 0.05 –¥–ª—è zigzag —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏). –°–º. –æ—Ç—á–µ—Ç: [macd_zone_consistency_case_study.md](../../../docs/analytics/zones/macd_zone_consistency_case_study.md).

–û–¥–Ω–∞–∫–æ —Ç–µ–∫—É—â–∏–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
1. –í–∏–¥–µ—Ç—å —Å–∞–º–∏ **—Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏** (—Ä–∞–∑–≤–æ—Ä–æ—Ç–Ω—ã–µ —Ç–æ—á–∫–∏, —ç–∫—Å—Ç—Ä–µ–º—É–º—ã) –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
2. –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å **—Å–≤–∏–Ω–≥-–º–µ—Ç—Ä–∏–∫–∏ –∏ —à–µ–π–ø-–º–µ—Ç—Ä–∏–∫–∏** –ø—Ä–∏ –¥–µ—Ç–∞–ª—å–Ω–æ–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ –∑–æ–Ω—ã
3. –í–∏–¥–µ—Ç—å **–∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º** –≤ —Ä–µ–∂–∏–º–µ overview
4. –£–ø—Ä–∞–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –±–ª–æ–∫–æ–º `show_zone_stats` —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞–ª —Å –Ω–æ–≤—ã–º–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –º–µ—Ç—Ä–∏–∫

–≠—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–æ–Ω.

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ó–ê–í–ò–°–ò–ú–û–°–¢–¨**: –î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ —Å–≤–∏–Ω–≥–æ–≤, –æ–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –≤ [gloswing.md](../swing/gloswing.md).

**–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ**: `SwingContext` –∏–∑ gloswing.md —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ (`SwingPoint.timestamp`, `SwingPoint.index`, `SwingPoint.price`, `SwingPoint.swing_type`), —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å:
- ‚ùå –°–æ–∑–¥–∞–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ `SwingPointsIndicator`
- ‚ùå –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ `SwingMetrics`
- ‚ùå –ü–µ—Ä–µ—Å—á—ë—Ç–∞ —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ on-demand —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚ùå –°–ª–æ–∂–Ω–æ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è overlay

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –≠–∫–æ–Ω–æ–º–∏—è **6-11 —á–∞—Å–æ–≤** –Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

| –ò—Å—Ç–æ—á–Ω–∏–∫ | –ö–ª—é—á –≤ `zone` | –§–æ–ª–±—ç–∫ | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|---------------|--------|------------|
| Swing metrics | `zone.features['metadata']['swing_metrics']` | `zone.features.get('swing_metrics')` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª–æ–≤–∞—Ä—å —Å –∫–ª—é—á–∞–º–∏ `avg_rally`, `avg_drop`, `rally_drop_ratio`, `swings_count`, `bull_swings`, `bear_swings` |
| Shape metrics | `zone.features['metadata']['shape_metrics']` | `zone.features.get('shape_metrics')` | –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: `skewness`, `kurtosis`, `mean`, `std` |
| Swing context | `zone.swing_context` | `zone['swing_context']` | `ZoneInfo` —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–æ–ª—å–∫–æ –¥–æ –≤—ã–∑–æ–≤–∞ `_normalize_zone` |
| –ò—Å—Ö–æ–¥–Ω–∞—è –∑–æ–Ω–∞ | `zone` (–æ–±—ä–µ–∫—Ç ZoneInfo) | `zone['original_zone']` | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –º–µ—Ç–æ–¥–∞–º `ZoneInfo` –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ |

- `_normalize_zone` **–¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å** `swing_context` –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–º —Å–ª–æ–≤–∞—Ä–µ (`zone_dict['swing_context'] = zone.swing_context`) –ª–∏–±–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é —Å `ZoneInfo`. –ë–µ–∑ —ç—Ç–æ–≥–æ –≤—ã–∑–æ–≤ `zone.get_zone_swings()` –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.
- `_normalize_zone` —Ç–∞–∫–∂–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `original_zone` —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π `ZoneInfo`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã (`get_zone_swings`, `direction`, –∏ —Ç.–¥.) –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ —Å–ª–æ–≤–∞—Ä–Ω–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–∏.
- –ú–µ—Ç—Ä–∏–∫–∏ –º–æ–≥—É—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ —á–∞—Å—Ç–∏—á–Ω–æ; –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—è–∑–∞–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `dict.get` –∏ –Ω–µ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∫–ª—é—á–∞–º —É—Ä–æ–≤–Ω—è `zone['features']`.
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ –±—ç–∫–µ–Ω–¥–∞ (`plotly`, `matplotlib`). –ö–∞–∂–¥–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç—Ä–µ–±—É–µ—Ç —è–≤–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–∞—Ö.

---

## –£–ø—Ä–æ—â—ë–Ω–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üéØ –≠—Ç–∞–ø 1: –ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail —Ä–µ–∂–∏–º–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô
**–ó–∞—Ç—Ä–∞—Ç—ã**: 4-6 —á–∞—Å–æ–≤
**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ swing/shape –º–µ—Ç—Ä–∏–∫ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ detail

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:

```python
def plot_zone_detail(
    self,
    price_data: pd.DataFrame,
    zone: Union[Dict, ZoneInfo],
    context_bars: int = 20,

    # === –ù–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ ===
    show_zone_metrics: bool = True,       # –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
    metrics_position: str = 'top-left',   # 'top-left', 'top-right', 'bottom-left'

    # === –°–£–©–ï–°–¢–í–£–Æ–©–ò–ï ===
    show_indicators: bool = True,
    show_volume: bool = True,
    **kwargs
) -> go.Figure:
    """
    –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–æ–Ω—ã —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏.

    NEW PARAMS:
        show_zone_metrics: –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å swing/shape –º–µ—Ç—Ä–∏–∫–∏ –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤—É—é –∞–Ω–Ω–æ—Ç–∞—Ü–∏—é
        metrics_position: –ü–æ–∑–∏—Ü–∏—è –±–ª–æ–∫–∞ –º–µ—Ç—Ä–∏–∫ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
    """
    # ... existing code ...

    # –ù–û–í–û–ï: –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
    if show_zone_metrics:
        # zone –º–æ–∂–µ—Ç –±—ã—Ç—å ZoneInfo; —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Å—Ö–æ–¥–Ω—É—é —Å—Å—ã–ª–∫—É
        zone_payload = zone if isinstance(zone, ZoneInfo) else zone.get('original_zone', zone)
        metrics = _extract_zone_metrics(zone_payload)
        if metrics:
            self._add_zone_metrics_annotation(
                fig,
            metrics,
            position=metrics_position,
            row=1, col=1  # Price panel
        )

    return fig
```

**–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Zone #42 (bull) ‚Ä¢ 18 bars           ‚îÇ
‚îÇ Strategy: zigzag (legs=3, dev=0.8%) ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ üìä Swing Metrics:                   ‚îÇ
‚îÇ   Swings: 4 (3‚Üë / 2‚Üì)               ‚îÇ
‚îÇ   Avg Rally: +1.2% (3.5 bars)       ‚îÇ
‚îÇ   Avg Drop: -0.8% (2.1 bars)        ‚îÇ
‚îÇ   Rally/Drop Ratio: 1.5x            ‚îÇ
‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ                   ‚îÇ
‚îÇ üìà Shape Metrics (MACD hist):       ‚îÇ
‚îÇ   Skewness: +0.43 (right-tailed)    ‚îÇ
‚îÇ   Kurtosis: 2.1 (platykurtic)       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü–æ–¥–∑–∞–¥–∞—á–∏**:
1. –†–∞—Å—à–∏—Ä–∏—Ç—å `_normalize_zone()` —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–æ–∫–∏–¥—ã–≤–∞–ª `swing_context` –∏ —Å—Å—ã–ª–∫—É –Ω–∞ –∏—Å—Ö–æ–¥–Ω—ã–π `ZoneInfo` (`original_zone`) ‚Äî 0.5 —á–∞—Å–∞
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_extract_zone_metrics()` c —É—á—ë—Ç–æ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ–æ–ª–±—ç–∫–æ–≤ ‚Äî 1 —á–∞—Å
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_zone_metrics_annotation()` ‚Äî 2 —á–∞—Å–∞
4. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ —á–∏—Ç–∞–µ–º—ã–π —Ç–µ–∫—Å—Ç, –≤–∫–ª—é—á–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é –∑–Ω–∞—á–µ–Ω–∏–π –∏ fallback –Ω–∞ ¬´–¥–∞–Ω–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã¬ª ‚Äî 1 —á–∞—Å
5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç—Ä–∏–∫ (graceful degradation): —Å–∫—Ä—ã–≤–∞—Ç—å –±–ª–æ–∫, –µ—Å–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö; –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è ‚Äî 0.5 —á–∞—Å–∞
6. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã –≤ Plotly –∏ Matplotlib —Ä–µ–∂–∏–º–∞—Ö ‚Äî 1 —á–∞—Å

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –±–ª–æ–∫–∞ `show_zone_stats`**:
- –ï—Å–ª–∏ `show_zone_stats=True`, –∞ `show_zone_metrics=True`, –Ω–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –æ–±—ä–µ–¥–∏–Ω—è—Ç—å—Å—è –≤ –æ–¥–∏–Ω –±–ª–æ–∫ –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ ¬´Type / Duration / Strength¬ª.
- –ü—Ä–∏ `show_zone_metrics=False` –ø–æ–≤–µ–¥–µ–Ω–∏–µ `show_zone_stats` –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞—Ç—å—Å—è –ø—Ä–µ–∂–Ω–∏–º.
- –î–ª—è Matplotlib: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `fig.text` —Å —Ä–∞–º–∫–æ–π, –ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å Plotly-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `metrics_position`.

---

### üéØ –≠—Ç–∞–ø 2: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –°–†–ï–î–ù–ò–ô
**–ó–∞—Ç—Ä–∞—Ç—ã**: 3-4 —á–∞—Å–∞
**–¶–µ–ª—å**: –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –∑–æ–Ω–∞–º –≤ overview —Ä–µ–∂–∏–º–µ

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:

```python
def plot_zones_on_price_chart(
    self,
    ...
    show_aggregate_metrics: bool = False,  # –ü–æ–∫–∞–∑–∞—Ç—å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
    metrics_position: str = 'top-right',   # –ü–æ–∑–∏—Ü–∏—è –±–ª–æ–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    ...
):
    """
    Overview –≤—Å–µ—Ö –∑–æ–Ω —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π.

    NEW PARAMS:
        show_aggregate_metrics: –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤—Å–µ–º –∑–æ–Ω–∞–º
        metrics_position: –ü–æ–∑–∏—Ü–∏—è –±–ª–æ–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    """
    # ... existing code ...

    # –ù–û–í–û–ï: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏
    if show_aggregate_metrics:
        aggregated = self._aggregate_zone_metrics(
            zones,
            include_bear=True,
            metrics=('avg_rally', 'avg_drop', 'rally_drop_ratio', 'swings_count'),
            aggregation_mode='mean_std',
            skip_none=True
        )
        self._add_aggregate_metrics_annotation(
            fig,
            aggregated,
            position=metrics_position,
            row=1, col=1
        )

    return fig
```

**–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Overview: 37 bull zones, 35 bear zones          ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ üìä Swing Statistics (across all zones):        ‚îÇ
‚îÇ   Avg Rally: +1.18% ¬± 0.45%                    ‚îÇ
‚îÇ   Avg Drop: -0.92% ¬± 0.38%                     ‚îÇ
‚îÇ   Rally/Drop Ratio: 1.28x (median)             ‚îÇ
‚îÇ   Zones with swings: 23/37 (62%)               ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ üìà Shape Statistics (MACD histogram):          ‚îÇ
‚îÇ   Skewness: +0.35 ¬± 0.22 (right-tailed)        ‚îÇ
‚îÇ   Kurtosis: 2.45 ¬± 0.65 (platykurtic)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä–∞**:
- –î–ª—è –∫–∞–∂–¥–æ–π –º–µ—Ç—Ä–∏–∫–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º `mean` –∏ `std` –ø–æ –∑–æ–Ω–∞–º —Å –Ω–µ–ø—É—Å—Ç—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ (–µ—Å–ª–∏ `skip_none=True`).
- –î–ª—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è (`rally_drop_ratio`) –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º `median`.
- –ú–µ—Ç—Ä–∏–∫–∞ `swings_count` —Å—É–º–º–∏—Ä—É–µ—Ç—Å—è –ø–æ –∑–æ–Ω–∞–º –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞–∫ `sum`.
- –†–∞–∑–¥–µ–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∑–æ–Ω—ã: `bull` –∏ `bear` –±–ª–æ–∫–∏ –≤—ã–≤–æ–¥—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º `‚Äî`.
- –ü—Ä–∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—á–∞—Å—Ç—å –∑–æ–Ω –±–µ–∑ –º–µ—Ç—Ä–∏–∫) –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä–æ–∫—É `n/a (k –∏–∑ N –∑–æ–Ω)`.
- –í Matplotlib –±–ª–æ–∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ `AnchoredText` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∏–ª—é –≥—Ä–∞—Ñ–∏–∫–∞.

**–ü–æ–¥–∑–∞–¥–∞—á–∏**:
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_aggregate_zone_metrics()` —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ `metrics`, `aggregation_mode`, `skip_none`, `include_bear` ‚Äî 1 —á–∞—Å
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_aggregate_metrics_annotation()` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Plotly –∏ Matplotlib ‚Äî 1.5 —á–∞—Å–∞
3. –ü–æ–∫—Ä—ã—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (—é–Ω–∏—Ç-—Ç–µ—Å—Ç + –ø—Ä–∏–º–µ—Ä) ‚Äî 0.5 —á–∞—Å–∞
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã ‚Äî 1 —á–∞—Å

---

### üéØ –≠—Ç–∞–ø 3: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç gloswing.md)

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç**: –í–´–°–û–ö–ò–ô
**–ó–∞—Ç—Ä–∞—Ç—ã**: 3-4 —á–∞—Å–∞ (–≤–º–µ—Å—Ç–æ 9-15 —á–∞—Å–æ–≤!)
**–¶–µ–ª—å**: –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –∏–∑ `SwingContext` –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å**: –¢—Ä–µ–±—É–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è [gloswing.md](../swing/gloswing.md) –§–∞–∑ 1-4

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:

```python
def plot_zone_detail(
    self,
    data: pd.DataFrame,
    zone: Union[Dict, ZoneInfo],

    # === –ù–û–í–´–ï –ü–ê–†–ê–ú–ï–¢–†–´ ===
    show_swings: bool = False,           # –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏
    swing_marker_size: int = 10,         # –†–∞–∑–º–µ—Ä –º–∞—Ä–∫–µ—Ä–æ–≤
    swing_colors: Dict[str, str] = None, # {'peak': 'red', 'trough': 'green'}

    **kwargs
) -> go.Figure:
    """
    –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–æ–Ω—ã —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∞–º–∏.

    NEW PARAMS:
        show_swings: –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –∏–∑ zone.swing_context
        swing_marker_size: –†–∞–∑–º–µ—Ä –º–∞—Ä–∫–µ—Ä–æ–≤ —Å–≤–∏–Ω–≥–æ–≤
        swing_colors: –¶–≤–µ—Ç–∞ –¥–ª—è peaks –∏ troughs
    """
    # ... existing code ...

    # –ù–û–í–û–ï: –î–æ–±–∞–≤–∏—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
    if show_swings:
        swing_source = zone if isinstance(zone, ZoneInfo) else zone.get('swing_context')
        if swing_source:
            self._add_swing_overlay(
                fig,
                swing_source.get_zone_swings(zone_id=zone.zone_id if isinstance(zone, ZoneInfo) else zone.get('zone_id')),
                row=1, col=1,  # Price panel
                marker_size=swing_marker_size,
                colors=swing_colors
            )

    return fig

def _add_swing_overlay(
    self,
    fig: go.Figure,
    swing_points: List[SwingPoint],  # –ò–∑ gloswing.md
    row: int,
    col: int,
    marker_size: int = 10,
    colors: Dict[str, str] = None
) -> None:
    """
    –î–æ–±–∞–≤–∏—Ç—å —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ –∫–∞–∫ scatter overlay.

    NEW METHOD

    Args:
        fig: Plotly figure
        swing_points: –°–ø–∏—Å–æ–∫ SwingPoint –∏–∑ SwingContext (gloswing.md)
        row, col: –ü–æ–∑–∏—Ü–∏—è subplot
        marker_size: –†–∞–∑–º–µ—Ä –º–∞—Ä–∫–µ—Ä–æ–≤
        colors: –¶–≤–µ—Ç–∞ {'peak': 'red', 'trough': 'green'}
    """
    if colors is None:
        colors = {'peak': 'red', 'trough': 'green'}

    # –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ peaks –∏ troughs
    peaks = [sp for sp in swing_points if sp.swing_type == 'peak']
    troughs = [sp for sp in swing_points if sp.swing_type == 'trough']

    # –î–æ–±–∞–≤–∏—Ç—å peaks
    if peaks:
        fig.add_trace(
            go.Scatter(
                x=[sp.timestamp for sp in peaks],
                y=[sp.price for sp in peaks],
                mode='markers',
                marker=dict(
                    symbol='triangle-down',
                    size=marker_size,
                    color=colors['peak'],
                    line=dict(width=1, color='darkred')
                ),
                name='Swing Peaks',
                hovertemplate='<b>Peak</b><br>Price: %{y:.2f}<extra></extra>'
            ),
            row=row, col=col
        )

    # –î–æ–±–∞–≤–∏—Ç—å troughs
    if troughs:
        fig.add_trace(
            go.Scatter(
                x=[sp.timestamp for sp in troughs],
                y=[sp.price for sp in troughs],
                mode='markers',
                marker=dict(
                    symbol='triangle-up',
                    size=marker_size,
                    color=colors['trough'],
                    line=dict(width=1, color='darkgreen')
                ),
                name='Swing Troughs',
                hovertemplate='<b>Trough</b><br>Price: %{y:.2f}<extra></extra>'
            ),
            row=row, col=col
        )
```

**–ü–æ–¥–¥–µ—Ä–∂–∫–∞ overview —Ä–µ–∂–∏–º–∞**:

```python
def plot_zones_on_price_chart(
    self,
    ...
    show_swings: bool = False,  # –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–≤–∏–Ω–≥–∏
    ...
):
    """
    Overview –≤—Å–µ—Ö –∑–æ–Ω —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Å–≤–∏–Ω–≥-—Ç–æ—á–∫–∞–º–∏.

    NEW PARAMS:
        show_swings: –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–≤–∏–Ω–≥–∏ –∏–∑ SwingContext
    """
    # ... existing code ...

    # –ù–û–í–û–ï: –û—Ç–æ–±—Ä–∞–∑–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–≤–∏–Ω–≥–∏ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã)
    if show_swings and zones:
        swing_context = _resolve_global_swing_context(zones)
        if swing_context:
            visible_swings = [
                sp for sp in swing_context.swing_points
                if data.index[0] <= sp.timestamp <= data.index[-1]
            ]
            self._add_swing_overlay(fig, visible_swings, row=1, col=1)

    return fig
```

**–ü–æ–¥–∑–∞–¥–∞—á–∏**:
1. –û–±–Ω–æ–≤–∏—Ç—å `_normalize_zone()` –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—é –∑–æ–Ω —Ç–∞–∫, —á—Ç–æ–±—ã `ZoneInfo` –∏–ª–∏ `swing_context` –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –ø–æ—Å–ª–µ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ ‚Äî 0.5 —á–∞—Å–∞
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_add_swing_overlay()` —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Plotly –∏ Matplotlib (—á–µ—Ä–µ–∑ `scatter` / `ax.scatter`) ‚Äî 2 —á–∞—Å–∞
3. –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `plot_zone_detail()` –∏ `plot_zones_on_price_chart()` ‚Äî 0.5 —á–∞—Å–∞
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å `_resolve_global_swing_context()` (–±–µ—Ä—ë—Ç –ø–µ—Ä–≤—ã–π –Ω–µ–Ω—É–ª–µ–≤–æ–π `swing_context`, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å) ‚Äî 0.5 —á–∞—Å–∞
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ—Ä—ã, –≤–∫–ª—é—á–∞—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Äî 1 —á–∞—Å

**–ü–æ—á–µ–º—É —Ç–∞–∫ –º–∞–ª–æ –≤—Ä–µ–º–µ–Ω–∏?**
- ‚úÖ SwingPoint —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (timestamp, price, swing_type)
- ‚úÖ `SwingContext.get_zone_swings()` –¥–æ—Å—Ç—É–ø–µ–Ω, –µ—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ `zone_dict`
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—É—é –æ–±—ë—Ä—Ç–∫—É
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏–ª–∏ –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π scatter trace –≤ Plotly –∏ `ax.scatter` –≤ Matplotlib
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –º–∞–ª–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ `_normalize_zone`, —É—á—Ç–µ–Ω–æ –≤ –ø–æ–¥–∑–∞–¥–∞—á–∞—Ö

---

## –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç

| –≠—Ç–∞–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–∞—Ç—Ä–∞—Ç—ã | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ |
|------|----------|---------|-----------|-------------|
| **1** | –ú–µ—Ç—Ä–∏–∫–∏ –≤ Detail | 4-6 —á–∞—Å–æ–≤ | –í–´–°–û–ö–ò–ô | –ù–µ—Ç |
| **2** | –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ Overview | 3-4 —á–∞—Å–∞ | –°–†–ï–î–ù–ò–ô | –≠—Ç–∞–ø 1 |
| **3** | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥-—Ç–æ—á–µ–∫ | 3-4 —á–∞—Å–∞ | –í–´–°–û–ö–ò–ô | **gloswing.md –§–∞–∑—ã 1-4** |
| **–ò–¢–û–ì–û** | | **10-14 —á–∞—Å–æ–≤** | | |

**–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–π –æ—Ü–µ–Ω–∫–æ–π**:
- –ë—ã–ª–æ: 25-36 —á–∞—Å–æ–≤ (—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π)
- –°—Ç–∞–ª–æ: 10-14 —á–∞—Å–æ–≤
- **–≠–∫–æ–Ω–æ–º–∏—è: 15-22 —á–∞—Å–∞** –±–ª–∞–≥–æ–¥–∞—Ä—è `SwingContext` –∏–∑ gloswing.md

---

## –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –í–∞—Ä–∏–∞–Ω—Ç A: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å gloswing.md (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–≠—Ç–∞–ø 1** (zomet) ‚Äî 4-6 —á–∞—Å–æ–≤
   - –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å **–¥–æ** –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è gloswing.md
   - –ú–µ—Ç—Ä–∏–∫–∏ —É–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ —Ç–µ–∫—É—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

2. **–≠—Ç–∞–ø 2** (zomet) ‚Äî 3-4 —á–∞—Å–∞
   - –ú–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å **–¥–æ** –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è gloswing.md
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç SwingContext

3. **gloswing.md –§–∞–∑—ã 1-4** ‚Äî 15-20 —á–∞—Å–æ–≤
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á—ë—Ç–∞ —Å–≤–∏–Ω–≥–æ–≤

4. **–≠—Ç–∞–ø 3** (zomet) ‚Äî 3-4 —á–∞—Å–∞
   - –¢—Ä–µ–±—É–µ—Ç –≥–æ—Ç–æ–≤–æ–≥–æ `SwingContext`
   - –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ scatter overlay

**–ò—Ç–æ–≥–æ**: 25-34 —á–∞—Å–∞ –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ (–º–µ—Ç—Ä–∏–∫–∏ + —Å–≤–∏–Ω–≥–∏)

### –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (–∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π)

1. **gloswing.md –§–∞–∑—ã 1-4** ‚Äî 15-20 —á–∞—Å–æ–≤
2. **zomet –≠—Ç–∞–ø—ã 1-3** ‚Äî 10-14 —á–∞—Å–æ–≤

**–ò—Ç–æ–≥–æ**: 25-34 —á–∞—Å–∞

---

## –ò–∑–º–µ–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã

**–≠—Ç–∞–ø 1**:
- `bquant/visualization/zones.py` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `_add_zone_metrics_annotation()`

**–≠—Ç–∞–ø 2**:
- `bquant/visualization/zones.py` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `_aggregate_zone_metrics()`, `_add_aggregate_metrics_annotation()`

**–≠—Ç–∞–ø 3** (–ø–æ—Å–ª–µ gloswing.md):
- `bquant/visualization/zones.py` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `_add_swing_overlay()`

**–ü—Ä–∏–º–µ—Ä—ã –∏ —Ç–µ—Å—Ç—ã**:
- `research/notebooks/04_zones_sample.py` ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (Plotly –∏ Matplotlib)
- `tests/visualization/test_zone_metrics_display.py` ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤
- `tests/visualization/test_zone_metrics_aggregation.py` ‚Äî —é–Ω–∏—Ç-—Ç–µ—Å—Ç –Ω–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- **[gloswing.md](../swing/gloswing.md)** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Å–≤–∏–Ω–≥–æ–≤ (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ó–ê–í–ò–°–ò–ú–û–°–¢–¨)
- [Case Study: MACD Zone Consistency](../../../docs/analytics/zones/macd_zone_consistency_case_study.md)
- [Zone Analysis User Guide](../../../docs/user_guide/zone_analysis.md)

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

### –≠—Ç–∞–ø 1 (–ú–µ—Ç—Ä–∏–∫–∏ –≤ detail)
- ‚úÖ `plot_zone_detail()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `show_zone_metrics=True`
- ‚úÖ `_normalize_zone()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `swing_context` –∏ `original_zone`
- ‚úÖ –ú–µ—Ç—Ä–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è swing_metrics –∏ shape_metrics
- ‚úÖ Backward compatibility: —Å—Ç–∞—Ä—ã–µ –≤—ã–∑–æ–≤—ã –±–µ–∑ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ë–ª–æ–∫ –º–µ—Ç—Ä–∏–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å `show_zone_stats`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ–∂–∏–º –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏: –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –º–µ—Ç—Ä–∏–∫ –±–ª–æ–∫ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –ø–∏—à–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚úÖ –î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ (Plotly –∏ Matplotlib)

### –≠—Ç–∞–ø 2 (–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏)
- ‚úÖ `plot_zones_on_price_chart()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `show_aggregate_metrics=True`
- ‚úÖ `_aggregate_zone_metrics()` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–µ–∂–∏–º—ã `mean_std`, `median`, `sum`
- ‚úÖ –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ –≤—Å–µ–º –∑–æ–Ω–∞–º, –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è bull/bear
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞ (Plotly –∏ Matplotlib)
- ‚úÖ –ü—Ä–∏ —Å–º–µ—à–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è `n/a (k/N)` –∏ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
- ‚úÖ –ù–µ –∑–∞–≥—Ä–æ–º–æ–∂–¥–∞–µ—Ç –≥—Ä–∞—Ñ–∏–∫

### –≠—Ç–∞–ø 3 (–°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏)
- ‚úÖ `_normalize_zone()` –∏–ª–∏ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç `swing_context`
- ‚úÖ `_add_swing_overlay()` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç SwingPoint –æ–±—ä–µ–∫—Ç—ã (Plotly –∏ Matplotlib)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è `detail` –∏ `overview` —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ Peaks –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫—Ä–∞—Å–Ω—ã–º–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏ –≤–Ω–∏–∑
- ‚úÖ Troughs –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–µ–ª—ë–Ω—ã–º–∏ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞–º–∏ –≤–≤–µ—Ä—Ö
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–æ–Ω—ã —Å 100 —Å–≤–∏–Ω–≥–∞–º–∏ < 100ms
- ‚úÖ –î–µ–º–æ-—Å–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ (–æ–±–∞ –±—ç–∫–µ–Ω–¥–∞)

---

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –ú–µ—Ç—Ä–∏–∫–∏ –≤ detail

```python
result = (
    analyze_zones(df)
    .with_indicator('custom', 'macd', fast_period=12, slow_period=26, signal_period=9)
    .detect_zones('zero_crossing', indicator_col='macd_hist')
    .with_strategies(swing='zigzag')
    .analyze()
    .build()
)

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏
fig = result.visualize(
    'detail',
    zone_id=5,
    show_zone_metrics=True,
    metrics_position='top-left'
)
fig.show()
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –≤ overview

```python
# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∑–æ–Ω —Å –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
fig = result.visualize(
    'overview',
    show_aggregate_metrics=True,
    metrics_position='top-right'
)
fig.show()
```

### –ü—Ä–∏–º–µ—Ä 3: –°–≤–∏–Ω–≥-—Ç–æ—á–∫–∏ (—Ç—Ä–µ–±—É–µ—Ç gloswing.md)

```python
# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Å–≤–∏–Ω–≥–æ–≤ (gloswing.md)
result = (
    analyze_zones(df)
    .with_indicator('custom', 'macd', ...)
    .detect_zones('zero_crossing', indicator_col='macd_hist')
    .with_strategies(swing='zigzag')
    .with_swing_scope('global')  # ‚Üê –ì–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–∞—Å—á—ë—Ç (gloswing.md)
    .analyze()
    .build()
)

# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏ —Å–≤–∏–Ω–≥–∞–º–∏
fig = result.visualize(
    'detail',
    zone_id=5,
    show_zone_metrics=True,
    show_swings=True,           # ‚Üê –ò—Å–ø–æ–ª—å–∑—É–µ—Ç zone.swing_context
    swing_marker_size=12
)
fig.show()

# Overview —Å–æ –≤—Å–µ–º–∏ —Å–≤–∏–Ω–≥–∞–º–∏
fig = result.visualize(
    'overview',
    show_aggregate_metrics=True,
    show_swings=True  # ‚Üê –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–≤–∏–Ω–≥–∏
)
fig.show()
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **‚úÖ –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–ø—Ä–æ—â—ë–Ω–Ω–æ–≥–æ –ø–ª–∞–Ω–∞** (2025-11-08)
2. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 1**: –ú–µ—Ç—Ä–∏–∫–∏ –≤ detail (4-6 —á–∞—Å–æ–≤)
3. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 2**: –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (3-4 —á–∞—Å–∞)
4. **‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ gloswing.md**: –§–∞–∑—ã 1-4 (15-20 —á–∞—Å–æ–≤)
5. **‚è≥ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≠—Ç–∞–ø–∞ 3**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–≤–∏–Ω–≥–æ–≤ (3-4 —á–∞—Å–∞)
6. **‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: Code review + –ø—Ä–∏–º–µ—Ä—ã
7. **‚è≥ –†–µ–ª–∏–∑ v1.0**: –ü–æ–ª–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ —Å–≤–∏–Ω–≥–æ–≤

---

**–ê–≤—Ç–æ—Ä**: Claude Code (—Ä–µ–¥. gpt-5-codex)
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 5.1 (—É—Ç–æ—á–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ UX)
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 2025-11-08

> ASCII-–º–∞–∫–µ—Ç—ã –≤—ã—à–µ ‚Äî –∫–æ–Ω—Ü–µ–ø—Ç—ã –¥–ª—è Plotly. –í Matplotlib —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –¥–æ–ø—É—Å–∫–∞ —Ä–∞–∑–Ω–∏—Ü—ã –≤ –æ—Ç—Å—Ç—É–ø–∞—Ö –∏ —à—Ä–∏—Ñ—Ç–∞—Ö; –≤–∞–∂–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –Ω–∞—Å—ã—â–µ–Ω–Ω–æ—Å—Ç—å, –∞ –Ω–µ –ø–∏–∫—Å–µ–ª—å-–ø–µ—Ä—Ñ–µ–∫—Ç.
