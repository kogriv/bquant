# –ê–Ω–∞–ª–∏–∑ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏—è –¥–ª—è –∑–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–î–∞—Ç–∞:** 2025-10-13  
**–í–æ–ø—Ä–æ—Å:** –ù–∞—Å–∫–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è "–∑–∞—Ç–æ—á–µ–Ω–∞" –ø–æ–¥ MACD? –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ (AO, Bollinger, –∫–∞—Å—Ç–æ–º–Ω—ã—Ö)?

---

## Executive Summary

**–ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç:** üü° **–ß–∞—Å—Ç–∏—á–Ω–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞**

**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ **70-80% –∫–æ–¥–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ** - —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≤–∞–ª–∏–¥–∞—Ü–∏—è, regression
- üü° **20-30% –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ MACD** - ZoneFeatures, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞** –∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–£—Å–∏–ª–∏—è –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏:**
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ (1-2 –¥–Ω—è):** –î–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ —Å—Ö–æ–∂–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (AO, Stochastic)
- **–£–º–µ—Ä–µ–Ω–Ω—ã–µ (3-5 –¥–Ω–µ–π):** –î–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å –¥—Ä—É–≥–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (Bollinger, Ichimoku)
- **–ü–æ–ª–Ω–∞—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è (1-2 –Ω–µ–¥–µ–ª–∏):** –°–æ–∑–¥–∞–Ω–∏–µ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞

---

## 1. –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### 1.1. –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (‚úÖ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é as-is)

#### A. –í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (100% —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã)

| –°—Ç—Ä–∞—Ç–µ–≥–∏—è | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç MACD | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å |
|-----------|---------------------|------------------|
| **SwingStrategy** | ‚ùå –ù–µ—Ç | ‚úÖ 100% - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ OHLC |
| **ShapeStrategy** | ‚ùå –ù–µ—Ç* | ‚úÖ 100% - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º —á–∏—Å–ª–æ–≤—ã–º —Ä—è–¥–æ–º |
| **DivergenceStrategy** | ‚ùå –ù–µ—Ç | ‚úÖ 100% - —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç price —Å –ª—é–±—ã–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º |
| **VolatilityStrategy** | ‚ùå –ù–µ—Ç | ‚úÖ 100% - Bollinger + ATR –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã |
| **VolumeStrategy** | ‚ùå –ù–µ—Ç | ‚úÖ 100% - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å volume –∫–æ–ª–æ–Ω–∫–æ–π |

\* *ShapeStrategy —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç skewness/kurtosis –¥–ª—è –∫–æ–ª–æ–Ω–∫–∏, –∫–æ—Ç–æ—Ä—É—é –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ*

**–í—ã–≤–æ–¥:** –í—Å–µ 8 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –ª—é–±—ã–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π!

#### B. –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ (95% —É–Ω–∏–≤–µ—Ä—Å–∞–ª–µ–Ω)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç MACD | –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π |
|-----------|---------------------|-------------------|
| **HypothesisTestSuite** | üü° –ß–∞—Å—Ç–∏—á–Ω–∞—è | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ |
| - H1 (Duration) | ‚ùå –ù–µ—Ç | ‚úÖ –ì–æ—Ç–æ–≤ |
| - H3 (Bull/Bear Asymmetry) | ‚ùå –ù–µ—Ç | ‚úÖ –ì–æ—Ç–æ–≤ |
| - H4 (Correlation-Drawdown) | üü° –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `correlation_price_hist` | üîß –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª–µ |
| - ADF (Stationarity) | ‚ùå –ù–µ—Ç | ‚úÖ –ì–æ—Ç–æ–≤ |
| - H5 (S/R Levels) | ‚ùå –ù–µ—Ç | ‚úÖ –ì–æ—Ç–æ–≤ |

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è H4:** –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª–µ `correlation_price_hist` ‚Üí `correlation_price_indicator`

#### C. –†–µ–≥—Ä–µ—Å—Å–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (100% —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å |
|-----------|-----------------|
| **ZoneRegressionAnalyzer** | ‚úÖ 100% - —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ |
| **ValidationSuite** | ‚úÖ 100% - –∞–≥–Ω–æ—Å—Ç–∏—á–µ–Ω –∫ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö |

#### D. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è (90% —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã)

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç MACD | –¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π |
|-----------|---------------------|-------------------|
| **ZoneSequenceAnalyzer** | üü° –ß–∞—Å—Ç–∏—á–Ω–∞—è | –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ |
| - `analyze_zone_transitions()` | ‚ùå –ù–µ—Ç | ‚úÖ –ì–æ—Ç–æ–≤ |
| - `cluster_zones()` | üü° Default features list –≤–∫–ª—é—á–∞–µ—Ç MACD | üîß –°–¥–µ–ª–∞—Ç—å configurable |

**–¢–µ–∫—É—â–∏–π –∫–æ–¥ (`cluster_zones()`):**
```python
if features_to_use is None:
    features_to_use = [
        'duration', 'macd_amplitude', 'hist_amplitude',  # ‚Üê MACD-specific
        'price_range_pct', 'correlation_price_hist'      # ‚Üê MACD-specific
    ]
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å `features_to_use` –∏–∑–≤–Ω–µ –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ config.

---

### 1.2. MACD-–∑–∞–≤–∏—Å–∏–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ç—Ä–µ–±—É—é—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)

#### A. ZoneFeatures dataclass (üü° —á–∞—Å—Ç–∏—á–Ω–æ MACD-specific)

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –ø–æ–ª—è (4 –∏–∑ 18):**

```python
@dataclass
class ZoneFeatures:
    # === –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ï –ü–û–õ–Ø (14) ===
    zone_id: str                           # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    zone_type: str                         # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    duration: int                          # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    start_price: float                     # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    end_price: float                       # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    price_return: float                    # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    price_range_pct: float                 # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    atr_normalized_return: Optional[float] # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    num_peaks: Optional[int]               # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    num_troughs: Optional[int]             # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    drawdown_from_peak: Optional[float]    # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    rally_from_trough: Optional[float]     # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    peak_time_ratio: Optional[float]       # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    trough_time_ratio: Optional[float]     # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    
    # === MACD-–°–ü–ï–¶–ò–§–ò–ß–ù–´–ï –ü–û–õ–Ø (4) ===
    macd_amplitude: float                  # üî¥ MACD-specific
    hist_amplitude: float                  # üî¥ MACD-specific
    correlation_price_hist: Optional[float]# üî¥ MACD-specific (–Ω–∞–∑–≤–∞–Ω–∏–µ)
    hist_slope: Optional[float]            # üî¥ MACD-specific (–Ω–∞–∑–≤–∞–Ω–∏–µ)
    
    metadata: Dict[str, Any]               # ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
```

**–ü—Ä–æ–±–ª–µ–º–∞:** 4 –ø–æ–ª—è –∂–µ—Å—Ç–∫–æ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ MACD.

#### B. ZoneFeaturesAnalyzer.extract_zone_features() (üü° —á–∞—Å—Ç–∏—á–Ω–æ MACD-specific)

**–ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏:**

```python
def extract_zone_features(self, zone_info: Dict[str, Any]) -> ZoneFeatures:
    data = zone_info['data']
    
    # === MACD-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–¥ ===
    max_macd = float(data['macd'].max())                    # –¢—Ä–µ–±—É–µ—Ç 'macd' –∫–æ–ª–æ–Ω–∫—É
    min_macd = float(data['macd'].min())
    macd_amplitude = max_macd - min_macd
    
    max_hist = float(data['macd_hist'].max())               # –¢—Ä–µ–±—É–µ—Ç 'macd_hist' –∫–æ–ª–æ–Ω–∫—É
    min_hist = float(data['macd_hist'].min())
    hist_amplitude = max_hist - min_hist
    
    hist_slope = float(data['macd_hist'].diff().abs().max()) # –¢—Ä–µ–±—É–µ—Ç 'macd_hist' –∫–æ–ª–æ–Ω–∫—É
    
    # –ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è —Ü–µ–Ω—ã –∏ –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã
    correlation_price_hist = data['close'].corr(data['macd_hist'])  # –¢—Ä–µ–±—É–µ—Ç 'macd_hist'
    
    # === –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–¥ (–æ—Å—Ç–∞–ª—å–Ω–æ–µ) ===
    # –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å OHLCV –∏ ATR
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Hardcoded —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–ª–æ–Ω–∫–∏ `'macd'` –∏ `'macd_hist'`.

#### C. MACDZoneAnalyzer (üî¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é MACD-specific)

–≠—Ç–æ—Ç –∫–ª–∞—Å—Å **—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω –¥–ª—è MACD** –∏ —è–≤–ª—è–µ—Ç—Å—è:
- Facade –Ω–∞–¥ –º–æ–¥—É–ª—å–Ω—ã–º–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞–º–∏
- Zone detector –¥–ª—è MACD –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–º —Å–ª–æ–µ–º

**–†–æ–ª—å:** –ê–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –∫–ª–∞—Å—Å –Ω—É–∂–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ (AOZoneAnalyzer, BollingerZoneAnalyzer, etc.)

---

## 2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–±—ã—Å—Ç—Ä–æ, –¥–ª—è 1-2 –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)

**–£—Å–∏–ª–∏—è:** 1-2 –¥–Ω—è  
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** AO, Stochastic, CCI, Williams %R

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

**1. –°–¥–µ–ª–∞—Ç—å ZoneFeatures –≥–∏–±–∫–∏–º (Option A: Simple)**

```python
@dataclass
class ZoneFeatures:
    # –ë–∞–∑–æ–≤—ã–µ (–≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å)
    zone_id: str
    zone_type: str
    duration: int
    start_price: float
    end_price: float
    price_return: float
    
    # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (Optional, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å)
    indicator_amplitude: Optional[float] = None      # –±—ã–ª–æ: macd_amplitude
    signal_amplitude: Optional[float] = None         # –±—ã–ª–æ: hist_amplitude
    correlation_price_indicator: Optional[float] = None  # –±—ã–ª–æ: correlation_price_hist
    signal_slope: Optional[float] = None             # –±—ã–ª–æ: hist_slope
    
    # –û—Å—Ç–∞–ª—å–Ω–æ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
    ...
```

**2. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –≤ ZoneFeaturesAnalyzer**

```python
class ZoneFeaturesAnalyzer(BaseAnalyzer):
    def __init__(self, 
                 min_duration: int = 2,
                 min_amplitude: float = 0.001,
                 # NEW: Configurable columns
                 indicator_col: str = 'macd',        # –∫–∞–∫—É—é –∫–æ–ª–æ–Ω–∫—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∞–º–ø–ª–∏—Ç—É–¥—ã
                 signal_col: str = 'macd_hist',      # –∫–∞–∫—É—é –∫–æ–ª–æ–Ω–∫—É –¥–ª—è signal/hist
                 # ... –æ—Å—Ç–∞–ª—å–Ω–æ–µ
                 ):
        self.indicator_col = indicator_col
        self.signal_col = signal_col
```

**3. –û–±–Ω–æ–≤–∏—Ç—å extract_zone_features()**

```python
def extract_zone_features(self, zone_info):
    data = zone_info['data']
    
    # –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –∫–æ–ª–æ–Ω–∫–∏
    if self.indicator_col in data.columns:
        max_ind = float(data[self.indicator_col].max())
        min_ind = float(data[self.indicator_col].min())
        indicator_amplitude = max_ind - min_ind
    else:
        indicator_amplitude = None
    
    if self.signal_col in data.columns:
        max_sig = float(data[self.signal_col].max())
        min_sig = float(data[self.signal_col].min())
        signal_amplitude = max_sig - min_sig
        signal_slope = float(data[self.signal_col].diff().abs().max())
        correlation_price_indicator = data['close'].corr(data[self.signal_col])
    else:
        signal_amplitude = None
        signal_slope = None
        correlation_price_indicator = None
```

**4. –°–æ–∑–¥–∞—Ç—å AOZoneAnalyzer (by analogy with MACDZoneAnalyzer)**

```python
class AOZoneAnalyzer:
    """–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∑–æ–Ω Awesome Oscillator."""
    
    def calculate_ao_with_atr(self, df):
        # –†–∞—Å—á–µ—Ç AO –∏ ATR
        pass
    
    def identify_zones(self, df):
        # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω –ø–æ –∑–Ω–∞–∫—É AO (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ MACD)
        pass
    
    def analyze_complete_modular(self, df):
        # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç ZoneFeaturesAnalyzer —Å indicator_col='ao', signal_col='ao'
        features_analyzer = ZoneFeaturesAnalyzer(
            indicator_col='ao',
            signal_col='ao'  # AO –Ω–µ –∏–º–µ–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–∞–º AO
        )
        # ... –æ—Å—Ç–∞–ª—å–Ω–æ–µ –∫–∞–∫ –≤ MACDZoneAnalyzer
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —Å–æ —Å—Ö–æ–∂–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π (–æ—Å—Ü–∏–ª–ª—è—Ç–æ—Ä—ã).

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –°—Ä–µ–¥–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ, –¥–ª—è –ª—é–±—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)

**–£—Å–∏–ª–∏—è:** 3-5 –¥–Ω–µ–π  
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** –õ—é–±—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è:

**1. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å BaseZoneFeatures**

```python
@dataclass
class BaseZoneFeatures:
    """–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∑–æ–Ω—ã (–Ω–µ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞)."""
    zone_id: str
    zone_type: str
    duration: int
    start_price: float
    end_price: float
    price_return: float
    price_range_pct: float
    atr_normalized_return: Optional[float] = None
    num_peaks: Optional[int] = None
    num_troughs: Optional[int] = None
    drawdown_from_peak: Optional[float] = None
    rally_from_trough: Optional[float] = None
    peak_time_ratio: Optional[float] = None
    trough_time_ratio: Optional[float] = None
    metadata: Dict[str, Any] = None


@dataclass
class IndicatorZoneFeatures(BaseZoneFeatures):
    """–ü—Ä–∏–∑–Ω–∞–∫–∏ –∑–æ–Ω—ã —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞."""
    indicator_amplitude: Optional[float] = None
    signal_amplitude: Optional[float] = None
    correlation_price_indicator: Optional[float] = None
    signal_slope: Optional[float] = None


# Backward compatibility alias
ZoneFeatures = IndicatorZoneFeatures
```

**2. –°–æ–∑–¥–∞—Ç—å BaseZoneAnalyzer**

```python
class BaseZoneAnalyzer:
    """
    –ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∑–æ–Ω –¥–ª—è –ª—é–±–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞.
    
    –ü–æ–¥–∫–ª–∞—Å—Å—ã –¥–æ–ª–∂–Ω—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:
    - calculate_indicator(df) -> df with indicator columns
    - identify_zones(df) -> List[ZoneInfo]
    - get_indicator_config() -> dict with column names
    """
    
    def __init__(self, indicator_params=None, zone_params=None):
        self.indicator_params = indicator_params or {}
        self.zone_params = zone_params or {}
        self.indicator_config = self.get_indicator_config()
    
    @abstractmethod
    def calculate_indicator(self, df: pd.DataFrame) -> pd.DataFrame:
        """–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫–∏."""
        pass
    
    @abstractmethod
    def identify_zones(self, df: pd.DataFrame) -> List[ZoneInfo]:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–æ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞."""
        pass
    
    @abstractmethod
    def get_indicator_config(self) -> Dict[str, str]:
        """
        –í–µ—Ä–Ω—É—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∫–æ–ª–æ–Ω–æ–∫ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞.
        
        Returns:
            {
                'indicator_col': 'name_of_main_indicator_column',
                'signal_col': 'name_of_signal_column',  # optional
                'required_cols': ['col1', 'col2']       # –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
            }
        """
        pass
    
    def analyze_complete_modular(self, df, perform_clustering=True, n_clusters=3):
        """–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –∞–Ω–∞–ª–∏–∑–∞ (–æ–¥–∏–Ω–∞–∫–æ–≤ –¥–ª—è –≤—Å–µ—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤)."""
        # 1. –†–∞—Å—á–µ—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        df_with_indicator = self.calculate_indicator(df)
        
        # 2. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω
        zones = self.identify_zones(df_with_indicator)
        
        # 3. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —á–µ—Ä–µ–∑ ZoneFeaturesAnalyzer
        features_analyzer = ZoneFeaturesAnalyzer(
            indicator_col=self.indicator_config['indicator_col'],
            signal_col=self.indicator_config.get('signal_col'),
            **self.zone_params
        )
        
        zones_features = []
        for zone in zones:
            zone_dict = self._zone_to_dict(zone)
            features = features_analyzer.extract_zone_features(zone_dict)
            zones_features.append(features)
        
        # 4-7. –û—Å—Ç–∞–ª—å–Ω–æ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
        # - HypothesisTestSuite
        # - ZoneSequenceAnalyzer
        # - ZoneRegressionAnalyzer
        # - ValidationSuite
        
        return ZoneAnalysisResult(...)
```

**3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã**

```python
class MACDZoneAnalyzer(BaseZoneAnalyzer):
    def get_indicator_config(self):
        return {
            'indicator_col': 'macd',
            'signal_col': 'macd_hist',
            'required_cols': ['macd', 'signal', 'macd_hist']
        }
    
    def calculate_indicator(self, df):
        # Existing implementation
        return self.calculate_macd_with_atr(df)
    
    def identify_zones(self, df):
        # Existing implementation
        return self.identify_zones(df)


class AOZoneAnalyzer(BaseZoneAnalyzer):
    def get_indicator_config(self):
        return {
            'indicator_col': 'ao',
            'signal_col': 'ao',  # AO —Å–∞–º —Å–µ–±–µ —Å–∏–≥–Ω–∞–ª
            'required_cols': ['ao']
        }
    
    def calculate_indicator(self, df):
        # –†–∞—Å—á–µ—Ç AO = SMA(median_price, 5) - SMA(median_price, 34)
        median_price = (df['high'] + df['low']) / 2
        df['ao'] = median_price.rolling(5).mean() - median_price.rolling(34).mean()
        return df
    
    def identify_zones(self, df):
        # –ó–æ–Ω—ã –ø–æ –∑–Ω–∞–∫—É AO (–∫–∞–∫ —É MACD)
        zones = []
        current_zone = None
        
        for idx, row in df.iterrows():
            if row['ao'] > 0:  # bull zone
                if current_zone is None or current_zone['type'] != 'bull':
                    if current_zone:
                        zones.append(ZoneInfo(**current_zone))
                    current_zone = {'type': 'bull', 'start_idx': idx, 'data': []}
            else:  # bear zone
                if current_zone is None or current_zone['type'] != 'bear':
                    if current_zone:
                        zones.append(ZoneInfo(**current_zone))
                    current_zone = {'type': 'bear', 'start_idx': idx, 'data': []}
            
            if current_zone:
                current_zone['data'].append(row)
        
        return zones


class BollingerZoneAnalyzer(BaseZoneAnalyzer):
    """
    –ó–æ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ Bollinger Bands.
    
    –õ–æ–≥–∏–∫–∞ –∑–æ–Ω:
    - Bull zone: —Ü–µ–Ω–∞ –≤—ã—à–µ —Å—Ä–µ–¥–Ω–µ–π –ø–æ–ª–æ—Å—ã
    - Bear zone: —Ü–µ–Ω–∞ –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–π –ø–æ–ª–æ—Å—ã
    - –ò–ª–∏: –∑–æ–Ω—ã –∫–∞—Å–∞–Ω–∏—è –≤–µ—Ä—Ö–Ω–µ–π/–Ω–∏–∂–Ω–µ–π –ø–æ–ª–æ—Å
    """
    
    def get_indicator_config(self):
        return {
            'indicator_col': 'bb_middle',
            'signal_col': 'bb_width',  # —à–∏—Ä–∏–Ω–∞ –ø–æ–ª–æ—Å –∫–∞–∫ —Å–∏–≥–Ω–∞–ª
            'required_cols': ['bb_upper', 'bb_middle', 'bb_lower']
        }
    
    def calculate_indicator(self, df):
        # Bollinger Bands
        sma = df['close'].rolling(20).mean()
        std = df['close'].rolling(20).std()
        df['bb_upper'] = sma + 2 * std
        df['bb_middle'] = sma
        df['bb_lower'] = sma - 2 * std
        df['bb_width'] = df['bb_upper'] - df['bb_lower']
        return df
    
    def identify_zones(self, df):
        # –ó–æ–Ω—ã –ø–æ –ø–æ–ª–æ–∂–µ–Ω–∏—é —Ü–µ–Ω—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥–Ω–µ–π –ª–∏–Ω–∏–∏
        # (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ MACD/AO)
        pass
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–∞—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ª—é–±—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã.

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–∞—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è (–º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å)

**–£—Å–∏–ª–∏—è:** 1-2 –Ω–µ–¥–µ–ª–∏  
**–ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:** Production-ready —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ –í–∞—Ä–∏–∞–Ω—Ç—É 2:

**1. –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω**

```python
class ZoneDetectionStrategy(Protocol):
    """–ü—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω."""
    
    def detect_zones(self, df: pd.DataFrame) -> List[ZoneInfo]:
        """–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∑–æ–Ω—ã –Ω–∞ –¥–∞–Ω–Ω—ã—Ö."""
        ...


class SignChangeZoneDetection:
    """–ó–æ–Ω—ã –ø–æ —Å–º–µ–Ω–µ –∑–Ω–∞–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ (MACD, AO)."""
    def detect_zones(self, df, indicator_col='macd'):
        # –õ–æ–≥–∏–∫–∞ —Å–º–µ–Ω—ã –∑–Ω–∞–∫–∞
        pass


class BandCrossZoneDetection:
    """–ó–æ–Ω—ã –ø–æ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—é –ø–æ–ª–æ—Å (Bollinger, Keltner)."""
    def detect_zones(self, df, price_col='close', band_col='bb_middle'):
        # –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
        pass


class ThresholdZoneDetection:
    """–ó–æ–Ω—ã –ø–æ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—é –ø–æ—Ä–æ–≥–æ–≤ (RSI, Stochastic)."""
    def detect_zones(self, df, indicator_col='rsi', upper=70, lower=30):
        # –õ–æ–≥–∏–∫–∞ –ø–æ—Ä–æ–≥–æ–≤
        pass
```

**2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ features**

```python
@dataclass
class ZoneAnalysisConfig:
    """–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∑–æ–Ω –ª—é–±–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞."""
    
    # –ö–æ–ª–æ–Ω–∫–∏ –¥–∞–Ω–Ω—ã—Ö
    price_cols: Dict[str, str] = field(default_factory=lambda: {
        'open': 'open', 'high': 'high', 'low': 'low', 'close': 'close'
    })
    indicator_cols: Dict[str, str] = field(default_factory=dict)  # {'main': 'macd', 'signal': 'macd_hist'}
    
    # –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω
    zone_detection_strategy: ZoneDetectionStrategy = None
    
    # –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞
    calculate_indicator_amplitude: bool = True
    calculate_signal_amplitude: bool = True
    calculate_correlation: bool = True
    calculate_slope: bool = True
    
    # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –º–µ—Ç—Ä–∏–∫
    swing_strategy: str = 'zigzag'
    shape_strategy: str = 'statistical'
    divergence_strategy: Optional[str] = None
    volatility_strategy: Optional[str] = None
    volume_strategy: Optional[str] = None


class UniversalZoneAnalyzer:
    """–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –∑–æ–Ω –¥–ª—è –ª—é–±–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞."""
    
    def __init__(self, config: ZoneAnalysisConfig):
        self.config = config
    
    def analyze(self, df: pd.DataFrame):
        # 1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–æ–Ω —á–µ—Ä–µ–∑ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
        zones = self.config.zone_detection_strategy.detect_zones(df)
        
        # 2. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
        features_analyzer = ZoneFeaturesAnalyzer(
            indicator_col=self.config.indicator_cols.get('main'),
            signal_col=self.config.indicator_cols.get('signal'),
            # ...
        )
        
        # 3. –û—Å—Ç–∞–ª—å–Ω–æ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ
        pass
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –ª—é–±—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –∏ –º–µ—Ç–æ–¥–æ–≤ –∑–æ–Ω.

---

## 3. –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã –∞–¥–∞–ø—Ç–∞—Ü–∏–∏

### –ü—Ä–∏–º–µ—Ä 1: Awesome Oscillator (AO) - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
1. –°–æ–∑–¥–∞—Ç—å `AOZoneAnalyzer` (–∫–æ–ø–∏—è MACDZoneAnalyzer —Å AO –ª–æ–≥–∏–∫–æ–π)
2. –ò–∑–º–µ–Ω–∏—Ç—å 2 —Å—Ç—Ä–æ–∫–∏ –≤ `ZoneFeaturesAnalyzer.__init__()`:
   ```python
   indicator_col='ao'
   signal_col='ao'  # AO —Å–∞–º —Å–µ–±–µ —Å–∏–≥–Ω–∞–ª
   ```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- ‚úÖ –í—Å–µ 8 —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (Swing, Shape, Divergence, Volatility, Volume)
- ‚úÖ HypothesisTestSuite (–≤—Å–µ 5 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ ZoneSequenceAnalyzer
- ‚úÖ ZoneRegressionAnalyzer
- ‚úÖ ValidationSuite

**–£—Å–∏–ª–∏—è:** 4-6 —á–∞—Å–æ–≤

---

### –ü—Ä–∏–º–µ—Ä 2: Bollinger Bands - –°—Ä–µ–¥–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
1. –°–æ–∑–¥–∞—Ç—å `BollingerZoneAnalyzer` —Å –ª–æ–≥–∏–∫–æ–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω
2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á—Ç–æ —Ç–∞–∫–æ–µ "amplitude":
   - –í–∞—Ä–∏–∞–Ω—Ç A: —à–∏—Ä–∏–Ω–∞ –ø–æ–ª–æ—Å (`bb_width = upper - lower`)
   - –í–∞—Ä–∏–∞–Ω—Ç B: –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –æ—Ç —Å—Ä–µ–¥–Ω–µ–π
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `ZoneFeaturesAnalyzer`:
   ```python
   indicator_col='bb_middle'
   signal_col='bb_width'
   ```

**–õ–æ–≥–∏–∫–∞ –∑–æ–Ω:**
```python
def identify_zones(self, df):
    """
    Bull zone: close > bb_middle
    Bear zone: close < bb_middle
    """
    zones = []
    for ...:
        if df['close'] > df['bb_middle']:
            zone_type = 'bull'
        else:
            zone_type = 'bear'
```

**–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ Swing, Volatility, Volume, Shape —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ - –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ Divergence - —Å –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–µ–π (–¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—è –º–µ–∂–¥—É —Ü–µ–Ω–æ–π –∏ bb_middle)
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–£—Å–∏–ª–∏—è:** 1-2 –¥–Ω—è

---

### –ü—Ä–∏–º–µ—Ä 3: Custom –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä - –ü–æ–ª–Ω–∞—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä:** –í–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä `MyIndicator` —Å —Å–∏–≥–Ω–∞–ª—å–Ω–æ–π –ª–∏–Ω–∏–µ–π.

**–®–∞–≥–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª–∞—Å—Å `BaseZoneAnalyzer`:
   ```python
   class MyIndicatorZoneAnalyzer(BaseZoneAnalyzer):
       def get_indicator_config(self):
           return {
               'indicator_col': 'my_indicator',
               'signal_col': 'my_signal',
               'required_cols': ['my_indicator', 'my_signal']
           }
       
       def calculate_indicator(self, df):
           df['my_indicator'] = ...  # –≤–∞—à —Ä–∞—Å—á–µ—Ç
           df['my_signal'] = ...     # –≤–∞—à–∞ —Å–∏–≥–Ω–∞–ª—å–Ω–∞—è –ª–∏–Ω–∏—è
           return df
       
       def identify_zones(self, df):
           # –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∑–æ–Ω
           pass
   ```

2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
   ```python
   analyzer = MyIndicatorZoneAnalyzer()
   result = analyzer.analyze_complete_modular(df)
   ```

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç–µ:**
- ‚úÖ –í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- ‚úÖ –í—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –í—Å—é –≤–∞–ª–∏–¥–∞—Ü–∏—é
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã

**–£—Å–∏–ª–∏—è:** 2-4 —á–∞—Å–∞ (—Ç–æ–ª—å–∫–æ –≤–∞—à–∞ –ª–æ–≥–∏–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏ –∑–æ–Ω)

---

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞ (—Å–µ–≥–æ–¥–Ω—è-–∑–∞–≤—Ç—Ä–∞):

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 1** (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)
2. –°–æ–∑–¥–∞–π—Ç–µ –∫–ª–∞—Å—Å –¥–ª—è –≤–∞—à–µ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å `MACDZoneAnalyzer`
3. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑—É–π—Ç–µ –∫–æ–ª–æ–Ω–∫–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `ZoneFeaturesAnalyzer`
4. –í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç as-is

### –î–ª—è production-ready —Ä–µ—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏):

1. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 2** (—Å—Ä–µ–¥–Ω–∏–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)
2. –°–æ–∑–¥–∞–π—Ç–µ `BaseZoneAnalyzer` —Å –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏
3. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç–µ `ZoneFeatures` –≤ `BaseZoneFeatures` + `IndicatorZoneFeatures`
4. –í—Å–µ –Ω–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –ø—Ä–æ—Å—Ç—ã–µ –ø–æ–¥–∫–ª–∞—Å—Å—ã

### –î–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–±—É–¥—É—â–µ–µ):

1. **–†–µ–∞–ª–∏–∑—É–π—Ç–µ –í–∞—Ä–∏–∞–Ω—Ç 3** (–ø–æ–ª–Ω–∞—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏—è)
2. –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–æ–Ω
3. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–µ feature extraction
4. Plugin —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

---

## 5. –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—É—Ç—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

### –≠—Ç–∞–ø 1: Backward compatibility (–Ω–µ–¥–µ–ª—è 1)

1. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å –ø–æ–ª—è –≤ `ZoneFeatures`:
   - `macd_amplitude` ‚Üí `indicator_amplitude` (—Å alias –¥–ª—è BC)
   - `hist_amplitude` ‚Üí `signal_amplitude`
   - `correlation_price_hist` ‚Üí `correlation_price_indicator`
   - `hist_slope` ‚Üí `signal_slope`

2. –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫–∏ –≤ `ZoneFeaturesAnalyzer`

3. –û–±–Ω–æ–≤–∏—Ç—å `MACDZoneAnalyzer` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í—Å–µ —Ç–µ–∫—É—â–µ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç + –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –Ω–æ–≤—ã–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º

### –≠—Ç–∞–ø 2: Base classes (–Ω–µ–¥–µ–ª—è 2)

1. –°–æ–∑–¥–∞—Ç—å `BaseZoneAnalyzer`
2. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å `MACDZoneAnalyzer` –∫–∞–∫ –ø–æ–¥–∫–ª–∞—Å—Å
3. –°–æ–∑–¥–∞—Ç—å 1-2 –ø—Ä–∏–º–µ—Ä–∞ (AOZoneAnalyzer, RSIZoneAnalyzer)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –ª—é–±—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

### –≠—Ç–∞–ø 3: –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∑–æ–Ω (–Ω–µ–¥–µ–ª—è 3, optional)

1. `ZoneDetectionStrategy` –ø—Ä–æ—Ç–æ–∫–æ–ª
2. –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–æ–Ω
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ `ZoneAnalysisConfig`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Production-ready —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

---

## 6. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –û—Ç–≤–µ—Ç—ã –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã:

**Q: –ù–∞—Å–∫–æ–ª—å–∫–æ "–∑–∞—Ç–æ—á–µ–Ω–æ" –ø–æ–¥ MACD?**  
A: 70-80% –∫–æ–¥–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ, 20-30% –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MACD-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤?**  
A: ‚úÖ **–î–∞, —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏** (1-2 –¥–Ω—è –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤).

**Q: –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π?**  
A: ‚úÖ –í—Å–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏, –≤—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, regression, validation.

**Q: –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞?**  
A: üîß `ZoneFeatures` (4 –ø–æ–ª—è), `ZoneFeaturesAnalyzer` (hardcoded –∫–æ–ª–æ–Ω–∫–∏).

**Q: –ö–∞–∫ –±—ã—Å—Ç—Ä–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å?**  
A:
- **AO, Stochastic:** 4-6 —á–∞—Å–æ–≤
- **Bollinger, Ichimoku:** 1-2 –¥–Ω—è
- **–ö–∞—Å—Ç–æ–º–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä:** 2-4 —á–∞—Å–∞ (—Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞)

### –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç–∏: 7.5/10

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—á—Ç–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞
- ‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞—è

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- üîß Hardcoded MACD –∫–æ–ª–æ–Ω–∫–∏ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- üîß MACD-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π
- üîß –ù–µ—Ç –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞ –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤

**–í—ã–≤–æ–¥:** –°–∏—Å—Ç–µ–º–∞ **–≥–æ—Ç–æ–≤–∞ –∫ —É–Ω–∏–≤–µ—Ä—Å–∞–ª–∏–∑–∞—Ü–∏–∏** –∏ —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —É—Å–∏–ª–∏–π –¥–ª—è –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –ø–æ–¥ –¥—Ä—É–≥–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã. –° —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–æ–º –Ω–∞ 1-2 –Ω–µ–¥–µ–ª–∏ —Å—Ç–∞–Ω–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–π.

---

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –í—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –í–∞—Ä–∏–∞–Ω—Ç 2)
2. –ù–∞—á–∞—Ç—å —Å –≠—Ç–∞–ø–∞ 1 (backward compatibility)
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ 1-2 –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞—Ö
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å extension guide

