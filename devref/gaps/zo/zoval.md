# Валидация документации BQuant (zoval)

**Версия:** 1.0  
**Дата:** 2025-10-24  
**Статус:** READY FOR EXECUTION  
**Контекст:** Систематическая валидация всей документации BQuant через практическое тестирование примеров, проверку ссылок и соответствие реальному коду.

---

## 🎯 Цели валидации

1. **Проверить актуальность документации** - все примеры кода работают с текущей версией
2. **Валидировать cross-references** - все ссылки ведут на существующие файлы
3. **Тестировать примеры** - все скрипты выполняются без ошибок
4. **Проверить соответствие коду** - документация отражает реальное состояние API
5. **Исправить выявленные проблемы** - устранить неработающие примеры и битые ссылки

## ⚡ Гибридный подход к исправлениям

**НЕМЕДЛЕННЫЕ ИСПРАВЛЕНИЯ** (в процессе валидации):
- ✅ Битые ссылки
- ✅ Очевидные ошибки в примерах кода  
- ✅ Простые проблемы с языком (замена английских слов на русские)
- ✅ Неработающие cross-references

**ОТЛОЖЕННЫЕ ИСПРАВЛЕНИЯ** (после полной валидации):
- 🔄 Критические проблемы с API
- 🔄 Необходимость переписывания больших разделов
- 🔄 Сложные проблемы с архитектурой
- 🔄 Проблемы, требующие дополнительного исследования

---

## 📋 Фактическая структура документации (статус по файлам)

Легенда: 🔴 – критически неактуально, требует полной переработки; 🟡 – частично актуально, нужны точечные правки; 🟢 – актуально, соответствует коду; 🆕 – файл отсутствует, нужно создать.

```
docs/
├── index.rst                         🟢  ✅ ВАЛИДИРОВАН - все примеры работают, ссылки корректны
├── README.md                         🟢  ✅ ВАЛИДИРОВАН - все команды работают, структура исправлена
├── api/
│   ├── README.md                     🟢  ✅ ВАЛИДИРОВАН - все примеры работают, структура соответствует коду
│   ├── analysis/
│   │   ├── README.md                🟢  ✅ ВАЛИДИРОВАН - все примеры работают, cross-references корректны
│   │   ├── zones.md                 🟢  Обновлен с Universal API и indicator_context
│   │   ├── strategies.md            🟢  Обновлен с Universal Pipeline примерами
│   │   ├── pipeline.md              🟢  Создан - полная документация Universal Pipeline
│   │   ├── statistical.md           🟡  Примеры не используют universal pipeline, терминология старая.
│   │   └── base.md                  🟢  Соответствует текущему коду.
│   ├── core/
│   │   ├── README.md                🟡  Проверить перекрёстные ссылки.
│   │   ├── config.md                🟡  Проверить актуальность.
│   │   ├── exceptions.md            🟡  Проверить актуальность.
│   │   ├── logging.md               🟡  Проверить актуальность.
│   │   ├── nb.md                    🟡  Проверить актуальность.
│   │   ├── performance.md           🟡  Проверить актуальность.
│   │   └── utils.md                 🟡  Проверить актуальность.
│   ├── data/
│   │   ├── README.md                🟢  Соответствует модулям.
│   │   ├── loader.md                🟢  Соответствует модулям.
│   │   ├── processor.md             🟢  Соответствует модулям.
│   │   ├── samples.md               🟢  Соответствует модулям.
│   │   ├── schemas.md               🟢  Соответствует модулям.
│   │   └── validator.md             🟢  Соответствует модулям.
│   ├── indicators/
│   │   ├── README.md                🟢  Обновлен с Universal Indicator Factory
│   │   └── macd.md                  🟢  Обновлен с deprecation warning и migration guide
│   ├── visualization/
│   │   └── README.md                🟢  Обновлен с Universal Pipeline visualization
│   └── extension_guide.md           🟡  В целом актуально, но потребуется cross-link на новый pipeline.
├── user_guide/
│   ├── README.md                    🟢  Обновлен с Universal Pipeline v2.1; исправлены ссылки
│   └── quick_start.md               🟢  Переписан на analyze_zones() API
├── tutorials/
│   └── README.md                    🟢  Обновлен с Architecture Learning Path + детальная навигация
├── developer_guide/
│   └── README.md                    🟢  Обновлен с v2.1 архитектурой + Extension Points + Code Quality
├── examples/
│   └── README.md                    🟢  Обновлен с реальными примерами + Examples Navigation + Quality Standards
└── conf.py/Makefile/...             🟢  Без изменений.

examples/
├── 02_macd_zone_analysis.py         🟡  Содержит секции «legacy vs new», оставить как миграционный пример.
├── 02a_universal_zones.py           🟡  Нужно расширить, чтобы служить главным reference.
├── 05_strategies_demo.py            🟢  Мигрирован на Universal Pipeline v2.1
├── 06_regression_demo.py            🟢  Мигрирован на Universal Pipeline v2.1
├── 07_validation_demo.py            🟢  Мигрирован на Universal Pipeline v2.1
└── README.md                        🟡  Уже отражает универсальный набор, но требует синхронизации с docs/.

README.md (корень проекта)           🟢  Обновлен с Universal Pipeline v2.1

research/notebooks/ (20 файлов)      🟢  Все проверены и работают с --no-trap
```

---

## 🔍 План валидации документации

### Этап 1 – Валидация корневых файлов и навигации (0.5 дня)

#### 1.1 **Валидация docs/index.rst** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- Все toctree ссылки ведут на существующие файлы
- Примеры кода в index.rst выполняются без ошибок
- Cross-references работают корректно
- Язык текста: русский (код остается без изменений)

**Результаты валидации:**
- ✅ **Все toctree ссылки проверены** - все 9 файлов существуют
- ✅ **Примеры кода работают** - все 4 теста пройдены успешно:
  - Импорты: ✅ ПРОЙДЕН
  - Sample данные: ✅ ПРОЙДЕН (1000 строк данных)
  - Universal Pipeline: ✅ ПРОЙДЕН (RSI анализ)
  - Legacy MACD: ✅ ПРОЙДЕН (72 зоны найдены)
- ✅ **Cross-references корректны** - все ссылки ведут на существующие файлы
- ✅ **Язык текста** - весь текст на русском, код на английском

**Статус:** 🟢 **АКТУАЛЕН** - файл полностью соответствует коду и работает корректно

#### 1.2 **Валидация docs/README.md** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- Инструкции по сборке актуальны
- Все ссылки работают
- Команды выполняются без ошибок
- Язык текста: русский (код остается без изменений)

**Результаты валидации:**
- ✅ **Инструкции по сборке актуальны** - все команды работают корректно
- ✅ **Все ссылки работают** - все 5 файлов существуют:
  - SETUP_READTHEDOCS.md: ✅ СУЩЕСТВУЕТ
  - .readthedocs.yml: ✅ СУЩЕСТВУЕТ
  - docs/conf.py: ✅ СУЩЕСТВУЕТ
  - docs/Makefile: ✅ СУЩЕСТВУЕТ
  - docs/index.rst: ✅ СУЩЕСТВУЕТ
- ✅ **Команды выполняются без ошибок** - все 5 тестов пройдены:
  - Существование файлов: ✅ ПРОЙДЕН
  - Команды Sphinx: ✅ ПРОЙДЕН (sphinx-build 8.2.3)
  - pip install команда: ✅ ПРОЙДЕН
  - Структура для сборки: ✅ ПРОЙДЕН (созданы недостающие директории)
  - Язык текста: ✅ ПРОЙДЕН
- ✅ **Язык текста** - весь текст на русском, код на английском

**Немедленные исправления:**
- ✅ **Созданы недостающие директории** - docs/_static/ и docs/_templates/

**Статус:** 🟢 **АКТУАЛЕН** - файл полностью соответствует коду и работает корректно

### Этап 2 – Валидация API документации (1.5 дня)

#### 2.1 **Валидация docs/api/README.md** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- Все примеры кода выполняются
- Cross-references работают
- Структура API соответствует реальности
- Неработающие примеры исправлены
- Язык текста: русский (код остается без изменений)

**Результаты валидации:**
- ✅ **Все примеры кода выполняются** - все 5 тестов пройдены успешно после исправлений
- ✅ **Cross-references работают** - все 6 ссылок на модули существуют:
  - docs/api/core/README.md: ✅ СУЩЕСТВУЕТ
  - docs/api/data/README.md: ✅ СУЩЕСТВУЕТ
  - docs/api/indicators/README.md: ✅ СУЩЕСТВУЕТ
  - docs/api/analysis/README.md: ✅ СУЩЕСТВУЕТ
  - docs/api/visualization/README.md: ✅ СУЩЕСТВУЕТ
  - docs/api/extension_guide.md: ✅ СУЩЕСТВУЕТ
- ✅ **Структура API соответствует реальности** - все модули импортируются успешно после исправлений
- ✅ **Неработающие примеры исправлены** - исправлены неправильные пути импортов в документации:
  - `bquant.indicators.MACDZoneAnalyzer` → `bquant.indicators.macd.MACDZoneAnalyzer`
  - `bquant.indicators.MACDPreloadedIndicator` → `bquant.indicators.preloaded.MACDPreloadedIndicator`
  - `bquant.indicators.BaseIndicator` → `bquant.indicators.base.BaseIndicator`
  - `bquant.indicators.IndicatorFactory` → `bquant.indicators.base.IndicatorFactory`
  - `bquant.visualization.FinancialCharts` → `bquant.visualization.charts.FinancialCharts`
  - `bquant.visualization.ZoneVisualizer` → `bquant.visualization.zones.ZoneVisualizer`
  - `bquant.visualization.StatisticalPlots` → `bquant.visualization.statistical.StatisticalPlots`
  - `create_candlestick_chart()` → `bquant.visualization.charts.create_candlestick_chart()`
- ✅ **Язык текста** - весь текст на русском, код на английском

**Немедленные исправления:**
- ✅ **Исправлены пути импортов в документации** - обновлены неправильные пути к модулям в самом файле docs/api/README.md
- ✅ **Восстановлен PreloadedIndicator** - класс добавлен обратно в документацию с правильным путем импорта
- ✅ **Полная переработка разделов с перечислением сущностей** - заменены устаревшие разделы "По типу" на современную структуру с честной статистикой пакета (1110+ сущностей)

**Статус:** 🟢 **АКТУАЛЕН** - файл полностью соответствует коду и работает корректно

#### 2.2 **Валидация docs/api/analysis/README.md** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- Примеры Universal Pipeline работают
- Cross-references корректны
- API структура соответствует реальности
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров Universal Pipeline
- Проверить все cross-references на существование целевых файлов

**Результаты валидации:**
- ✅ Импорты: 7/7 успешно
- ✅ Universal Pipeline пример: работает
- ✅ Single hypothesis test: работает
- ✅ Zone features analysis: работает
- ✅ Sequence analysis: работает
- ✅ StatisticalAnalyzer: работает
- ✅ Custom analyzer: работает
- ✅ Cross-references: 9/9 ссылок существуют
- ✅ Язык текста: русский (код на английском)
- **Статус:** 🟢 ✅ ВАЛИДИРОВАН (9/9 тестов пройдено)
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Сообщение `@deprecated` и структура `MACDZoneAnalyzer` синхронизированы с фактическим модулем; перевод обновлён без переиначивания.
- ✅ Примеры миграции и Universal Pipeline дополнены загрузкой sample-данных и расчётом `macd_hist`, выполняются без ошибок.
- ✅ Примеры просмотра зон, пресета `analyze_macd_zones` и PRELOADED индикатора отрабатывают как в документации.

**Немедленные исправления:**
- ✅ Обновлено описание методов `MACDZoneAnalyzer` и заменены устаревшие ссылки на `_zone_to_dict` и другие внутренние методы.
- ✅ Исправлено обращение к `zone.type`, переведены оставшиеся английские фрагменты и добавлены недостающие строки подготовки данных.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (4/4 проверки успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_macd_validation.py`

#### 2.3 **Валидация docs/api/analysis/zones.md** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- API примеры и cross-references корректны
- Примеры indicator_context работают
- Документация Universal API актуальна
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров zones API
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Импорты: 2/2 успешно
- ✅ indicator_context пример: работает
- ✅ MACD пример: работает
- ✅ RSI пример: работает
- ✅ Stochastic пример: работает
- ✅ Custom indicator пример: работает
- ✅ Strategies примеры: работают
- ✅ Universal Pipeline примеры: работают
- ✅ Cross-references: 4/4 ссылок существуют
- ✅ Язык текста: русский (код на английском)
- **Статус:** 🟢 ✅ ВАЛИДИРОВАН (10/10 тестов пройдено)

#### 2.4 **Валидация docs/api/analysis/strategies.md** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- Все примеры стратегий выполняются
- Cross-references корректны
- Документация стратегий актуальна
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров стратегий
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Импорты: 7/7 успешно (ZoneFeaturesAnalyzer, analyze_zones, StrategyRegistry и фабрики стратегий)
- ✅ Примеры стратегий: вычислены метрики shape/divergence/volume/volatility на синтетических данных
- ✅ ZoneFeaturesAnalyzer: извлечены все группы признаков (swing, shape, divergence, volatility, volume)
- ✅ Universal Pipeline: анализ с пятью стратегиями возвращает зоны и признаки
- ✅ StrategyRegistry: регистрация пользовательской swing-стратегии работает
- ✅ Cross-references: 15/15 ссылок существуют
- ✅ Язык текста: 5/5 русских маркеров, 23 python-блока

**Немедленные исправления:**
- ✅ В тесте добавлено NUMBA_DISABLE_JIT и ограничение регистрации pandas-ta индикаторов для ускорения прогонов

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (7/7 тестов пройдено)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_strategies_validation.py`

#### 2.5 **Валидация docs/api/analysis/pipeline.md**
**Что проверить:**
- Полная документация Universal Pipeline актуальна
- Примеры pipeline работают
- Cross-references корректны
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров pipeline
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Импорты: 7/7 модулей доступны (ZoneAnalysisBuilder, ZoneAnalysisPipeline, UniversalZoneAnalyzer, get_sample_data)
- ✅ Fluent Builder: пример с RSI и стратегиями выполняется
- ✅ Core Engine: универсальный pipeline с MACD возвращает 72 зоны и корректный контекст
- ✅ indicator_context: контекст содержит detection_indicator, detection_strategy, detection_rules и signal_line
- ✅ Line crossing: пример с пересечением `ma_fast` и `ma_slow` возвращает зоны
- ✅ Расширенные стратегии: комбинация swing/volatility/volume/divergence выполняется без ошибок
- ✅ Полный анализ: опции `regression=True` и `validation=True` формируют результаты
- ✅ with_cache(enable=False): отключение кэша и повторный анализ работают
- ✅ Практические примеры: MACD (72 зон), RSI, AO (36 зон) и сценарий с кэшированием выполнены
- ✅ Migration Guide: deprecated MACDZoneAnalyzer возвращает 21 зону
- ✅ Cross-references: 12/12 ссылок существуют
- ✅ Язык текста: 5/5 русских маркеров, 15 python-блоков

**Немедленные исправления:**
- ✅ Обновлены примеры `.analyze()` (актуальные параметры regression/validation) и AO detection (`indicator_col='AO_5_34'`)
- ✅ Исправлен контракт `indicator_context` (отражены реальные ключи detection_strategy/detection_indicator/detection_rules/signal_line)
- ✅ Обновлён раздел Migration Guide (убран вызов недоступного `_zone_to_dict`)
- ✅ В тесте задействовано NUMBA_DISABLE_JIT и минимальная регистрация pandas-ta индикаторов

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (8/8 тестов пройдено)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_pipeline_validation.py`

#### 2.6 **Валидация docs/api/analysis/statistical.md** ✅ **ЗАВЕРШЕНО**
**Что проверить:**
- Примеры статистического анализатора, HypothesisTestSuite, регрессии и ValidationSuite выполняются
- Терминология и структура отражают текущий API
- Cross-references корректны
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров statistical
- Проверить соответствие терминологии текущему статистическому API
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Примеры `StatisticalAnalyzer`: описательные статистики и тесты нормальности/корреляции выполняются на синтетических данных
- ✅ HypothesisTestSuite: семь сценариев (duration, asymmetry, correlation_drawdown, stationarity, support_resistance, volatility, sequence) проходят на общем наборе `zones_features`
- ✅ Утилиты `run_all_hypothesis_tests` и `run_single_hypothesis_test('support_resistance')` возвращают ожидаемые метаданные
- ✅ Регрессионные примеры (`predict_zone_duration`, кастомные предикторы, `predict_price_return`) строят модели c ненулевым R²
- ✅ ValidationSuite: out_of_sample, walk_forward, sensitivity_analysis и monte_carlo на `market_data` завершаются с валидными метриками
- ✅ Язык текста: описательные блоки переведены на русский, код в блоках оставлен на английском, добавлены единые генераторы данных для повторяемости
- ✅ Cross-references: 3/3 внутренних ссылки остаются рабочими (base.md, zones.md, якорь раздела)

**Немедленные исправления:**
- ✅ Обновлены названия функций (`run_single_hypothesis_test`) и параметры ValidationSuite под фактический API
- ✅ Добавлены синтетические генераторы `zones_features` и `market_data`, чтобы все блоки выполнялись без внешних зависимостей
- ✅ Переведены англоязычные описания разделов на русский без изменения кода в примерах

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (12/12 примеров покрыты тестом)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_statistical_validation.py`

#### 2.7 **Валидация docs/api/analysis/base.md**
**Что проверить:**
- Базовые примеры работают
- Cross-references корректны
- Документация соответствует коду
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров base
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Пример `MyAnalyzer` из документации успешно выполняется и возвращает `AnalysisResult` с 10 строками данных
- ✅ `create_analyzer('statistical')` и `get_available_analyzers()` выдают актуальные объекты базовой фабрики
- ✅ Константа `SUPPORTED_ANALYSIS_TYPES` и импортируемые классы доступны из `bquant.analysis`
- ✅ Cross-references на `statistical.md` и `zones.md` существуют
- ✅ Язык текста подтвержден: русскоязычные маркеры присутствуют, кодовые блоки не изменялись

**Немедленные исправления:**
- ✅ Обновлен пример DataFrame (10 значений `close`), чтобы пройти встроенную проверку `validate_data`

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (5/5 тестов покрывают раздел)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_base_validation.py`

#### 2.8 **Валидация docs/api/core/README.md**
**Что проверить:**
- Перекрёстные ссылки работают
- Cross-references корректны
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все шесть кодовых примеров (конфигурация, логирование, производительность, обработка исключений, утилиты, Notebook API) воспроизведены и выполняются без ошибок
- ✅ `bquant.core.performance.performance_monitor()` требует вызова с пустыми скобками — документация обновлена для совместимости с текущим API
- ✅ Блок Notebook API синхронизирован с фактическим `NotebookSimulator` и интерактивными методами `step()/wait()/success()`
- ✅ Cross-references на модули core и смежные разделы (data, indicators, analysis, visualization) подтверждены
- ✅ Текст раздела остаётся русскоязычным, кодовые блоки сохранены без изменений

**Немедленные исправления:**
- ✅ Исправлен декоратор `@performance_monitor` на `@performance_monitor()`
- ✅ Обновлены упоминания `NotebookRunner` на `NotebookSimulator` и описаны доступные методы управления окружением

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (6/6 примеров покрыты тестом)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_core_readme_validation.py`

#### 2.9 **Валидация docs/api/core/config.md** (🟢)
**Что проверить:**
- Актуальность документации
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Примеры `get_data_path`, `validate_timeframe`, `get_indicator_params` и `get_results_path` воспроизведены — пути формируются, корректные таймфреймы принимаются, ошибка для `2D` выбрасывается
- ✅ Все фабрики стратегий (`create_swing_strategy`, `create_shape_strategy`, `create_divergence_strategy`, `create_volatility_strategy`, `create_volume_strategy`) создают рабочие объекты с актуальными параметрами (`bb_length`, `touch_threshold` и т.д.)
- ✅ Структура `ANALYSIS_CONFIG` синхронизирована с реальным модулем (`zone_analysis`, `zone_features`, `pattern_analysis`, `statistical_analysis`)
- ✅ Блок управления директориями проверен: установка кастомного пути, флаг `is_custom`, сброс к значениям по умолчанию
- ✅ Cross-reference на `docs/api/analysis/strategies.md` существует, текст раздела подтверждён как русскоязычный

**Немедленные исправления:**
- ✅ Переведён раздел о фабриках стратегий, обновлены примеры под фактические сигнатуры (строковые идентификаторы и словари с параметрами)
- ✅ Обновлён пример `ANALYSIS_CONFIG`, чтобы отражать текущую структуру модуля

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (8/8 примеров покрыты тестом)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_config_validation.py`

#### 2.10 **Валидация docs/api/core/exceptions.md** (🟢)
**Что проверить:**
- Актуальность документации
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Список классов дополнен `FileOperationError` и `NotImplementedError`, проверено фактическое наследование всех исключений модуля
- ✅ Документационный пример с `create_data_validation_error` и `BQuantErrorContext` выполнен: фабрика возвращает сообщение с деталями, контекст оборачивает `ZeroDivisionError` в `BQuantError`
- ✅ Валидаторы `validate_timeframe`, `validate_indicator_parameters`, `validate_ohlcv_data` воспроизведены на минимальных наборах данных, ошибки выбрасываются согласно описанию
- ✅ Подтверждено, что текст раздела русскоязычный, а структура и количество кодовых блоков соответствуют документации

**Немедленные исправления:**
- ✅ Добавлены описания `FileOperationError` и `NotImplementedError`, чтобы документация отражала полный набор исключений

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (4/4 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_exceptions_validation.py`

#### 2.11 **Валидация docs/api/core/logging.md** (🟡)
**Что проверить:**
- Актуальность документации
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все профили `setup_logging(profile=...)` из раздела «Предустановленные профили» и блок «Практические примеры» воспроизведены: загрузка данных через `load_ohlcv_data('file.csv')`, расчёт MACD и запуск `analyze_zones()` подтверждают работоспособность примеров.
- ✅ Проверены модульная настройка, исключения и приоритет `profile → modules_config → exceptions`; результаты отображаются в новом тестовом скрипте.
- ✅ Сценарии `Troubleshooting` подтвердили корректный порядок импорта, вывод версии и создание файла `my_log.txt` при включении файлового логирования.
- ✅ Интеграция с `NotebookSimulator` выполнена в режиме по умолчанию, сообщения info/warning/success выводятся, загрузка данных безопасна.
- ✅ Кросс-ссылки обновлены на существующие разделы (`developer_guide/README.md`) и успешно проверены.

**Немедленные исправления:**
- ✅ Обновлён импорт примера MACD на `bquant.indicators.calculators.calculate_macd`.
- ✅ Заменены битые ссылки `../../dev/logging_best_practices.md` и `../../troubleshooting/logging.md` на актуальные разделы developer guide.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (7/7 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_logging_validation.py`

#### 2.12 **Валидация docs/api/core/nb.md** (🟡)
**Что проверить:**
- Актуальность документации
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все сниппеты `NotebookSimulator` (вводные, базовый скрипт, продвинутый сценарий и минимальный пример) выполнены с интерактивными паузами, созданными лог-файлами и подтверждённым завершением `finish()`.
- ✅ Примеры `data_info`, `summary_item`, `next_steps`, `format_file_size` и `format_duration` прогнаны с фиксацией фактических префиксов `[OK]`/`[FAIL]`/`[NEXT]`, что синхронизировано с обновлённым текстом документации.
- ✅ Загружены sample-данные через `get_sample_data('tv_xauusd_1h')`, рассчитаны `describe()`/`corr()` и проверены кросс-ссылки на README/logging/config/performance/utils; язык раздела подтверждён как русскоязычный.

**Немедленные исправления:**
- ✅ Переведён заголовок раздела, добавлено описание метода `substep()` и исправлены комментарии вывода (`[OK]`, `[FAIL]`, `[NEXT]`).
- ✅ В продвинутом примере добавлена функция `load_data()` на базе встроенных sample-данных, чтобы код выполнялся без дополнительных зависимостей.
- ✅ Исправлена опечатка «Интеграция», удалён лишний маркер закрытия блока кода и обеспечен завершающий перевод строки.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (7/7 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_nb_validation.py`

#### 2.13 **Валидация docs/api/core/performance.md** (🟡)
**Что проверить:**
- Актуальность документации
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Пример с `@performance_monitor()` выполняется, глобальный монитор фиксирует вызов и возвращает агрегированную статистику.
- ✅ Контекст `performance_context("data_processing")` выполняется автономно и регистрирует метрики одного вызова.
- ✅ Сниппет с `OptimizedIndicators.sma` возвращает массив исходной длины и ожидаемые `NaN` для первых значений.
- ✅ Таблица `compare_implementations` формируется с колонками `implementation`, `avg_time`, `iterations`; все строки содержат данные.
- ✅ Раздел содержит 4 python-блока, текст русскоязычный, дополнительных cross-reference нет (0 ссылок).

**Немедленные исправления:**
- ✅ В пример с `performance_context` добавлены импорт `time` и функция `process()`, чтобы код из документации выполнялся без внешних зависимостей.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (5/5 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_performance_validation.py`

#### 2.14 **Валидация docs/api/core/utils.md** (🟡)
**Что проверить:**
- Актуальность документации
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Пример расчёта доходностей и нормализации выполняется: `calculate_returns` возвращает положительную доходность, `normalize_data` выдаёт z-score без `NaN` и со средним по `close`, равным нулю.
- ✅ `save_results(df, 'results/out.csv', index=False)` создаёт CSV в отдельной временной директории, файл читается обратно и сохраняет исходную сумму объёмов.
- ✅ `validate_ohlcv_columns(df)` с обновлённым OHLCV DataFrame возвращает `is_valid=True` и сообщение «Структура данных валидна».
- ✅ Пример с `create_timestamp('readable')` и `ensure_directory('results/charts')` формирует человеко-читаемую метку и создаёт требуемую директорию.
- ✅ Оба сниппета `@deprecated` генерируют `DeprecationWarning`, сохраняют результат выполнения и выставляют атрибуты `__deprecated__`/`__deprecation_message__`.
- ✅ Проверены ссылки раздела: `docs/api/indicators/macd.md` существует, текст полностью на русском; в документе 5 python-блоков.

**Немедленные исправления:**
- ✅ Обновлён пример DataFrame с OHLCV-колонками, чтобы валидация колонок завершалась успешно.
- ✅ Переведены английские подписи раздела про инструменты устаревания и оставлены неизменными комментарии в коде.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (6/6 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_utils_validation.py`

#### 2.15 **Валидация docs/api/data/README.md**
**Что проверить:**
- Соответствие модулям
- Примеры работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить соответствие реальным модулям
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Примеры `load_ohlcv_data`, `load_symbol_data`, `load_xauusd_data` выполняются на синтетическом OHLCV CSV (120 строк) при временной подмене `DATA_DIR`, все DataFrame имеют идентичные индексы.
- ✅ Блок обработки (`clean_ohlcv_data`, `prepare_data_for_analysis`, `resample_ohlcv`) возвращает непустые DataFrame, технические признаки и ресемплинг `1H/1D` строятся корректно.
- ✅ Валидация (`validate_ohlcv_data`, `validate_data_completeness`) проходит без ошибок, отчёт содержит только предупреждения.
- ✅ Sample API (`list_datasets`, `get_dataset_info`, `get_sample_data`, конвертации, `get_data_statistics`, `SampleDataGenerator`) отрабатывает для `tv_xauusd_1h` и возвращает ожидаемые размеры.
- ✅ Настройка логгера `logging.getLogger('bquant.data').setLevel(logging.WARNING)` применяется, все 10 связанных документов существуют.
- ✅ Раздел содержит 6 python-блоков, сопроводительный текст на русском, код не переводился.

**Немедленные исправления:**
- ✅ Таймфрейм в примере загрузки заменён на `'1h'`, чтобы соответствовать `validate_timeframe()` и обеспечить успешную валидацию.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (6/6 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_data_readme_validation.py`

#### 2.16 **Валидация docs/api/data/loader.md**
**Что проверить:**
- Соответствие модулю loader
- Примеры работы с данными работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить соответствие реальному модулю
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все три кодовых блока (`load_ohlcv_data`, `load_symbol_data`, `load_all_data_files`) воспроизведены на синтетическом CSV (120 строк) с временным переназначением `data` каталога; `get_data_info` возвращает корректную статистику.
- ✅ Настройка логирования повторяет документируемый пример: уровни `bquant.data.loader` и `bquant.data` переведены в `WARNING` без побочных эффектов.
- ✅ Cross-reference на `docs/api/core/logging.md` существует, сам документ `loader.md` сохранён в репозитории и использует русский текст без перевода кодовых вставок.

**Немедленные исправления:**
- ✅ Примеры таймфреймов синхронизированы с API (`'1h'` вместо `'1H'`), описание пути обновлено до `bquant.core.config.get_data_path()` для корректного импорта.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (3/3 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_loader_validation.py`

#### 2.17 **Валидация docs/api/data/processor.md**
**Что проверить:**
- Соответствие модулю processor
- Примеры работы с данными работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить соответствие реальному модулю
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все три python-блока (`clean_ohlcv_data` → `prepare_data_for_analysis`, `resample_ohlcv`, `calculate_derived_indicators`) воспроизведены на синтетическом OHLCV-сете (240 строк, `DatetimeIndex` с шагом 1 час); очистка удалила выбросы и пропуски, подготовка сформировала 190 строк с колонкой `close_zscore`.
- ✅ Ресемплинг `resample_ohlcv(df, '1h')` сократил ряд до 238 строк, `resample_ohlcv(df, '1d')` — до 10 строк, агрегаты open/high/low/close и volume рассчитаны корректно.
- ✅ `calculate_derived_indicators` добавляет ожидаемые признаки (`hl_avg`, `typical_price`, `gap`, `gap_pct` и др.), DataFrame не содержит пустых результатов.
- ✅ Документ содержит python-блоки, текст переведён на русский, маркеры TODO/TBD отсутствуют.
- ✅ Модуль `bquant.data.processor` экспортирует все функции, перечисленные в разделе.

**Немедленные исправления:**
- ✅ Обновлены примеры ресемплинга на `'1h'` и `'1d'`, чтобы синхронизировать документацию с фактическими вызовами и проверками.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (3/3 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_processor_validation.py`

#### 2.18 **Валидация docs/api/data/samples.md**
**Что проверить:**
- Соответствие модулю samples
- Примеры работы с sample данными работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить соответствие реальному модулю
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Основной пример `list_datasets()/get_sample_data()` возвращает 2 датасета, DataFrame содержит 1000 строк, `format='dict'` выдаёт список словарей с колонками (`time`, `open`, ...).
- ✅ API-блоки `get_dataset_info()`, `list_datasets()`, `validate_dataset()` и `get_sample_data(..., format='dataframe')` выполняются без ошибок, валидация возвращает `is_valid=True`.
- ✅ Дополнительные функции `get_sample_preview()`, `find_datasets(symbol/timeframe/source)`, `compare_sample_datasets()` и `print_sample_data_status()` работают, список датасетов (`tv_xauusd_1h`, `mt_xauusd_m15`) проходит повторную проверку `validate_dataset()`.
- ✅ Интеграция: `MACDZoneAnalyzer().analyze_complete()` на sample данных возвращает зоны, `FinancialCharts().create_candlestick_chart()` строит график, `run_all_hypothesis_tests()` на признаках зон выдаёт сводку с >0 тестов.
- ✅ CLI блок проверен: `scripts/data/extract_samples.py` существует и готов к запуску команд из документации.

**Немедленные исправления:**
- ✅ Обновлены примеры интеграции: заменён несуществующий `MACDAnalyzer` на `MACDZoneAnalyzer` c `analyze_complete()`, добавлен `ZoneFeaturesAnalyzer` для передачи признаков в статистические тесты.
- ✅ Исправлен вызов визуализации (`create_candlestick_chart` вместо `plot_candlestick`) и выравнен таймфрейм `find_datasets(timeframe='1h')` с поддерживаемым API.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (5/5 тестов успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_samples_validation.py`

#### 2.19 **Валидация docs/api/data/schemas.md**
**Что проверить:**
- Соответствие модулю schemas
- Примеры работы со схемами работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить соответствие реальному модулю
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Пример `validate_with_schema(df, 'ohlcv')` возвращает `ValidationResult` c `is_valid=True`, статистикой по строкам/колонкам и уведомлением в `recommendations` о заготовке схем.
- ✅ Классы `OHLCVRecord`, `DataSourceConfig`, `ValidationResult` и базовая `DataSchema` импортируются из модуля, проверка записи и DataFrame проходит успешно.
- ✅ Набор предопределённых схем соответствует документации: `AVAILABLE_SCHEMAS` содержит `ohlcv`, `macd`, `rsi`, а `get_schema('bollinger_bands')` корректно возвращает `None`.

**Немедленные исправления:**
- ✅ Уточнено описание `OHLCVRecord` (убран вопросительный знак у поля `volume`) и перечислены только поддерживаемые варианты `IndicatorSchema` (`macd`, `rsi`).

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (3/3 теста успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_schemas_validation.py`

#### 2.20 **Валидация docs/api/data/validator.md**
**Что проверить:**
- Соответствие модулю validator
- Примеры работы с валидацией работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров
- Проверить соответствие реальному модулю
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Пример подготовки `DataFrame` и вызова `validate_ohlcv_data` возвращает `is_valid=True` и заполненные `stats`.
- ✅ `validate_data_completeness`, `validate_price_consistency` и `validate_time_series_continuity` отрабатывают на одном наборе данных без ошибок, частота обнаружена как `h`.
- ✅ Проверено выполнение `validate_statistical_properties`, формируются блоки `statistics` и `outliers`.

**Немедленные исправления:**
- ✅ Добавлен рабочий код подготовки OHLCV‑данных и описание `validate_statistical_properties`.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (2/2 теста успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_validator_validation.py`

#### 2.21 **Валидация docs/api/indicators/README.md**
**Что проверить:**
- Universal Indicator Factory примеры работают
- Cross-references корректны
- Документация индикаторов актуальна
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров indicators
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ PRELOADED MACD пример возвращает корректные данные, тренды и статистику.
- ✅ Все сценарии Universal Pipeline (MACD, RSI, пользовательский индикатор, комбинированный анализ, экспорт) выполняются без ошибок.
- ✅ Пример с `SimpleMovingAverage` и `IndicatorFactory` создаёт индикатор, выдаёт список и подробную информацию о регистрации.

**Немедленные исправления:**
- ✅ Добавлен расчёт `macd_hist` из `macd` и `signal`, чтобы примеры детекторов зон работали на sample-данных.
- ✅ Обновлён пример пользовательского индикатора: используется `CustomIndicator`, корректный `IndicatorResult` и актуальные вызовы фабрики.
- ✅ Уточнены требования к колонкам PRELOADED и исправлены вызовы `IndicatorFactory.create()`/`get_indicator_info()`.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (4/4 проверки успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_indicators_readme_validation.py`

#### 2.22 **Валидация docs/api/indicators/macd.md**
**Что проверить:**
- Deprecation warning и migration guide актуальны
- Примеры миграции работают
- Cross-references корректны
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров MACD
- Проверить актуальность deprecation warning
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

#### 2.23 **Валидация docs/api/visualization/README.md**
**Что проверить:**
- Universal Pipeline visualization примеры работают
- Все cross-references корректны
- Неработающие примеры исправлены
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров visualization
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все сценарии визуализации Universal Pipeline (overview/detail/comparison/statistics) создают фигуры на sample-данных.
- ✅ Advanced Zone Visualization и комбинированный пример возвращают валидные графики с ограничением `max_zones` по фактическому количеству зон.
- ✅ Статистические графики, настройка тем, интерактивные элементы и экспорт HTML/JSON выполняются без ошибок.
- ✅ Кастомный график волатильности построен на ChartBuilder и успешно применяет тему.

**Немедленные исправления:**
- ✅ Заменён недействительный импорт `BaseChart` на рабочий паттерн через `ChartBuilder` и `ChartThemes`.
- ✅ Исправлены обращения к `zone_id`/`zone.type`, обновлён `max_zones`, настройки тем и параметры экспорта (HTML/JSON) для соответствия API.
- ✅ Уточнены примеры линий и данных (`data[['close']]`, `ChartThemes.set_default_theme`) для совместимости с текущими классами.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (9/9 проверок успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_visualization_readme_validation.py`

#### 2.24 **Валидация docs/api/extension_guide.md** (🟢)
**Что проверили:**
- Полное соответствие документации актуальным классам `IndicatorConfig`, `IndicatorResult`, `AnalysisResult` без удаления исходных описаний и докстрок.
- Сохранённые разделы *Testing Your Strategy*, *Integration Testing*, *Best Practices*, *Graceful Degradation* и т.д. c рабочими примерами кода.
- Регистрация стратегий (`my_custom`, `my_shape`, `my_divergence`) через `StrategyRegistry` и использование в `ZoneFeaturesAnalyzer`.
- Интеграция расширения через `register_extensions()` и локальный `ANALYZERS_REGISTRY`, покрытие тестами импортов `my_bquant_extension`.

**Как валидировали:**
- Вернули структуру документа к исходной версии, аккуратно обновив только те строки кода, которые требовали совместимости с API v2.1 (фиксируем комментариями в примерах).
- Перенесли все кодовые блоки в тест `devref/gaps/zo/zodoctest/test_extension_guide_validation.py`, добавив динамический пакет `my_bquant_extension` и проверку каждого сценария (индикаторы, анализаторы, стратегии, визуализации, загрузчики, pytest-сниппеты).
- Запустили тестовый скрипт и убедились, что все примеры исполняются без ошибок, при этом в документации сохранены изначальные формулировки и шаги.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (10/10 проверок успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_extension_guide_validation.py`
- 📚 Документация: сохранена первоначальная структура, обновлены только несовместимые вызовы (`IndicatorFactory`, `calculate_swings`, `analysis_result.results`, и т.п.).

### Этап 3 – Валидация User Guide (0.5 дня)

#### 3.1 **Валидация docs/user_guide/README.md**
**Что проверить:**
- Навигация обновлена на Universal Pipeline v2.1
- Все ссылки работают
- MACD-ориентированная навигация устранена
- Отсутствующий core_concepts.md исправлен
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все ссылки
- Создать скрипт для проверки ссылок на основе найденных ссылок
- Проверить все ссылки на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить проверочный скрипт и зафиксировать результаты

**Результаты валидации:**
- ✅ Все внутренние ссылки из README ведут к существующим файлам, добавлена новая секция **Core Concepts**.
- ✅ Создан `docs/user_guide/core_concepts.md` с описанием Universal Pipeline и рабочими примерами конфигурации и запуска анализа.
- ✅ Подтвержден русский язык текста и наличие блока установки зависимостей, навигация пересобрана под Universal Pipeline v2.1.

**Немедленные исправления:**
- ✅ Добавлен новый раздел навигации и корректный порядок изучения, расширенный контент перенесён без искажения структуры.
- ✅ Документация Core Concepts снабжена комментариями к доработанным участкам кода (`macd_histogram`), чтобы подчеркнуть совместимость с данными.

**Статус:** 🟢 ✅ ВАЛИДИРОВАН (6/6 проверок успешно)
- 📄 Скрипт: `python devref/gaps/zo/zodoctest/test_user_guide_readme_validation.py`

#### 3.2 **Валидация docs/user_guide/quick_start.md**
**Что проверить:**
- Все примеры analyze_zones() API работают
- Cross-references корректны
- Неработающие примеры исправлены
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров quick_start
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

### Этап 4 – Валидация Tutorials и Examples (1 день)

#### 4.1 **Валидация docs/tutorials/README.md**
**Что проверить:**
- Architecture Learning Path актуален
- Все cross-references работают
- Ссылки на реальные файлы корректны
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все ссылки
- Создать скрипт для проверки ссылок на основе найденных ссылок
- Проверить все ссылки на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить проверочный скрипт и зафиксировать результаты

#### 4.2 **Валидация docs/examples/README.md**
**Что проверить:**
- Examples Navigation актуален
- Quality Standards соответствуют реальности
- Все cross-references работают
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все ссылки
- Создать скрипт для проверки ссылок на основе найденных ссылок
- Проверить все ссылки на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить проверочный скрипт и зафиксировать результаты

#### 4.3 **Валидация docs/developer_guide/README.md**
**Что проверить:**
- v2.1 архитектура актуальна
- Extension Points работают
- Code Quality Standards соответствуют реальности
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все ссылки
- Создать скрипт для проверки ссылок на основе найденных ссылок
- Проверить все ссылки на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
задача получить работающие примеры кода в документации. находишь причину неисправности, правишь документацию, потом правишь тест, созданный на основе документации. документация первична. тест всегда основывается на документации.
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить проверочный скрипт и зафиксировать результаты

### Этап 5 – Валидация реальных примеров (1.5 дня)

#### 5.1 **Валидация examples/02_macd_zone_analysis.py** (🟡)
**Что проверить:**
- Миграционные примеры работают
- Legacy vs new секции актуальны
- Cross-references корректны

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров MACD
- Проверить работу legacy и new подходов
- Выполнить тестовый скрипт и зафиксировать результаты

#### 5.2 **Валидация examples/02a_universal_zones.py** (🟡)
**Что проверить:**
- Расширить как главный reference
- Все примеры Universal Pipeline работают
- Cross-references корректны

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров universal
- Проверить все cross-references на существование целевых файлов
- Выполнить тестовый скрипт и зафиксировать результаты

#### 5.3 **Валидация examples/05_strategies_demo.py** (🟢)
**Что проверить:**
- Universal Pipeline v2.1 работает
- Все примеры стратегий выполняются
- Cross-references корректны

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров strategies
- Проверить все cross-references на существование целевых файлов
- Выполнить тестовый скрипт и зафиксировать результаты

#### 5.4 **Валидация examples/06_regression_demo.py** (🟢)
**Что проверить:**
- Миграция работает
- Все примеры regression выполняются
- Cross-references корректны

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров regression
- Проверить все cross-references на существование целевых файлов
- Выполнить тестовый скрипт и зафиксировать результаты

#### 5.5 **Валидация examples/07_validation_demo.py** (🟢)
**Что проверить:**
- Миграция работает
- Все примеры validation выполняются
- Cross-references корректны

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров validation
- Проверить все cross-references на существование целевых файлов
- Выполнить тестовый скрипт и зафиксировать результаты

#### 5.6 **Валидация examples/README.md** (🟡)
**Что проверить:**
- Синхронизировать с docs/
- Все ссылки работают
- Quality Standards соответствуют реальности
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все ссылки
- Создать скрипт для проверки ссылок на основе найденных ссылок
- Проверить все ссылки на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить проверочный скрипт и зафиксировать результаты

#### 5.7 **Валидация research/notebooks/ (все файлы)** (🟢)
**Что проверить:**
- Все notebooks работают с --no-trap
- Cross-references корректны
- Неработающие notebooks исправлены
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое каждого файла в research/notebooks/
- Создать тестовый скрипт на основе найденных примеров
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт с --no-trap и зафиксировать результаты

#### 5.8 **Валидация README.md верхнего уровня**
**Что проверить:**
- Universal Pipeline v2.1 секция актуальна
- Все примеры кода работают
- Cross-references корректны
- Неактуальные ссылки исправлены
- Язык текста: русский (код остается без изменений)

**Как валидировать:**
- Проанализировать содержимое файла и извлечь все примеры кода
- Создать тестовый скрипт на основе найденных примеров main README
- Проверить все cross-references на существование целевых файлов
- Проверить язык текста - весь текст должен быть на русском (кроме кода)
- **НЕМЕДЛЕННО ИСПРАВИТЬ:** битые ссылки, простые ошибки в коде, очевидные проблемы с языком
- **ЗАФИКСИРОВАТЬ ДЛЯ ОТЛОЖЕННОГО ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания
- Выполнить тестовый скрипт и зафиксировать результаты

### Этап 6 – Финальная валидация и отчет (0.5 дня)

#### 6.1 **Создание отчета о проблемах**
**Что сделать:**
- Документировать все найденные проблемы
- Приоритизировать по критичности
- Создать план исправлений
- **ОБРАБОТАТЬ ОТЛОЖЕННЫЕ ИСПРАВЛЕНИЯ:** критические проблемы API, необходимость переписывания

**Как валидировать:**
- Проанализировать результаты всех предыдущих этапов
- Создать сводный отчет о проблемах
- Приоритизировать проблемы по критичности
- **ИСПРАВИТЬ КРИТИЧЕСКИЕ ПРОБЛЕМЫ:** API несоответствия, архитектурные проблемы
- Создать план исправлений для оставшихся проблем

#### 6.2 **Исправление критических проблем**
**Что исправить:**
- 🔴 файлы (требуют серьезного переписывания)
- 🟡 файлы (точечные правки)
- 🟢 файлы (проверить актуальность)
- **ПРИОРИТЕТ:** критические проблемы API, архитектурные несоответствия

**Как валидировать:**
- Проанализировать результаты валидации
- **ИСПРАВИТЬ КРИТИЧЕСКИЕ ПРОБЛЕМЫ:** API несоответствия, архитектурные проблемы
- Обновить статусы файлов
- Зафиксировать результаты исправлений

#### 6.3 **Финальная проверка**
**Что проверить:**
- Запустить полный тест документации
- Валидировать все cross-references
- Создать финальный отчет

**Как валидировать:**
- Проанализировать результаты всех этапов
- Создать финальный отчет о валидации
- Зафиксировать статус каждого файла
- Создать рекомендации по дальнейшему развитию

---

## 📊 Ожидаемые результаты

После выполнения всех этапов валидации:

1. **100% примеров кода работают** - все скрипты выполняются без ошибок
2. **Все cross-references корректны** - нет битых ссылок
3. **Документация соответствует коду** - API примеры актуальны
4. **Sphinx build проходит без ошибок** - документация собирается корректно
5. **Создан отчет о проблемах** - все найденные проблемы задокументированы и исправлены

---

## 🚀 Запуск валидации

Для запуска полной валидации:

```bash
# 1. Активировать виртуальное окружение
source venv_bquant_of_win/Scripts/activate  # Windows
# или
source venv_bquant_dell_lin/bin/activate    # Linux

# 2. Установить зависимости
pip install -e .

# 3. Запустить валидацию
python scripts/validate_documentation.py
```

**Время выполнения:** 4-5 дней  
**Приоритет:** ⭐⭐⭐ MANDATORY  
**Статус:** READY FOR EXECUTION
