# Ручное обновление документации (под контролем RTD)

Этот чек‑лист поможет локально собрать и проверить документацию, затем обновить «latest» на Read the Docs. Автогенерация API не используется (см. опциональный блок в SETUP_READTHEDOCS.md).

## 1) Установка зависимостей для доков

```bash
# В активированном виртуальном окружении проекта
pip install -e .[docs]

# Проверка (необязательно)
python -c "import sphinx, myst_parser; print(sphinx.__version__)"
```

## 2) Локальная сборка

```bash
# Из корня репозитория
python -m sphinx -b html docs docs/_build/html
```

Откройте `docs/_build/html/index.html` в браузере. Убедитесь, что нужные разделы видны.

Примечание: если отсутствуют файлы `_static/logo.png` или `_static/favicon.ico`, сборка может предупредить, но это не критично. Можно позже добавить заглушки или временно убрать параметры в `docs/conf.py`.

## 3) Проверка навигации и ссылок

- Проверьте, что пункты навигации из `docs/index.rst` доступны.
- Откройте `api/README.html` и проверьте переходы в подразделы:
  - Ссылки должны указывать на явные файлы: `core/README.md`, `data/README.md`, и т.д. (уже исправлено).
- Если страница не попадает в сборку — добавьте её путь в соответствующий `toctree` и пересоберите.

## 4) Строгая проверка предупреждений (опционально)

```bash
python -m sphinx -W -b html docs docs/_build/html
```
Если сборка падает — изучите текст предупреждения/ошибки и исправьте.

## 5) Синхронизация версий (только перед релизом)

Если готовите релиз, версии должны совпадать:
- `pyproject.toml` → `[project].version`
- `docs/conf.py` → `release`
- `bquant/__init__.py` → `__version__`

```txt
текущие значения — уже синхронизированы:

pyproject.toml: version = "0.0.1"
docs/conf.py: release = "0.0.1"
bquant/init.py: version = "0.0.1"
Если релиз сейчас не делаем

Пропускаем шаг 5 и переходим к коммиту/пушу (шаг 6):
git add -A
git commit -m "docs: update API pages and manuals"
git push origin main
RTD пересоберёт “latest” автоматически; проверьте Builds на RTD.
Если хотим выпустить новую версию (например, 0.0.2)

Обновите версии синхронно в трёх файлах:
pyproject.toml → [project].version = "0.0.2"
docs/conf.py → release = "0.0.2"
bquant/init.py → version = "0.0.2"
По желанию обновите CHANGELOG.md.
```

## 6) Коммит и пуш

```bash
git add -A
git commit -m "docs: update manuals and RTD setup"
git push origin <ветка>  # обычно main
```

Read the Docs автоматически пересоберёт «latest».

## 7) Контроль сборки на Read the Docs

- Откройте проект на RTD → Builds и убедитесь, что последний билд зелёный.
- Проверьте живую документацию.
- В случае ошибок/варнингов — смотрите логи, исправляйте и повторяйте шаги 2–6.

## 8) Версионирование документации (опционально)

Для отдельной «версии» документации под релиз:
1. Убедитесь, что версии синхронизированы (см. шаг 5).
2. Создайте тег и запушьте:
```bash
git tag vX.Y.Z
git push origin vX.Y.Z
```
3. На RTD → Versions активируйте тег и (по желанию) сделайте его `stable`.

---

Справочно:
- Подробный гайд, плюсы/минусы автогенерации и расширенные настройки — `SETUP_READTHEDOCS.md`.
