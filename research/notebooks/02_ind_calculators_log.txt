[LOG] Log started: 2025-10-27 09:07:02
[OUTPUT] Output will be written to: research/notebooks/02_ind_calculators_log.txt
[>>] Starting Демонстрация работы высокоуровневых калькуляторов индикаторов bquant.indicators.calculators
===============================================================================================================
[SCRIPT] Демонстрация работы высокоуровневых калькуляторов индикаторов bquant.indicators.calculators
[DATE] Started: 2025-10-27 09:07:02
===============================================================================================================
================================================================================
[STEP] STEP 1: Шаг 1: Загрузка тестовых данных
---------------------------------------
[INFO] Для демонстрации калькуляторов индикаторов используем sample-данные.
[INFO] 1.1. Загружаем sample-данные для тестирования:
Колонка 'time' преобразована в DatetimeIndex
Загружено 1000 строк данных
Структура: ['open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label']
Тип индекса: <class 'pandas.core.indexes.datetimes.DatetimeIndex'>
Диапазон дат: 2025-06-11 20:00:00+07:00 - 2025-08-12 13:00:00+07:00
[INFO] 1.2. Создание дополнительных датасетов для BatchCalculator:
Создано 3 датасета:
  - Основной: 1000 строк
  - Датасет 2: 500 строк
  - Датасет 3: 334 строк
[OK] Loading sample data completed successfully
================================================================================
[STEP] STEP 2: Шаг 2: Работа с IndicatorCalculator
-------------------------------------------
[INFO] IndicatorCalculator - это основной класс для удобного расчета технических индикаторов.
[INFO] 2.1. Создание экземпляра IndicatorCalculator:
Создан IndicatorCalculator:
  - Размер данных: (1000, 14)
  - Автозагрузка библиотек: True
  - Кэшированных результатов: 0
[INFO] 2.2. Расчет одиночного индикатора SMA:
Результат расчета SMA(20):
  - Название: sma
  - Размер данных: (1000, 1)
  - Колонки: ['sma_20']
  - Первые 5 значений:
                           sma_20
time                             
2025-06-11 20:00:00+07:00     NaN
2025-06-11 21:00:00+07:00     NaN
2025-06-11 22:00:00+07:00     NaN
2025-06-11 23:00:00+07:00     NaN
2025-06-12 00:00:00+07:00     NaN
[INFO] 2.3. Расчет множественных индикаторов:
Вычислено 3 индикаторов:
  - ema: (1000, 1)
  - rsi: (1000, 1)
  - bbands: (1000, 5)
[INFO] 2.4. Получение и анализ результатов:
Всего кэшированных результатов: 4
Доступные результаты: ['sma', 'ema', 'rsi', 'bbands']
RSI результат получен:
  - Размер: (1000, 1)
  - Статистика: min=20.33, max=100.00
[OK] Testing IndicatorCalculator completed successfully
================================================================================
[STEP] STEP 3: Шаг 3: Объединение результатов индикаторов
--------------------------------------------------
[INFO] IndicatorCalculator позволяет объединять результаты различных индикаторов в единый DataFrame.
[INFO] 3.1. Объединение всех результатов:
Объединенный датасет:
  - Размер: (1000, 22)
  - Исходные колонки: 14
  - Новые колонки: 8
  - Всего колонок: 22
[INFO] 3.2. Объединение выбранных индикаторов:
Выборочно объединенный датасет:
  - Размер: (1000, 17)
  - Выбранные индикаторы: ['sma', 'ema', 'rsi']
[INFO] 3.3. Анализ структуры объединенных данных:
Структура объединенных данных:
  - OHLCV колонки: ['open', 'high', 'low', 'close', 'volume']
  - Индикаторные колонки: ['accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label', 'sma_20', 'ema_12', 'rsi_14', 'bb_upper', 'bb_middle', 'bb_lower', 'bb_width', 'bb_percent']
Первые 10 колонок:
['open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma']
[OK] Testing result combination completed successfully
================================================================================
[STEP] STEP 4: Шаг 4: Удобные функции для расчета индикаторов
------------------------------------------------------
[INFO] Модуль предоставляет удобные функции для быстрого расчета популярных индикаторов.
[INFO] 4.1. Расчет MACD через удобную функцию:
MACD рассчитан через удобную функцию:
  - Размер: (1000, 3)
  - Колонки: ['macd', 'macd_signal', 'macd_hist']
  - Первые 5 значений MACD:
                               macd  macd_signal  macd_hist
time                                                       
2025-06-11 20:00:00+07:00  0.000000     0.000000   0.000000
2025-06-11 21:00:00+07:00  0.171298     0.095166   0.076132
2025-06-11 22:00:00+07:00  0.081359     0.089507  -0.008148
2025-06-11 23:00:00+07:00 -0.063717     0.037602  -0.101319
2025-06-12 00:00:00+07:00 -0.380957    -0.086910  -0.294047
[INFO] 4.2. Расчет RSI через удобную функцию:
RSI рассчитан через удобную функцию:
  - Тип: <class 'pandas.core.series.Series'>
  - Размер: 1000
  - Статистика: min=20.33, max=100.00, mean=50.63
[INFO] 4.3. Расчет Bollinger Bands через удобную функцию:
Bollinger Bands рассчитаны через удобную функцию:
  - Размер: (1000, 5)
  - Колонки: ['bb_upper', 'bb_middle', 'bb_lower', 'bb_width', 'bb_percent']
  - Первые 5 значений верхней полосы:
time
2025-06-11 20:00:00+07:00   NaN
2025-06-11 21:00:00+07:00   NaN
2025-06-11 22:00:00+07:00   NaN
2025-06-11 23:00:00+07:00   NaN
2025-06-12 00:00:00+07:00   NaN
Name: bb_upper, dtype: float64
[INFO] 4.4. Расчет множественных скользящих средних:
Множественные скользящие средние рассчитаны:
  - Размер: (1000, 6)
  - Периоды: [10, 20, 50]
  - Колонки: ['sma_10', 'ema_10', 'sma_20', 'ema_20', 'sma_50', 'ema_50']
[OK] Testing convenience functions completed successfully
================================================================================
[STEP] STEP 5: Шаг 5: Создание стандартных наборов индикаторов
-------------------------------------------------------
[INFO] Модуль предоставляет функцию для создания стандартных наборов технических индикаторов.
[INFO] 5.1. Создание стандартного набора индикаторов:
Стандартный набор индикаторов создан:
  - Количество индикаторов: 8
  - Доступные индикаторы: ['sma', 'ema', 'rsi', 'macd', 'bbands', 'sma_20', 'sma_50', 'ema_26']
[INFO] 5.2. Анализ результатов стандартного набора:
  - sma:
    * Размер данных: (1000, 1)
    * Колонки: ['sma_20']
    * Метаданные: {'period': 20, 'calculation_method': 'rolling_mean', 'first_valid_index': Timestamp('2025-06-12 16:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00')}
  - ema:
    * Размер данных: (1000, 1)
    * Колонки: ['ema_12']
    * Метаданные: {'period': 12, 'calculation_method': 'ewm_mean', 'first_valid_index': Timestamp('2025-06-11 20:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00')}
  - rsi:
    * Размер данных: (1000, 1)
    * Колонки: ['rsi_14']
    * Метаданные: {'period': 14, 'calculation_method': 'ewm_smoothing', 'overbought_level': 70, 'oversold_level': 30, 'first_valid_index': Timestamp('2025-06-11 21:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00')}
  - macd:
    * Размер данных: (1000, 3)
    * Колонки: ['macd', 'macd_signal', 'macd_hist']
    * Метаданные: {'fast_period': 12, 'slow_period': 26, 'signal_period': 9, 'calculation_method': 'ema_difference', 'first_valid_index': Timestamp('2025-06-11 20:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00')}
  - bbands:
    * Размер данных: (1000, 5)
    * Колонки: ['bb_upper', 'bb_middle', 'bb_lower', 'bb_width', 'bb_percent']
    * Метаданные: {'period': 20, 'std_dev': 2.0, 'calculation_method': 'sma_plus_std', 'first_valid_index': Timestamp('2025-06-12 16:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00')}
  - sma_20:
    * Размер данных: (1000, 1)
    * Колонки: ['sma_20']
    * Метаданные: {'period': 20, 'calculation_method': 'rolling_mean'}
  - sma_50:
    * Размер данных: (1000, 1)
    * Колонки: ['sma_50']
    * Метаданные: {'period': 50, 'calculation_method': 'rolling_mean'}
  - ema_26:
    * Размер данных: (1000, 1)
    * Колонки: ['ema_26']
    * Метаданные: {'period': 26, 'calculation_method': 'ewm_mean'}
[INFO] 5.3. Создание пользовательского набора индикаторов:
Пользовательский набор индикаторов создан:
  - Количество индикаторов: 6
  - Доступные индикаторы: ['sma_5', 'sma_10', 'ema_5', 'ema_10', 'rsi_7', 'rsi_21']
  - sma_5:
    * Размер данных: (1000, 1)
    * Колонки: ['sma_5']
    * Метаданные: {'period': 5, 'calculation_method': 'rolling_mean', 'first_valid_index': Timestamp('2025-06-12 00:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00'), 'alias': 'sma_5'}
  - sma_10:
    * Размер данных: (1000, 1)
    * Колонки: ['sma_10']
    * Метаданные: {'period': 10, 'calculation_method': 'rolling_mean', 'first_valid_index': Timestamp('2025-06-12 06:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00'), 'alias': 'sma_10'}
  - ema_5:
    * Размер данных: (1000, 1)
    * Колонки: ['ema_5']
    * Метаданные: {'period': 5, 'calculation_method': 'ewm_mean', 'first_valid_index': Timestamp('2025-06-11 20:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00'), 'alias': 'ema_5'}
  - ema_10:
    * Размер данных: (1000, 1)
    * Колонки: ['ema_10']
    * Метаданные: {'period': 10, 'calculation_method': 'ewm_mean', 'first_valid_index': Timestamp('2025-06-11 20:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00'), 'alias': 'ema_10'}
  - rsi_7:
    * Размер данных: (1000, 1)
    * Колонки: ['rsi_7']
    * Метаданные: {'period': 7, 'calculation_method': 'ewm_smoothing', 'overbought_level': 70, 'oversold_level': 30, 'first_valid_index': Timestamp('2025-06-11 21:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00'), 'alias': 'rsi_7'}
  - rsi_21:
    * Размер данных: (1000, 1)
    * Колонки: ['rsi_21']
    * Метаданные: {'period': 21, 'calculation_method': 'ewm_smoothing', 'overbought_level': 70, 'oversold_level': 30, 'first_valid_index': Timestamp('2025-06-11 21:00:00+0700', tz='UTC+07:00'), 'last_valid_index': Timestamp('2025-08-12 13:00:00+0700', tz='UTC+07:00'), 'alias': 'rsi_21'}
[OK] Testing indicator suites completed successfully
================================================================================
[STEP] STEP 6: Шаг 6: Работа с BatchCalculator
---------------------------------------
[INFO] BatchCalculator позволяет обрабатывать множественные датасеты одновременно.
[INFO] 6.1. Создание BatchCalculator:
BatchCalculator создан:
  - Количество датасетов: 3
  - Названия датасетов: ['main', 'subset_2', 'subset_3']
[INFO] 6.2. Расчет одного индикатора для всех датасетов:
SMA(20) рассчитан для всех датасетов:
  - main: (1000, 1)
  - subset_2: (500, 1)
  - subset_3: (334, 1)
[INFO] 6.3. Расчет стандартного набора для всех датасетов:
Стандартный набор рассчитан для всех датасетов:
  - main: 8 индикаторов
    * Доступные: ['sma', 'ema', 'rsi', 'macd', 'bbands', 'sma_20', 'sma_50', 'ema_26']
  - subset_2: 8 индикаторов
    * Доступные: ['sma', 'ema', 'rsi', 'macd', 'bbands', 'sma_20', 'sma_50', 'ema_26']
  - subset_3: 8 индикаторов
    * Доступные: ['sma', 'ema', 'rsi', 'macd', 'bbands', 'sma_20', 'sma_50', 'ema_26']
[OK] Testing BatchCalculator completed successfully
================================================================================
[STEP] STEP 7: Шаг 7: Валидация данных для индикаторов
-----------------------------------------------
[INFO] Модуль предоставляет функции для валидации данных без выполнения расчетов.
[INFO] 7.1. Валидация корректных данных:
Валидация данных для различных индикаторов:
  - sma: ✅ Валидны
  - ema: ✅ Валидны
  - rsi: ✅ Валидны
  - bbands: ✅ Валидны
[INFO] 7.2. Валидация некорректных данных:
Валидация некорректных данных:
  - sma: ✅ Валидны
  - ema: ✅ Валидны
  - rsi: ✅ Валидны
  - bbands: ✅ Валидны
[INFO] 7.3. Валидация данных с недостаточным количеством записей:
Валидация коротких данных:
  - sma: ❌ Невалидны
  - ema: ❌ Невалидны
  - rsi: ❌ Невалидны
  - bbands: ❌ Невалидны
[OK] Testing data validation completed successfully
================================================================================
[STEP] STEP 8: Шаг 8: Получение информации о доступных индикаторах
-----------------------------------------------------------
[INFO] Модуль предоставляет функции для получения информации о доступных индикаторах.
[INFO] 8.1. Получение списка доступных индикаторов:
Доступные индикаторы:
  - Общее количество: 164
  - custom: 5 индикаторов
    * Примеры: ['sma', 'ema', 'rsi', 'macd', 'bbands']
  - preloaded: 1 индикаторов
    * Примеры: ['macd_preloaded']
  - library: 158 индикаторов
    * Примеры: ['pandas_ta_aberration', 'pandas_ta_accbands', 'pandas_ta_ad', 'pandas_ta_adosc', 'pandas_ta_adx']
[INFO] 8.2. Анализ типов индикаторов:
Типы индикаторов:
  - Moving Averages: 6
  - RSI: 4
  - MACD: 3
  - Bollinger Bands: 2
  - Other: 149
[OK] Testing indicator information completed successfully
================================================================================
[STEP] STEP 9: Шаг 9: Управление кэшем и производительность
----------------------------------------------------
[INFO] IndicatorCalculator предоставляет возможности управления кэшем и оптимизации производительности.
[INFO] 9.1. Тестирование производительности с кэшем:
Первый расчет SMA(20): 0.0017 сек
Второй расчет SMA(20): 0.0012 сек
Ускорение: 1.39x
[INFO] 9.2. Управление кэшем:
Размер кэша до очистки: 1
Размер кэша после очистки: 0
[INFO] 9.3. Сравнение производительности различных подходов:
Сравнение производительности подходов:
  - IndicatorCalculator: 0.0022 сек
  - calculate_indicator: 0.0012 сек
  - Direct calculation: 0.0003 сек
[OK] Testing cache management and performance completed successfully
================================================================================
[STEP] STEP 10: Шаг 10: Анализ результатов и создание комплексных датасетов
--------------------------------------------------------------------
[INFO] Создание комплексных датасетов с множественными индикаторами для анализа.
[INFO] 10.1. Создание комплексного датасета с основными индикаторами:
Комплексный набор индикаторов создан:
  - Количество индикаторов: 8
  - Доступные индикаторы: ['sma_10', 'sma_20', 'sma_50', 'ema_12', 'ema_26', 'rsi_14', 'rsi_21', 'bbands_20_2']
[INFO] 10.2. Объединение в единый датасет:
Комплексный датасет создан:
  - Размер: (1000, 26)
  - Исходные колонки: 14
  - Индикаторные колонки: 12
[INFO] 10.3. Анализ качества данных:
Анализ качества комплексного датасета:
  - Колонки с NaN значениями:
    * regular_bullish: 1000 NaN значений
    * regular_bullish_label: 1000 NaN значений
    * regular_bearish: 1000 NaN значений
    * regular_bearish_label: 1000 NaN значений
    * sma_10: 9 NaN значений
    * sma_20: 19 NaN значений
    * sma_50: 49 NaN значений
    * rsi_14: 1 NaN значений
    * rsi_21: 1 NaN значений
    * bbands_20_2_bb_upper: 19 NaN значений
    * bbands_20_2_bb_middle: 19 NaN значений
    * bbands_20_2_bb_lower: 19 NaN значений
    * bbands_20_2_bb_width: 19 NaN значений
    * bbands_20_2_bb_percent: 19 NaN значений
  - Статистика по основным индикаторам:
    * sma_20: min=3275.8665, max=3432.2993, mean=3350.6624
    * rsi_14: min=20.3349, max=100.0000, mean=50.6339
[OK] Creating comprehensive datasets completed successfully
================================================================================
[STEP] STEP 11: Заключение
------------------------------
[INFO] Мы протестировали все основные компоненты высокоуровневых калькуляторов индикаторов BQuant:
[OK] IndicatorCalculator - основной калькулятор для работы с индикаторами
[OK] BatchCalculator - пакетная обработка множественных датасетов
[OK] Удобные функции для расчета популярных индикаторов
[OK] Создание стандартных и пользовательских наборов индикаторов
[OK] Валидация данных для индикаторов
[OK] Управление результатами и кэшированием
[INFO] Протестированы функции расчета индикаторов:
[+] calculate_indicator() - универсальная функция расчета
[+] calculate_macd() - расчет MACD
[+] calculate_rsi() - расчет RSI
[+] calculate_bollinger_bands() - расчет Bollinger Bands
[+] calculate_moving_averages() - расчет множественных скользящих средних
[+] create_indicator_suite() - создание стандартных наборов
[INFO] Высокоуровневые калькуляторы BQuant предоставляют:
[*] Удобный интерфейс для работы с техническими индикаторами
[*] Автоматическую загрузку и управление библиотеками
[*] Эффективное кэширование результатов
[*] Пакетную обработку множественных датасетов
[*] Валидацию данных без выполнения расчетов
[*] Создание комплексных наборов индикаторов
[INFO] Это демонстрирует мощь и удобство высокоуровневых калькуляторов BQuant для технического анализа.

[END] Script finished successfully!
[END] Log ended: 2025-10-27 09:07:02
[TIME] Duration: 0:00:00.167498
