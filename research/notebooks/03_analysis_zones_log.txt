[LOG] Log started: 2025-10-06 13:40:56
[OUTPUT] Output will be written to: research\notebooks\03_analysis_zones_log.txt
[>>] Starting Изучаем анализ зон, их характеристик и последовательностей
==============================================================================
[SCRIPT] Изучаем анализ зон, их характеристик и последовательностей
[DATE] Started: 2025-10-06 13:40:56
==============================================================================
================================================================================
[STEP] STEP 1: Шаг 1: Инициализация и обзор
------------------------------------
[INFO] Изучаем модуль анализа зон bquant.analysis.zones
Доступные компоненты:
  - Zone - базовый класс для представления зон
  - ZoneAnalyzer - базовый анализатор зон
  - ZoneFeatures - характеристики зон
  - ZoneFeaturesAnalyzer - анализ характеристик зон
  - ZoneSequenceAnalyzer - анализ последовательностей и кластеризация

Создание тестовых данных...
Создан тестовый датасет: (300, 8)
Колонки: ['open', 'high', 'low', 'close', 'volume', 'returns', 'volatility', 'price_range']
Период: 2024-01-01 00:00:00 - 2024-01-13 11:00:00
================================================================================
[STEP] STEP 2: Шаг 2: Создание базовых зон
-----------------------------------
[INFO] Создаем и настраиваем различные типы зон
Создано 13 зон:
  - Бычьи зоны: 5
  - Медвежьи зоны: 5
  - Нейтральные зоны: 3
[OK] Creating basic zones completed successfully
================================================================================
[STEP] STEP 3: Шаг 3: Анализ базовых свойств зон
-----------------------------------------
[INFO] Анализируем базовые свойства созданных зон
3.1. Анализ длительности зон:
  - bull_zone_0 (bull):
    * Длительность: 2 days 11:00:00
    * Диапазон цен: 17.9366
    * Средняя цена: 92.0301
    * Сила: 0.788
    * Уверенность: 0.996
  - bull_zone_1 (bull):
    * Длительность: 2 days 11:00:00
    * Диапазон цен: 0.4259
    * Средняя цена: 82.4825
    * Сила: 0.875
    * Уверенность: 0.950
  - bull_zone_2 (bull):
    * Длительность: 2 days 11:00:00
    * Диапазон цен: 8.3244
    * Средняя цена: 88.1763
    * Сила: 0.897
    * Уверенность: 0.826
  - bull_zone_3 (bull):
    * Длительность: 2 days 11:00:00
    * Диапазон цен: 5.3522
    * Средняя цена: 96.1774
    * Сила: 0.978
    * Уверенность: 0.845
  - bull_zone_4 (bull):
    * Длительность: 2 days 11:00:00
    * Диапазон цен: 0.5733
    * Средняя цена: 97.0123
    * Сила: 0.830
    * Уверенность: 0.888
  - bear_zone_0 (bear):
    * Длительность: 1 days 05:00:00
    * Диапазон цен: 13.8306
    * Средняя цена: 85.4232
    * Сила: 0.977
    * Уверенность: 0.772
  - bear_zone_1 (bear):
    * Длительность: 1 days 05:00:00
    * Диапазон цен: 2.5438
    * Средняя цена: 94.7731
    * Сила: 0.679
    * Уверенность: 0.966
  - bear_zone_2 (bear):
    * Длительность: 1 days 05:00:00
    * Диапазон цен: 1.7056
    * Средняя цена: 98.0007
    * Сила: 0.714
    * Уверенность: 0.945
  - bear_zone_3 (bear):
    * Длительность: 1 days 05:00:00
    * Диапазон цен: 6.5969
    * Средняя цена: 94.0005
    * Сила: 0.939
    * Уверенность: 0.976
  - bear_zone_4 (bear):
    * Длительность: 1 days 05:00:00
    * Диапазон цен: 3.3711
    * Средняя цена: 95.0401
    * Сила: 0.902
    * Уверенность: 0.838
  - neutral_zone_0 (neutral):
    * Длительность: 1 days 15:00:00
    * Диапазон цен: 0.7018
    * Средняя цена: 79.3289
    * Сила: 0.562
    * Уверенность: 0.553
  - neutral_zone_1 (neutral):
    * Длительность: 1 days 15:00:00
    * Диапазон цен: 0.5831
    * Средняя цена: 79.6869
    * Сила: 0.694
    * Уверенность: 0.781
  - neutral_zone_2 (neutral):
    * Длительность: 1 days 15:00:00
    * Диапазон цен: 0.0882
    * Средняя цена: 93.4571
    * Сила: 0.590
    * Уверенность: 0.745

3.2. Сводная статистика:
  - Средняя длительность: 1 days 18:50:46.153846153
  - Средний диапазон цен: 4.7718
  - Средняя сила: 0.802
  - Средняя уверенность: 0.852
[OK] Analyzing basic zone properties completed successfully
================================================================================
[STEP] STEP 4: Шаг 4: Создание ZoneAnalyzer
------------------------------------
[INFO] Создаем и настраиваем анализатор зон
Создан анализатор зон:
  - Имя: ZoneAnalyzer
  - Конфигурация: {'min_zone_duration': 10, 'max_zone_duration': 100, 'min_price_change': 0.001, 'enable_volume_analysis': True, 'enable_volatility_analysis': True}
  - Минимальная длительность: 10 часов
[OK] Creating ZoneAnalyzer completed successfully
================================================================================
[STEP] STEP 5: Шаг 5: Анализ характеристик зон
---------------------------------------
[INFO] Анализируем детальные характеристики зон с помощью ZoneFeaturesAnalyzer
5.1. Создание характеристик зон:
  - Создано характеристик: 13

5.2. Анализ характеристик по типам зон:
  - BULL зоны (5):
    * Средняя длительность: 2 days 11:00:00
    * Средняя доходность: -0.0044
    * Средняя волатильность: 0.0197
    * Средний объем: 5790
  - BEAR зоны (5):
    * Средняя длительность: 1 days 05:00:00
    * Средняя доходность: 0.0378
    * Средняя волатильность: 0.0206
    * Средний объем: 5984
  - NEUTRAL зоны (3):
    * Средняя длительность: 1 days 15:00:00
    * Средняя доходность: 0.0051
    * Средняя волатильность: 0.0191
    * Средний объем: 6026
[OK] Analyzing zone features completed successfully
================================================================================
[STEP] STEP 6: Шаг 6: Анализ последовательностей зон
---------------------------------------------
[INFO] Анализируем последовательности и переходы между зонами
6.1. Анализ переходов между зонами:
  - Проанализировано переходов: 12

6.2. Статистика переходов:
  - bull → bull: 1 раз
  - bull → neutral: 2 раз
  - neutral → bull: 1 раз
  - neutral → bear: 2 раз
  - bear → bull: 2 раз
  - bull → bear: 2 раз
  - bear → neutral: 1 раз
  - bear → bear: 1 раз

6.3. Характеристики переходов:
  - bull → bull:
    * Средняя длительность до: 2 days 11:00:00
    * Средняя длительность после: 2 days 11:00:00
    * Средняя доходность до: -0.1776
    * Средняя доходность после: 0.0052
  - bull → bear:
    * Средняя длительность до: 2 days 11:00:00
    * Средняя длительность после: 1 days 05:00:00
    * Средняя доходность до: 0.0257
    * Средняя доходность после: -0.0203
  - bull → neutral:
    * Средняя длительность до: 2 days 11:00:00
    * Средняя длительность после: 1 days 15:00:00
    * Средняя доходность до: 0.0521
    * Средняя доходность после: 0.0081
  - bear → bull:
    * Средняя длительность до: 1 days 05:00:00
    * Средняя длительность после: 2 days 11:00:00
    * Средняя доходность до: 0.0969
    * Средняя доходность после: 0.0257
  - bear → bear:
    * Средняя длительность до: 1 days 05:00:00
    * Средняя длительность после: 1 days 05:00:00
    * Средняя доходность до: -0.0678
    * Средняя доходность после: 0.0361
  - bear → neutral:
    * Средняя длительность до: 1 days 05:00:00
    * Средняя длительность после: 1 days 15:00:00
    * Средняя доходность до: 0.0272
    * Средняя доходность после: -0.0009
  - neutral → bull:
    * Средняя длительность до: 1 days 15:00:00
    * Средняя длительность после: 2 days 11:00:00
    * Средняя доходность до: 0.0089
    * Средняя доходность после: 0.0991
  - neutral → bear:
    * Средняя длительность до: 1 days 15:00:00
    * Средняя длительность после: 1 days 05:00:00
    * Средняя доходность до: 0.0032
    * Средняя доходность после: 0.0969
[OK] Analyzing zone sequences completed successfully
================================================================================
[STEP] STEP 7: Шаг 7: Кластеризация зон
--------------------------------
[INFO] Выполняем кластеризацию зон по их характеристикам
7.1. Подготовка данных для кластеризации:
  - Матрица признаков: (13, 7)
  - Признаки: длительность, доходность, диапазон цен, объем, волатильность, импульс, ускорение

7.2. Кластеризация по типам зон:
  - Кластер BULL:
    * Размер: 5 зон
    * Средняя длительность: 2 days 11:00:00
    * Средняя доходность: -0.0044
    * Средняя волатильность: 0.0197
    * Зоны: bull_zone_0, bull_zone_1, bull_zone_2...
  - Кластер BEAR:
    * Размер: 5 зон
    * Средняя длительность: 1 days 05:00:00
    * Средняя доходность: 0.0378
    * Средняя волатильность: 0.0206
    * Зоны: bear_zone_0, bear_zone_1, bear_zone_2...
  - Кластер NEUTRAL:
    * Размер: 3 зон
    * Средняя длительность: 1 days 15:00:00
    * Средняя доходность: 0.0051
    * Средняя волатильность: 0.0191
    * Зоны: neutral_zone_0, neutral_zone_1, neutral_zone_2
[OK] Clustering zones completed successfully
================================================================================
[STEP] STEP 8: Шаг 8: Создание ZoneAnalyzer
------------------------------------
[INFO] Создаем и тестируем основной анализатор зон
Создан основной анализатор зон:
  - Имя: ZoneAnalyzer
  - Конфигурация: {'min_zone_duration': 5, 'max_zone_duration': 200, 'min_price_change': 0.0005, 'enable_volume_analysis': True, 'enable_volatility_analysis': True, 'enable_sequence_analysis': True}

8.1. Тестирование валидации данных:
  - Валидность данных: True

8.2. Тестирование подготовки данных:
  - Подготовленные данные: (300, 8)
  - Отсортированы по времени: True
[OK] Creating and testing ZoneAnalyzer completed successfully
================================================================================
[STEP] STEP 9: Шаг 9: Интеграция всех анализов
---------------------------------------
[INFO] Интегрируем все результаты анализа зон
9.1. Сводка по типам зон:
  - BULL зоны:
    * Количество: 5
    * Средняя длительность: 2 days 11:00:00
    * Средняя сила: 0.874
    * Средняя уверенность: 0.901
    * Средняя доходность: -0.0044
    * Средняя волатильность: 0.0197
  - BEAR зоны:
    * Количество: 5
    * Средняя длительность: 1 days 05:00:00
    * Средняя сила: 0.842
    * Средняя уверенность: 0.899
    * Средняя доходность: 0.0378
    * Средняя волатильность: 0.0206
  - NEUTRAL зоны:
    * Количество: 3
    * Средняя длительность: 1 days 15:00:00
    * Средняя сила: 0.616
    * Средняя уверенность: 0.693
    * Средняя доходность: 0.0051
    * Средняя волатильность: 0.0191

9.2. Анализ переходов:
  - bull → bull:
    * Количество: 1
    * Средняя длительность до: 2 days 11:00:00
    * Средняя длительность после: 2 days 11:00:00
    * Средняя доходность до: -0.1776
    * Средняя доходность после: 0.0052
  - bull → neutral:
    * Количество: 2
    * Средняя длительность до: 2 days 11:00:00
    * Средняя длительность после: 1 days 15:00:00
    * Средняя доходность до: 0.0521
    * Средняя доходность после: 0.0081
  - neutral → bull:
    * Количество: 1
    * Средняя длительность до: 1 days 15:00:00
    * Средняя длительность после: 2 days 11:00:00
    * Средняя доходность до: 0.0089
    * Средняя доходность после: 0.0991
  - neutral → bear:
    * Количество: 2
    * Средняя длительность до: 1 days 15:00:00
    * Средняя длительность после: 1 days 05:00:00
    * Средняя доходность до: 0.0032
    * Средняя доходность после: 0.0969
  - bear → bull:
    * Количество: 2
    * Средняя длительность до: 1 days 05:00:00
    * Средняя длительность после: 2 days 11:00:00
    * Средняя доходность до: 0.0969
    * Средняя доходность после: 0.0257
  - bull → bear:
    * Количество: 2
    * Средняя длительность до: 2 days 11:00:00
    * Средняя длительность после: 1 days 05:00:00
    * Средняя доходность до: 0.0257
    * Средняя доходность после: -0.0203
  - bear → neutral:
    * Количество: 1
    * Средняя длительность до: 1 days 05:00:00
    * Средняя длительность после: 1 days 15:00:00
    * Средняя доходность до: 0.0272
    * Средняя доходность после: -0.0009
  - bear → bear:
    * Количество: 1
    * Средняя длительность до: 1 days 05:00:00
    * Средняя длительность после: 1 days 05:00:00
    * Средняя доходность до: -0.0678
    * Средняя доходность после: 0.0361
[OK] Integrating all zone analyses completed successfully
================================================================================
[STEP] STEP 10: Шаг 10: Экспорт результатов анализа
--------------------------------------------
[INFO] Экспортируем все результаты анализа зон
10.1. Создание сводного отчета:
  - Сводный отчет создан
  - Анализировано зон: 13
  - Проанализировано переходов: 12
  - Создано кластеров: 3

10.2. Экспорт результатов:
  - Ошибка экспорта: Object of type Timedelta is not JSON serializable
[OK] Exporting zone analysis results completed successfully
================================================================================
[STEP] STEP 11: Завершение
------------------------------
[INFO] Демонстрация анализа зон bquant.analysis.zones завершена
Изучены:
  ✓ Zone - базовый класс для представления зон
  ✓ ZoneAnalyzer - базовый анализатор зон
  ✓ ZoneFeatures - детальные характеристики зон
  ✓ ZoneFeaturesAnalyzer - анализ характеристик зон
  ✓ ZoneSequenceAnalyzer - анализ последовательностей и кластеризация
  ✓ Анализ переходов между зонами
  ✓ Кластеризация зон по характеристикам
  ✓ Экспорт результатов анализа

Готово к созданию скриптов для других модулей анализа!

[END] Script finished successfully!
[END] Log ended: 2025-10-06 13:40:57
[TIME] Duration: 0:00:00.131122
