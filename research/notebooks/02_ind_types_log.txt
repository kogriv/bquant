[LOG] Log started: 2025-09-03 19:32:14
[OUTPUT] Output will be written to: research\notebooks\02_ind_types_log.txt
[>>] Starting Демонстрация работы с новой архитектурой индикаторов BQuant
===============================================================================
[SCRIPT] Демонстрация работы с новой архитектурой индикаторов BQuant
[DATE] Started: 2025-09-03 19:32:14
===============================================================================
================================================================================
[STEP] STEP 1: Обзор новой архитектуры индикаторов
-------------------------------------------
[INFO] BQuant поддерживает три источника индикаторов:
[INFO] 1. PRELOADED - готовые индикаторы для работы с предзагруженными данными
[INFO] 2. LIBRARY - индикаторы на основе внешних библиотек (TA-Lib, pandas-ta)
[INFO] 3. CUSTOM - пользовательские индикаторы с собственной логикой расчета
Загружены тестовые данные: 1000 строк, колонки: ['time', 'open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label']
========================================
[SUBSTEP] PRELOADED индикаторы
==============================
[INFO] PRELOADED индикаторы работают с уже рассчитанными данными (например, из TradingView)
Default columns: ['macd', 'signal']
Indicator type: PRELOADED
Description: MACD indicator for working with pre-calculated data
Required fields: {'macd': 'MACD line values (numeric)', 'signal': 'Signal line values (numeric)'}
Optional fields: {'histogram': 'MACD histogram values (numeric)', 'rsi': 'RSI values if available (numeric)'}
Created PRELOADED indicator: macd_preloaded
[INFO] Extracting MACD data from preloaded dataset:
Extracted 1000 rows
Columns: ['macd', 'signal']
Sample MACD values:
         macd    signal
995 -7.163495 -8.374874
996 -6.873237 -8.074547
997 -6.176617 -7.694961
998 -5.556853 -7.267339
999 -5.398442 -6.893560
[INFO] Demonstrating analysis methods:
Data validation: True
Statistics:
  macd: min=-14.9674, max=17.3877, mean=0.2169
  signal: min=-12.5806, max=15.0894, mean=0.2564
MACD trending up: False
MACD trending down: False
Bullish crossovers: 39
Bearish crossovers: 38
Metadata:
  Source: preloaded
  Method: extract_existing
  Extracted columns: ['macd', 'signal']
  Total records: 1000
========================================
[SUBSTEP] LIBRARY индикаторы
==============================
[INFO] LIBRARY индикаторы используют внешние библиотеки (например, TA-Lib, pandas-ta)
Created LIBRARY indicator: sma_library
[INFO] Calculating SMA using library function:
Calculated 1000 rows
Columns: ['sma_20']
Sample SMA values:
         sma_20
995  3353.65200
996  3352.83975
997  3352.55400
998  3352.17925
999  3351.99250
[INFO] Accessing native library function:
Native function: sma_library_function
Function callable: True
Direct function call result: ['sma_10']
========================================
[SUBSTEP] CUSTOM индикаторы
==============================
Created CUSTOM indicator: rsi_14
CUSTOM indicator type: CUSTOM
Required fields: {'close': 'Close price values (numeric)'}
[INFO] Calculating RSI using custom implementation:
Calculated 1000 rows
Columns: ['rsi_14']
Sample RSI values:
        rsi_14
995  44.550168
996  42.292035
997  46.383610
998  46.421180
999  42.899660
RSI range: 20.33 to 83.73
======================================================================
[SUBSTEP] IndicatorFactory - универсальный способ создания индикаторов
============================================================
[INFO] IndicatorFactory предоставляет единый интерфейс для создания всех типов индикаторов
[INFO] Available indicators:
Total indicators: 6
Indicator names: ['sma', 'ema', 'rsi', 'macd', 'bbands', 'macd_preloaded']
[INFO] Creating indicators through factory:
Created SMA via factory: sma, period: 20
Created MACD via factory: macd_preloaded
[INFO] Indicator information:
SMA info: {'name': 'sma', 'source': 'custom', 'class': 'SimpleMovingAverage', 'description': 'Simple Moving Average with 20 period'}
MACD info: {'name': 'macd_preloaded', 'source': 'preloaded', 'class': 'MACDPreloadedIndicator', 'description': 'MACD индикатор (PRELOADED) - извлекает уже рассчитанные значения MACD и signal из данных. Параметры оригинального расчета: fast=12, slow=26, smoothing=9, цена=close'}
[INFO] Calculating indicators created via factory:
SMA factory result: ['sma_20']
MACD factory result: ['macd', 'signal']
========================================
[SUBSTEP] Сравнение всех подходов
==============================
[INFO] Comparison of all three approaches:
Comparison table:
 Approach Indicator            Columns  Rows    Source
PRELOADED      MACD ['macd', 'signal']  1000 preloaded
  LIBRARY       SMA         ['sma_20']  1000   library
   CUSTOM       RSI         ['rsi_14']  1000    custom
  FACTORY  SMA+MACD         ['sma_20']  1000   unknown
[INFO] Performance analysis:
PRELOADED: 1000 rows - preloaded
LIBRARY: 1000 rows - library
CUSTOM: 1000 rows - custom
FACTORY: 1000 rows - unknown
[INFO] Metadata analysis:
PRELOADED metadata keys: ['source', 'calculation_method', 'original_params', 'extracted_columns', 'first_valid_index', 'last_valid_index', 'total_records', 'nan_counts']
LIBRARY metadata keys: ['library_function', 'source', 'calculation_method']
CUSTOM metadata keys: ['source', 'calculation_method', 'parameters', 'total_records']
FACTORY metadata keys: ['period', 'calculation_method', 'first_valid_index', 'last_valid_index']
================================================================================
[STEP] STEP 2: Заключение
------------------------------
[INFO] Новая архитектура индикаторов BQuant предоставляет:
[INFO] ✅ Единообразный интерфейс для всех типов индикаторов
[INFO] ✅ Гибкость в выборе источника данных (PRELOADED, LIBRARY, CUSTOM)
[INFO] ✅ Универсальную фабрику для создания индикаторов
[INFO] ✅ Совместимость с существующим кодом
[INFO] ✅ Расширяемость для новых типов индикаторов
[INFO] Рекомендации по использованию:
[INFO] • PRELOADED: для работы с готовыми данными (TradingView, MT5)
[INFO] • LIBRARY: для использования внешних библиотек (TA-Lib, pandas-ta)
[INFO] • CUSTOM: для реализации собственной логики расчета
[INFO] • FACTORY: для универсального создания индикаторов
Демонстрация завершена успешно!
