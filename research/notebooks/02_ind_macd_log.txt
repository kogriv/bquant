[LOG] Log started: 2025-10-06 13:35:09
[OUTPUT] Output will be written to: research\notebooks\02_ind_macd_log.txt
[>>] Starting Демонстрация работы специализированного MACD анализатора bquant.indicators.macd
===================================================================================================
[SCRIPT] Демонстрация работы специализированного MACD анализатора bquant.indicators.macd
[DATE] Started: 2025-10-06 13:35:09
===================================================================================================
================================================================================
[STEP] STEP 1: Шаг 1: Загрузка тестовых данных
---------------------------------------
[INFO] Для демонстрации MACD анализатора используем sample-данные.
[INFO] 1.1. Загружаем sample-данные для тестирования:
Колонка 'time' преобразована в DatetimeIndex
Загружено 1000 строк данных
Структура: ['open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label']
Тип индекса: <class 'pandas.core.indexes.datetimes.DatetimeIndex'>
Диапазон дат: 2025-06-11 20:00:00+07:00 - 2025-08-12 13:00:00+07:00
[INFO] 1.2. Анализ исходных данных:
Статистика по основным колонкам:
  - open: min=3263.8100, max=3448.3600, mean=3350.6981
  - high: min=3269.9100, max=3451.5250, mean=3354.9741
  - low: min=3244.4150, max=3439.6000, mean=3346.1865
  - close: min=3263.8150, max=3448.4900, mean=3350.6429
  - volume: min=1147.0000, max=121439.0000, mean=18950.0680
[OK] Loading sample data completed successfully
================================================================================
[STEP] STEP 2: Шаг 2: Создание и настройка MACD анализатора
----------------------------------------------------
[INFO] Создаем и настраиваем MACDZoneAnalyzer с различными параметрами.
[INFO] 2.1. Создание базового MACD анализатора:
Создан базовый MACD анализатор: fast=12, slow=26, signal=9
[INFO] 2.2. Создание MACD анализатора с агрессивными параметрами:
Создан агрессивный MACD анализатор: fast=8, slow=21, signal=5
[INFO] 2.3. Создание MACD анализатора с консервативными параметрами:
Создан консервативный MACD анализатор: fast=21, slow=55, signal=13
[INFO] 2.4. Анализ конфигураций анализаторов:
  - basic:
    * Быстрый период: 12
    * Медленный период: 26
    * Сигнальный период: 9
    * Чувствительность: Высокая
  - aggressive:
    * Быстрый период: 8
    * Медленный период: 21
    * Сигнальный период: 5
    * Чувствительность: Высокая
  - conservative:
    * Быстрый период: 21
    * Медленный период: 55
    * Сигнальный период: 13
    * Чувствительность: Низкая
[OK] Creating MACD analyzer completed successfully
================================================================================
[STEP] STEP 3: Шаг 3: Расчет MACD и анализ зон
---------------------------------------
[INFO] Рассчитываем MACD и анализируем зоны для различных конфигураций.
[INFO] 3.1. Расчет MACD для всех конфигураций:
  - basic: (1000, 26), колонки: ['open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label', 'macd_signal', 'macd_hist', 'hl_avg', 'ohlc_avg', 'typical_price', 'true_range', 'price_change', 'price_change_pct', 'gap', 'gap_pct', 'volume_sma_20', 'volume_ratio']
  - aggressive: (1000, 26), колонки: ['open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label', 'macd_signal', 'macd_hist', 'hl_avg', 'ohlc_avg', 'typical_price', 'true_range', 'price_change', 'price_change_pct', 'gap', 'gap_pct', 'volume_sma_20', 'volume_ratio']
  - conservative: (1000, 26), колонки: ['open', 'high', 'low', 'close', 'volume', 'accumulation_distribution', 'macd', 'signal', 'rsi', 'rsi_based_ma', 'regular_bullish', 'regular_bullish_label', 'regular_bearish', 'regular_bearish_label', 'macd_signal', 'macd_hist', 'hl_avg', 'ohlc_avg', 'typical_price', 'true_range', 'price_change', 'price_change_pct', 'gap', 'gap_pct', 'volume_sma_20', 'volume_ratio']
[INFO] 3.2. Анализ зон MACD:
  - Анализ зон для basic:
    * Обнаружено зон: 29
    * Бычьи зоны: 15
    * Медвежьи зоны: 14
    * Нейтральные зоны: 0
    * Средняя длительность: 35.4 периодов
    * Минимальная длительность: 5 периодов
    * Максимальная длительность: 98 периодов
  - Анализ зон для aggressive:
    * Обнаружено зон: 29
    * Бычьи зоны: 15
    * Медвежьи зоны: 14
    * Нейтральные зоны: 0
    * Средняя длительность: 35.4 периодов
    * Минимальная длительность: 5 периодов
    * Максимальная длительность: 98 периодов
  - Анализ зон для conservative:
    * Обнаружено зон: 29
    * Бычьи зоны: 15
    * Медвежьи зоны: 14
    * Нейтральные зоны: 0
    * Средняя длительность: 35.4 периодов
    * Минимальная длительность: 5 периодов
    * Максимальная длительность: 98 периодов
[OK] Calculating MACD and analyzing zones completed successfully
================================================================================
[STEP] STEP 4: Шаг 4: Статистические тесты и кластеризация
---------------------------------------------------
[INFO] Выполняем статистические тесты и кластеризацию MACD данных.
[INFO] 4.1. Статистические тесты для MACD данных:
  - Статистические тесты для basic:
    * MACD линия:
      - Среднее: 0.0235
      - Стандартное отклонение: 6.4877
      - Минимум: -14.9674
      - Максимум: 16.9758
      - Медиана: -0.0876
      - Асимметрия: 0.1893
      - Эксцесс: -0.4383
      - Выбросы (IQR метод): 0
  - Статистические тесты для aggressive:
    * MACD линия:
      - Среднее: 0.0320
      - Стандартное отклонение: 7.0024
      - Минимум: -17.4405
      - Максимум: 19.9952
      - Медиана: 0.2948
      - Асимметрия: 0.1413
      - Эксцесс: -0.1801
      - Выбросы (IQR метод): 4
  - Статистические тесты для conservative:
    * MACD линия:
      - Среднее: -0.0183
      - Стандартное отклонение: 10.1744
      - Минимум: -21.0818
      - Максимум: 21.9632
      - Медиана: -1.0301
      - Асимметрия: 0.1921
      - Эксцесс: -0.8713
      - Выбросы (IQR метод): 0
[INFO] 4.2. Кластеризация MACD данных:
  - Кластеризация для basic:
    * Границы кластеров (квантили):
      - Q25: -4.7428
      - Q50: -0.0876
      - Q75: 4.1683
    * Распределение по кластерам:
      - Низкий: 250 (25.0%)
      - Средний-низкий: 250 (25.0%)
      - Средний-высокий: 250 (25.0%)
      - Высокий: 250 (25.0%)
  - Кластеризация для aggressive:
    * Границы кластеров (квантили):
      - Q25: -4.7927
      - Q50: 0.2948
      - Q75: 4.5071
    * Распределение по кластерам:
      - Низкий: 250 (25.0%)
      - Средний-низкий: 250 (25.0%)
      - Средний-высокий: 250 (25.0%)
      - Высокий: 250 (25.0%)
  - Кластеризация для conservative:
    * Границы кластеров (квантили):
      - Q25: -7.9613
      - Q50: -1.0301
      - Q75: 7.3866
    * Распределение по кластерам:
      - Низкий: 250 (25.0%)
      - Средний-низкий: 250 (25.0%)
      - Средний-высокий: 250 (25.0%)
      - Высокий: 250 (25.0%)
[OK] Statistical tests and clustering completed successfully
================================================================================
[STEP] STEP 5: Шаг 5: Анализ последовательностей и паттернов
-----------------------------------------------------
[INFO] Анализируем последовательности и паттерны в MACD данных.
[INFO] 5.1. Анализ последовательностей MACD:
  - Анализ последовательностей для basic:
    * Анализ пересечений:
      - Бычьи пересечения: 42
      - Медвежьи пересечения: 41
      - Всего пересечений: 83
    * Последние пересечения:
      - bullish: значение 4.1456
      - bearish: значение 3.8925
      - bullish: значение 4.1556
      - bearish: значение 3.0668
      - bullish: значение -8.9688
  - Анализ последовательностей для aggressive:
    * Анализ пересечений:
      - Бычьи пересечения: 63
      - Медвежьи пересечения: 62
      - Всего пересечений: 125
    * Последние пересечения:
      - bullish: значение 1.8360
      - bearish: значение 0.0069
      - bullish: значение 1.2618
      - bearish: значение 0.9778
      - bullish: значение -10.3205
  - Анализ последовательностей для conservative:
    * Анализ пересечений:
      - Бычьи пересечения: 24
      - Медвежьи пересечения: 24
      - Всего пересечений: 48
    * Последние пересечения:
      - bearish: значение 19.6476
      - bullish: значение 5.4013
      - bearish: значение 5.3976
      - bullish: значение 5.4709
      - bearish: значение 7.9320
[INFO] 5.2. Анализ паттернов MACD:
  - Анализ паттернов для basic:
    * Паттерны гистограммы:
      - Изменения знака: 82
      - Положительные бары: 519 (51.9%)
      - Отрицательные бары: 480 (48.0%)
  - Анализ паттернов для aggressive:
    * Паттерны гистограммы:
      - Изменения знака: 124
      - Положительные бары: 511 (51.1%)
      - Отрицательные бары: 488 (48.8%)
  - Анализ паттернов для conservative:
    * Паттерны гистограммы:
      - Изменения знака: 47
      - Положительные бары: 503 (50.3%)
      - Отрицательные бары: 496 (49.6%)
[OK] Sequence and pattern analysis completed successfully
================================================================================
[STEP] STEP 6: Шаг 6: Полный анализ MACD зон
-------------------------------------
[INFO] Выполняем полный анализ MACD зон для различных конфигураций.
[INFO] 6.1. Полный анализ MACD зон:
  - Полный анализ для basic:
    * Обнаружено зон: 31
    * Статистики зон:
      - Всего зон: 31
      - Бычьи зоны: 16
      - Медвежьи зоны: 15
  - Полный анализ для aggressive:
    * Обнаружено зон: 41
    * Статистики зон:
      - Всего зон: 41
      - Бычьи зоны: 21
      - Медвежьи зоны: 20
  - Полный анализ для conservative:
    * Обнаружено зон: 20
    * Статистики зон:
      - Всего зон: 20
      - Бычьи зоны: 10
      - Медвежьи зоны: 10
[INFO] 6.2. Анализ гипотез:
  - Анализ гипотез для basic:
    * Результаты тестов гипотез:
      - hypothesis_1_long_zones_strong_moves:
      - description: Long zones end with stronger price moves
      - t_statistic: 5.5341
      - p_value: 0.0002
      - significant: True
      - long_zones_avg_return: 0.0154
      - short_zones_avg_return: 0.0040
      - hypothesis_2_hist_duration_correlation:
      - description: Histogram amplitude correlates with zone duration
      - correlation: 0.7450
      - p_value: 0.0000
      - significant: True
      - hypothesis_3_correlation_drawdown:
      - description: Price-histogram correlation affects drawdown
      - t_statistic: -1.3745
      - p_value: 0.1909
      - significant: False
      - high_corr_avg_drawdown: 0.0080
      - low_corr_avg_drawdown: 0.0102
  - Анализ гипотез для aggressive:
    * Результаты тестов гипотез:
      - hypothesis_1_long_zones_strong_moves:
      - description: Long zones end with stronger price moves
      - t_statistic: 3.5508
      - p_value: 0.0036
      - significant: True
      - long_zones_avg_return: 0.0131
      - short_zones_avg_return: 0.0031
      - hypothesis_2_hist_duration_correlation:
      - description: Histogram amplitude correlates with zone duration
      - correlation: 0.6467
      - p_value: 0.0000
      - significant: True
      - hypothesis_3_correlation_drawdown:
      - description: Price-histogram correlation affects drawdown
      - t_statistic: -2.7365
      - p_value: 0.0141
      - significant: True
      - high_corr_avg_drawdown: 0.0062
      - low_corr_avg_drawdown: 0.0101
  - Анализ гипотез для conservative:
    * Результаты тестов гипотез:
      - hypothesis_1_long_zones_strong_moves:
      - description: Long zones end with stronger price moves
      - t_statistic: 1.3093
      - p_value: 0.2474
      - significant: False
      - long_zones_avg_return: 0.0066
      - short_zones_avg_return: 0.0030
      - hypothesis_2_hist_duration_correlation:
      - description: Histogram amplitude correlates with zone duration
      - correlation: 0.9120
      - p_value: 0.0000
      - significant: True
      - hypothesis_3_correlation_drawdown:
      - description: Price-histogram correlation affects drawdown
      - t_statistic: -2.8048
      - p_value: 0.0263
      - significant: True
      - high_corr_avg_drawdown: 0.0066
      - low_corr_avg_drawdown: 0.0145
[OK] Complete MACD zone analysis completed successfully
================================================================================
[STEP] STEP 7: Шаг 7: Визуализация результатов анализа
-----------------------------------------------
[INFO] Создаем визуализации и экспортируем результаты анализа.
[INFO] 7.1. Создание сводки анализа:
  - Создание сводки для basic:
    * Сводка создана успешно
      - Всего зон: 31
      - Всего зон: 31
  - Создание сводки для aggressive:
    * Сводка создана успешно
      - Всего зон: 41
      - Всего зон: 41
  - Создание сводки для conservative:
    * Сводка создана успешно
      - Всего зон: 20
      - Всего зон: 20
[INFO] 7.2. Экспорт результатов:
  - Экспорт результатов для basic:
    * JSON экспорт: macd_analysis_basic.json
    * CSV экспорт: macd_zones_basic.csv
  - Экспорт результатов для aggressive:
    * JSON экспорт: macd_analysis_aggressive.json
    * CSV экспорт: macd_zones_aggressive.csv
  - Экспорт результатов для conservative:
    * JSON экспорт: macd_analysis_conservative.json
    * CSV экспорт: macd_zones_conservative.csv
[OK] Visualization and export completed successfully
================================================================================
[STEP] STEP 8: Шаг 8: Сравнение различных конфигураций MACD
----------------------------------------------------
[INFO] Сравниваем эффективность различных конфигураций MACD.
[INFO] 8.1. Сравнение производительности конфигураций:
  - Тестирование производительности basic:
    * Время расчета: 0.0049 сек
    * Скорость: 204625 записей/сек
  - Тестирование производительности aggressive:
    * Время расчета: 0.0026 сек
    * Скорость: 379939 записей/сек
  - Тестирование производительности conservative:
    * Время расчета: 0.0023 сек
    * Скорость: 432152 записей/сек
[INFO] 8.2. Сравнение качества анализа:
  - Анализ качества анализа basic:
    * Всего зон: 31
    * Бычьи зоны: 16
    * Медвежьи зоны: 15
  - Анализ качества анализа aggressive:
    * Всего зон: 41
    * Бычьи зоны: 21
    * Медвежьи зоны: 20
  - Анализ качества анализа conservative:
    * Всего зон: 20
    * Бычьи зоны: 10
    * Медвежьи зоны: 10
[INFO] 8.3. Рейтинг конфигураций:
  - Рейтинг конфигураций:
    * 1. conservative: общий балл 434.1521 (производительность: 432.1521, зоны: 20)
    * 2. aggressive: общий балл 384.0392 (производительность: 379.9392, зоны: 41)
    * 3. basic: общий балл 207.7245 (производительность: 204.6245, зоны: 31)
[OK] Comparing MACD configurations completed successfully
================================================================================
[STEP] STEP 9: Шаг 9: Анализ производительности и оптимизация
------------------------------------------------------
[INFO] Анализируем производительность и находим возможности оптимизации.
[INFO] 9.1. Детальный анализ производительности:
  - Детальный анализ производительности:
    * Самый быстрый: conservative (0.0023 сек)
    * Самый медленный: basic (0.0049 сек)
    * Разница в скорости: 2.11x
    * basic: эффективность 204.62 тыс. записей/сек
    * aggressive: эффективность 379.94 тыс. записей/сек
    * conservative: эффективность 432.15 тыс. записей/сек
[INFO] 9.2. Анализ использования памяти:
  - Использование памяти для basic:
    * Размер данных: 0.30 МБ
    * Количество колонок: 26
    * Типы данных: [dtype('float64') dtype('O')]
  - Использование памяти для aggressive:
    * Размер данных: 0.30 МБ
    * Количество колонок: 26
    * Типы данных: [dtype('float64') dtype('O')]
  - Использование памяти для conservative:
    * Размер данных: 0.30 МБ
    * Количество колонок: 26
    * Типы данных: [dtype('float64') dtype('O')]
[INFO] 9.3. Рекомендации по оптимизации:
  - Рекомендации по оптимизации:
    * Быстрые конфигурации: basic, aggressive, conservative
      - Рекомендуется для высокочастотного анализа
    * Общие рекомендации:
      - Используйте кэширование для повторных расчетов
      - Оптимизируйте размер данных для анализа
      - Выбирайте конфигурацию под конкретную задачу
[OK] Performance analysis and optimization completed successfully
================================================================================
[STEP] STEP 10: Шаг 10: Интеграция с другими индикаторами
--------------------------------------------------
[INFO] Интегрируем MACD анализ с другими техническими индикаторами.
[INFO] 10.1. Создание комплексного набора индикаторов:
  - Создание комплексного набора:
    * Базовые индикаторы:
      - sma_20: SimpleMovingAverage(period=20)
      - rsi_14: RelativeStrengthIndex(period=14)
      - bbands: BollingerBands(period=20, std_dev=2.0)
    * MACD конфигурации:
      - macd_basic: MACDZoneAnalyzer(fast=12, slow=26, signal=9)
      - macd_aggressive: MACDZoneAnalyzer(fast=8, slow=21, signal=5)
      - macd_conservative: MACDZoneAnalyzer(fast=21, slow=55, signal=13)
[INFO] 10.2. Анализ корреляций между индикаторами:
  - Анализ корреляций:
    * Ошибка анализа корреляций: cannot import name 'SimpleMovingAverage' from 'bquant.indicators.library' (C:\Users\user\Documents\Pro\bquant\bquant\indicators\library\__init__.py)
[INFO] 10.3. Создание торговых стратегий:
  - Примеры торговых стратегий:
    * Стратегия 1: MACD + RSI: Покупка при бычьем пересечении MACD и RSI < 30
    * Стратегия 2: MACD + Bollinger Bands: Продажа при медвежьем пересечении MACD и цена выше верхней полосы
    * Стратегия 3: MACD + SMA: Покупка при бычьем пересечении MACD и цена выше SMA20
    * Стратегия 4: MACD + Volume: Подтверждение сигнала MACD объемом выше среднего
[OK] Integration with other indicators completed successfully
================================================================================
[STEP] STEP 11: Заключение
------------------------------
[INFO] Мы протестировали все основные возможности MACDZoneAnalyzer BQuant:
✅ Создание и настройка MACD анализатора с различными параметрами
✅ Анализ зон MACD (бычьи/медвежьи/нейтральные)
✅ Статистические тесты и кластеризация данных
✅ Анализ последовательностей и паттернов
✅ Детекция торговых сигналов и пересечений
✅ Визуализация и экспорт результатов
✅ Сравнение различных конфигураций MACD
✅ Анализ производительности и оптимизация
✅ Интеграция с другими техническими индикаторами
[INFO] Протестированы возможности MACDZoneAnalyzer:
🔧 Различные конфигурации (базовая, агрессивная, консервативная)
🔧 Анализ зон и детекция сигналов
🔧 Статистический анализ и кластеризация
🔧 Экспорт результатов в JSON и CSV
🔧 Интеграция с базовыми индикаторами
[INFO] MACDZoneAnalyzer BQuant предоставляет:
🏗️ Продвинутый анализ MACD с зональным подходом
🏗️ Гибкие конфигурации для различных торговых стилей
🏗️ Статистические инструменты для валидации сигналов
🏗️ Интеграцию с экосистемой индикаторов BQuant
🏗️ Экспорт результатов для дальнейшего анализа
🏗️ Высокую производительность и оптимизацию
[INFO] Это демонстрирует мощь и гибкость специализированного MACD анализатора BQuant для продвинутого технического анализа.

[END] Script finished successfully!
[END] Log ended: 2025-10-06 13:35:13
[TIME] Duration: 0:00:03.277498
